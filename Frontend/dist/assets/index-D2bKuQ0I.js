import{i as Is,u as Se,r as s,g as Rs,G as es,a as te,j as e,S as P,s as Ds,n as He,d as ts,T as ss,D as jt,b as Ne,F as ct,c as It,e as Tt,M as _t,f as Ft,h as at,k as et,l as As,P as Ps,m as Ts,o as _s,p as rt,L as Ae,q as Fs,t as Es,v as Ls,w as Bs,x as Ue,y as r,B as J,z as as,I as rs,A as ns,C as Je,E as Ms,H as tt,J as We,K as is,N as os,O as ls,Q as vt,R as Os,U as D,V as pe,W as Rt,X as dt,Y as Ce,Z as ge,_ as Et,$ as Lt,a0 as Bt,a1 as Mt,a2 as Ze,a3 as Le,a4 as $s,a5 as qe,a6 as Gs,a7 as Vs,a8 as Qe,a9 as ze,aa as zs,ab as ut,ac as Ot,ad as cs,ae as ds,af as hs,ag as Hs,ah as ms,ai as Be,aj as Te,ak as Dt,al as Xe,am as $e,an as Ws,ao as qs,ap as Ys,aq as $t,ar as xt,as as Us,at as Gt,au as yt,av as bt,aw as Vt,ax as zt,ay as Zs,az as Qs,aA as Ks,aB as Js,aC as Xs,aD as ea,aE as ta,aF as Ht,aG as nt,aH as us,aI as sa,aJ as aa,aK as ra,aL as na,aM as ia,aN as oa,aO as la,aP as ca,aQ as da,aR as ha,aS as ma,aT as ua,aU as xa,aV as wt,aW as pa,aX as pt,aY as ga,aZ as it,a_ as Wt,a$ as xs,b0 as fa,b1 as qt,b2 as ja,b3 as va,b4 as ya,b5 as ba,b6 as wa,b7 as Na,b8 as Ca,b9 as Sa,ba as ot,bb as Nt,bc as lt,bd as Ct,be as Yt,bf as ka,bg as Ia,bh as Ra,bi as Da,bj as Aa,bk as Pa,bl as Ta,bm as _a,bn as Fa,bo as Ea,bp as La,bq as gt,br as ps,bs as ve,bt as St,bu as Ut,bv as Ba,bw as Ie,bx as Ma,by as Oa,bz as $a,bA as kt,bB as Ga,bC as Va,bD as za,bE as Ha,bF as Wa,bG as qa,bH as Ya,bI as Ua,bJ as Za,bK as Zt,bL as Qa,bM as Ka,bN as Qt,bO as Ja,bP as Xa,bQ as er,bR as tr}from"./vendor-D-rcVo7t.js";import{t as sr}from"./tesseract-C-ihEEBs.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))p(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const o of g.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&p(o)}).observe(document,{childList:!0,subtree:!0});function h(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function p(c){if(c.ep)return;c.ep=!0;const g=h(c);fetch(c.href,g)}})();const ar={apiKey:"AIzaSyBqSxRNw_jGGxvp2ElWka0mXVHnVm7aZXo",authDomain:"intellistay-1f610.firebaseapp.com",projectId:"intellistay-1f610",storageBucket:"intellistay-1f610.appspot.com",messagingSenderId:"1095715454581",appId:"1:1095715454581:web:ed99b350f4cf4276e6823c",measurementId:"G-K3ZEB8MFQK"},rr=Is(ar),nr=()=>{const t=Se();s.useEffect(()=>{localStorage.getItem("token")&&t("/")},[t])},ir=Rs(rr),or=new es;function lr(){nr(),te.defaults.withCredentials=!0;const[t,a]=s.useState(!1),[h,p]=s.useState(""),[c,g]=s.useState(!1),[o,N]=s.useState(!1),[u,x]=s.useState(!1),[d,f]=s.useState(!1),[j,n]=s.useState(!1),[_,m]=s.useState(!1),[k,L]=s.useState({emailReset:"",otp:"",newPassword:"",confirmPassword:""}),[C,H]=s.useState(!1),[b,z]=s.useState(""),[ce,de]=s.useState(!1),[re,xe]=s.useState(""),le=s.useRef(null),fe=s.useRef(null);s.useState(0),s.useState(null),s.useState(!1);const O=Q=>{Q.preventDefault(),te.post("http://localhost:3001/send-otp",{email:k.emailReset}).then(B=>{B.status===200?(n(!0),P.fire("OTP sent to your email.")):P.fire(B.data.message)}).catch(B=>console.log(B))},ne=Q=>{Q.preventDefault(),te.post("http://localhost:3001/verify",{email:k.emailReset,otp:k.otp}).then(B=>{B.status===200?(m(!0),P.fire("OTP verified successfully."),x(B.data.token),consolelog(u)):P.fire(B.data.message)}).catch(B=>console.log(B))},ie=Q=>{if(Q.preventDefault(),k.newPassword!==k.confirmPassword){P.fire("Passwords do not match!");return}te.post("http://localhost:3001/reset-password",{email:k.emailReset,password:k.newPassword,token:u}).then(B=>{B.status===200?(P.fire("Password reset successfully."),f(!1),n(!1),m(!1)):P.fire(B.data.message)}).catch(B=>console.log(B))},A=Q=>{L({...k,[Q.target.name]:Q.target.value})},F=()=>{a(!0)},K=()=>{a(!1)},[R,I]=s.useState({}),[M,X]=s.useState({firstname:"",email:"",password:"",cpassword:"",emailsign:"",passwordsign:""}),[U,S]=s.useState({errFirstname:!1,errEmail:!1,errPassword:!1,errCpassword:!1,errEmailsign:!1,errPasswordsign:!1,errnewPassword:!1,errconfirmPassword:!1}),l=Q=>{const B=Q.target.name,q=Q.target.value;X({...M,[B]:q})},i=Se(),v=Q=>{Q.preventDefault(),te.post("http://localhost:3001/register",M).then(B=>{console.log(B.data.formdata),I({...B.data.formdata}),B.data.message==="OTP sent to your email."&&g(!0),B.data.message==="Email already exists."&&P.fire("email already exists...")}).catch(B=>console.log(B))},T=()=>{I({...R,otp:h}),console.log(R),te.post("http://localhost:3001/verify-otp",R).then(Q=>{Q.status===200?(N(!0),a(!1),P.fire("Registration completed successfully!")):Q.status===400?P.fire("Error",Q.data.message,"error"):P.fire("Invalid OTP, please try again.")}).catch(Q=>console.log(Q))},V=Q=>{Q.preventDefault(),te.post("http://localhost:3001/user/login",{...M}).then(B=>{console.log(B.data),B.data.message==="success"?(localStorage.setItem("userEmail",B.data.data),localStorage.setItem("userId",B.data.id),localStorage.setItem("token",B.data.token),localStorage.setItem("displayName",B.data.displayName),i("/")):P.fire(B.data)}).catch(B=>console.log(B))},ee=()=>{Ds(ir,or).then(Q=>{es.credentialFromResult(Q).accessToken;const q=Q.user,oe={name:q.providerData[0].displayName,email:q.providerData[0].email,password:null,images:q.providerData[0].photoURL};te.post("http://localhost:3001/user/authWithGoogle",oe).then(W=>{var G,ae,$,Z;try{if(W.status===200){localStorage.setItem("token",W.data.token);const je={name:(G=W.data.user)==null?void 0:G.name,email:(ae=W.data.user)==null?void 0:ae.email,userId:($=W.data.user)==null?void 0:$._id,displayName:(Z=W.data.user)==null?void 0:Z.displayName};localStorage.setItem("userEmail",je.email),localStorage.setItem("userId",je.userId),localStorage.setItem("displayName",je.displayName),P.fire(W.data.msg),i("/")}else P.fire(W.data.msg),i("/signup")}catch(je){console.log(je)}}),P.fire("User authentication successful!")}).catch(Q=>{P.fire(Q.message)})};s.useEffect(()=>((async()=>{try{const B="/models";await Promise.all([He.tinyFaceDetector.loadFromUri(B),He.faceLandmark68Net.loadFromUri(B),He.faceRecognitionNet.loadFromUri(B)])}catch(B){console.error("Error loading face models:",B)}})(),()=>{fe.current&&fe.current.getTracks().forEach(B=>B.stop())}),[]);const ue=async Q=>{var B,q,oe;if(Q.preventDefault(),!ce){if(!b){P.fire({icon:"warning",title:"Email Required",text:"Please enter your email to proceed with face login"});return}try{de(!0);const W=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});le.current.srcObject=W,await new Promise(Fe=>le.current.onloadedmetadata=()=>Fe()),le.current.play();const G=P.fire({title:"Face Verification",html:"Please look at the camera and stay still",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{P.showLoading()}});let ae=null,$=0;const Z=30;for(;!ae&&$<Z;)ae=await ts(le.current,new ss).withFaceLandmarks().withFaceDescriptor(),ae||($++,await new Promise(Fe=>setTimeout(Fe,100)));if(!ae)throw new Error("Unable to detect face. Please ensure good lighting and face visibility.");const je=document.createElement("canvas");je.width=le.current.videoWidth,je.height=le.current.videoHeight,je.getContext("2d").drawImage(le.current,0,0,je.width,je.height);const he={email:b,faceDescriptor:Array.from(ae.descriptor).map(Fe=>Number(Fe.toFixed(8))),image:je.toDataURL("image/jpeg",.8)},Re=await te.post("http://localhost:3001/user/verify-face",he,{headers:{"Content-Type":"application/json"}});if(Re.data.success)localStorage.setItem("userEmail",Re.data.email),localStorage.setItem("userId",Re.data._id),localStorage.setItem("token",Re.data.token),localStorage.setItem("displayName",Re.data.displayName),await P.fire({icon:"success",title:"Login Successful",text:"Welcome back!",timer:1500,showConfirmButton:!1}),i("/");else throw new Error(Re.data.message||"Verification failed")}catch(W){console.error("Face login error:",W);const G=((q=(B=W.response)==null?void 0:B.data)==null?void 0:q.message)||W.message||"Face verification failed";P.fire({icon:"error",title:"Verification Failed",text:G,footer:"ðŸ’¡ Tip: Ensure good lighting and keep your face clearly visible"})}finally{(oe=le.current)!=null&&oe.srcObject&&(le.current.srcObject.getTracks().forEach(W=>W.stop()),le.current.srcObject=null),de(!1)}}};return e.jsxs("div",{className:`container ${t?"sign-up-mode":""}`,children:[e.jsx("div",{className:"forms-container",children:e.jsxs("div",{className:"signin-signup",children:[d?e.jsx("form",{className:"sign-in-form",children:j?_?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Reset Password"}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{type:"password",name:"newPassword",pattern:"^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[^a-zA-Z\\d])([a-zA-Z\\d[^a-zA-Z\\d]]{6,50})$",placeholder:"New Password",value:k.newPassword,onChange:A,onBlur:()=>S({...U,errnewPassword:!0}),focus:U.errnewPassword.toString(),required:!0}),e.jsx("span",{children:"Password must be at least 6 characters long and include a letter, number, and special character"})]}),e.jsx("br",{}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{type:"password",name:"confirmPassword",pattern:k.newPassword,placeholder:"Confirm Password",value:k.confirmPassword,onChange:A,onBlur:()=>S({...U,errconfirmPassword:!0}),focus:U.errconfirmPassword.toString(),required:!0}),e.jsx("span",{children:"password not matching"})]}),e.jsx("input",{type:"submit",value:"Reset Password",className:"btn solid",onClick:ie})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Verify OTP"}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-key"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:k.otp,onChange:A,required:!0})]}),e.jsx("input",{type:"submit",value:"Verify OTP",className:"btn solid",onClick:ne})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Forgot Password"}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-envelope"}),e.jsx("input",{type:"email",name:"emailReset",placeholder:"Enter your email",value:k.emailReset,onChange:A,required:!0})]}),e.jsx("input",{type:"submit",value:"Send OTP",className:"btn solid",onClick:O})]})}):e.jsxs("form",{className:"sign-in-form",onSubmit:C?ue:V,children:[e.jsx("h2",{className:"title",children:"Sign in"}),C?e.jsxs("div",{className:"face-login-container",children:[e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-envelope"}),e.jsx("input",{type:"email",placeholder:"Enter your email",value:b,onChange:Q=>z(Q.target.value),required:!0})]}),e.jsx("video",{ref:le,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"300px",height:"225px",borderRadius:"10px",marginBottom:"20px",border:"2px solid #4481eb",transform:"scaleX(-1)",display:ce?"block":"none"}}),re&&e.jsx("div",{className:"prompt-message",children:re}),e.jsx("button",{type:"submit",className:"btn solid",disabled:ce,children:ce?"Processing...":"Face Login"}),e.jsx("button",{type:"button",className:"btn transparent",onClick:()=>H(!1),disabled:ce,children:"Use Password Instead"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-envelope"}),e.jsx("input",{id:"email",type:"email",name:"emailsign",placeholder:"Email",value:M.emailsign,onChange:l,onBlur:()=>S({...U,errEmailsign:!0}),focus:U.errEmailsign.toString(),required:!0}),e.jsx("span",{children:"Enter a valid email id"})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{id:"password",type:"password",name:"passwordsign",pattern:"^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[^a-zA-Z\\d])([a-zA-Z\\d[^a-zA-Z\\d]]{6,50})$",placeholder:"Password",value:M.passwordsign,onChange:l,onBlur:()=>S({...U,errPasswordsign:!0}),focus:U.errPasswordsign.toString(),required:!0}),e.jsx("span",{children:"Password must be at least 6 characters long and include a letter, number, and special character"})]}),e.jsx("p",{className:"forgot-password",onClick:()=>f(!0),children:"Forgot Password?"}),e.jsx("button",{type:"button",className:"btn transparent",onClick:()=>H(!0),style:{marginTop:"10px",backgroundColor:"#4481eb"},children:"Login with Face ID"})]}),e.jsx("input",{type:"submit",id:"login",value:C?"Verify Face":"Login",className:"btn solid"}),e.jsx("div",{className:"social-media",children:e.jsx("a",{href:"#",className:"social-icon",onClick:ee,children:e.jsx("i",{className:"fab fa-google"})})})]}),e.jsxs("form",{action:"#",onSubmit:v,className:"sign-up-form",children:[e.jsx("h2",{className:"title",children:"Sign up"}),c?e.jsxs("div",{children:[e.jsx("h3",{className:"titleOtp",children:"Enter the OTP sent to your email"}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{type:"text",placeholder:"Enter OTP",value:h,onChange:Q=>p(Q.target.value)})]}),e.jsx("button",{type:"button",className:"btn",onClick:T,children:"Verify OTP"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-fields-container",children:[e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-user"}),e.jsx("input",{type:"text",pattern:"^[A-Za-z]+$",className:"input",name:"firstname",placeholder:"Full name",value:FormData.firstname,onChange:l,onBlur:()=>S({...U,errFirstname:!0}),focus:U.errFirstname.toString(),required:!0}),e.jsx("span",{children:"first name should be character"})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-envelope"}),e.jsx("input",{type:"email",name:"email",className:"input",placeholder:"Email",value:FormData.email,onChange:l,onBlur:()=>S({...U,errEmail:!0}),focus:U.errEmail.toString(),required:!0}),e.jsx("span",{children:"enter a valid email"})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{type:"password",className:"input",name:"password",pattern:"^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[^a-zA-Z\\d])([a-zA-Z\\d[^a-zA-Z\\d]]{6,50})$",placeholder:"Password",value:FormData.password,onChange:l,onBlur:()=>S({...U,errPassword:!0}),focus:U.errPassword.toString(),required:!0}),e.jsx("span",{children:"password should be atleast 6 characters and include atleast 1 letter,1 number,1 special characters"})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("i",{className:"fas fa-lock"}),e.jsx("input",{type:"password",className:"input",name:"cpassword",pattern:M.password,placeholder:"Confirm Password",value:FormData.cpassword,onChange:l,onBlur:()=>S({...U,errCpassword:!0}),focus:U.errCpassword.toString(),required:!0}),e.jsx("span",{children:"password not matching"})]})]}),e.jsx("input",{type:"submit",className:"btn",value:"Sign up"})]}),e.jsx("p",{className:"social-text",children:"Or Sign up with social platforms"}),e.jsx("div",{className:"social-media",children:e.jsx("a",{href:"#",className:"social-icon",onClick:ee,children:e.jsx("i",{className:"fab fa-google"})})})]})]})}),e.jsxs("div",{className:"panels-container",children:[e.jsxs("div",{className:"panel left-panel",children:[e.jsxs("div",{className:"content",children:[e.jsx("h3",{children:"Welcome to IntelliStay"}),e.jsx("h3",{children:"New here?"}),e.jsx("p",{children:"The Best Holidays Start Here! Make Yourself At Home In Our Hotel.."}),e.jsx("button",{className:"btn transparent",onClick:F,id:"sign-up-btn",children:"Sign up"})]}),e.jsx("img",{src:"img/log.svg",className:"image",alt:""})]}),e.jsxs("div",{className:"panel right-panel",children:[e.jsxs("div",{className:"content",children:[e.jsx("h3",{children:"Welcome to IntelliStay"}),e.jsx("h3",{children:"One of us?"}),e.jsx("p",{children:"The Best Holidays Start Here! Make Yourself At Home In Our Hotel.."}),e.jsx("button",{className:"btn transparent",onClick:K,id:"sign-in-btn",children:"Sign in"})]}),e.jsx("img",{src:"img/register.svg",className:"image",alt:""})]})]})]})}const Kt=t=>{if(!t)return"";const a=t.getDate().toString().padStart(2,"0"),h=(t.getMonth()+1).toString().padStart(2,"0"),p=t.getFullYear();return`${a}-${h}-${p}`};function gs({searchdata:t}){const a=Se(),[h,p]=s.useState(!1),[c,g]=s.useState({checkInDate:null,checkOutDate:null,adults:1,children:0}),[o,N]=s.useState("");s.useEffect(()=>{t&&Object.keys(t).length>0&&(console.log("Received searchdata:",t),g({...t,checkInDate:t.checkInDate?new Date(t.checkInDate):null,checkOutDate:t.checkOutDate?new Date(t.checkOutDate):null}))},[t]),new Date().toISOString().split("T")[0];const u=_=>{g(L=>({...L,checkInDate:_,checkOutDate:L.checkOutDate&&L.checkOutDate<=_?null:L.checkOutDate}));const m=new Date(_);m.setDate(m.getDate()+1);const k=m.toISOString().split("T")[0];N(k),g(L=>({...L,checkInDate:_,checkOutDate:m}))},x=_=>{g(m=>({...m,checkOutDate:_}))},d=()=>{p(!h)},f=_=>{g(m=>({...m,adults:m.adults+_}))},j=_=>{g(m=>({...m,children:m.children+_}))},n=_=>{_.preventDefault(),a("/rooms",{state:{data:c}})};return e.jsxs("section",{className:"section__container booking__container",children:[e.jsxs("form",{action:"",className:"booking__form",children:[e.jsxs("div",{className:"input__group",children:[e.jsx("span",{children:e.jsx("i",{className:"ri-calendar-2-fill"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"check-in",children:"CHECK-IN"}),e.jsx(jt,{selected:c.checkInDate,onChange:u,minDate:new Date,dateFormat:"dd-MM-yyyy",placeholderText:"DD-MM-YYYY",className:"custom-datepicker check-in-picker",id:"check-in",customInput:e.jsx("input",{type:"text",id:"check-in",value:c.checkInDate?Kt(c.checkInDate):"",readOnly:!0})})]})]}),e.jsxs("div",{className:"input__group",children:[e.jsx("span",{children:e.jsx("i",{className:"ri-calendar-2-fill"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"check-out",children:"CHECK-OUT"}),e.jsx(jt,{selected:c.checkOutDate,onChange:x,minDate:c.checkInDate?new Date(c.checkInDate.getTime()+864e5):new Date,dateFormat:"dd-MM-yyyy",placeholderText:"DD-MM-YYYY",className:"custom-datepicker check-out-picker",customInput:e.jsx("input",{type:"text",id:"check-out",value:c.checkOutDate?Kt(c.checkOutDate):"",readOnly:!0})})]})]}),e.jsxs("div",{className:"input__group",children:[e.jsx("span",{children:e.jsx("i",{className:"ri-user-fill"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guest",children:"GUEST"}),e.jsx("input",{type:"text",placeholder:`Adults: ${c.adults}, Children: ${c.children}`,name:"guest",id:"guest",readOnly:!0,onClick:d})]})]}),e.jsx("div",{className:"input__group input__btn",children:e.jsx("button",{className:"btn",onClick:n,id:"search-btn",children:"Search"})})]}),h&&e.jsx("div",{className:"guest__popup",children:e.jsxs("div",{className:"popup__content",children:[e.jsxs("div",{className:"popup__item",children:[e.jsx("span",{children:"Adults"}),e.jsx("button",{onClick:()=>f(-1),disabled:c.adults<=1,children:"-"}),e.jsx("span",{children:c.adults}),e.jsx("button",{onClick:()=>f(1),children:"+"})]}),e.jsxs("div",{className:"popup__item",children:[e.jsx("span",{children:"Children"}),e.jsx("button",{onClick:()=>j(-1),disabled:c.children<=0,children:"-"}),e.jsx("span",{children:c.children}),e.jsx("button",{onClick:()=>j(1),children:"+"})]}),e.jsx("button",{className:"popup__close",onClick:d,children:"Set"})]})}),e.jsx("div",{style:{color:"red",fontSize:"14px",marginTop:"10px"},children:e.jsx("p",{children:"**Check-in time is 2 PM and Check-out time is 11 AM."})})]})}const cr="/assets/logo-lK6ukCtP.png";function ke(){const t=Se(),[a,h]=s.useState(!1),p=localStorage.getItem("token");s.useState(!1),s.useEffect(()=>{const f=document.getElementById("menu-btn"),j=document.getElementById("nav-links"),n=f.querySelector("i"),_=()=>{j.classList.toggle("open");const k=j.classList.contains("open");n.setAttribute("className",k?"ri-close-line":"ri-menu-line")};f.addEventListener("click",_),j.addEventListener("click",()=>{j.classList.remove("open"),n.setAttribute("className","ri-menu-line")});const m={distance:"50px",origin:"bottom",duration:1e3};return Ne().reveal(".header__container p",{...m}),Ne().reveal(".header__container h1",{...m,delay:500}),Ne().reveal(".about__image img",{...m,origin:"left"}),Ne().reveal(".about__content .section__subheader",{...m,delay:500}),Ne().reveal(".about__content .section__header",{...m,delay:1e3}),Ne().reveal(".about__content .section__description",{...m,delay:1500}),Ne().reveal(".about__btn",{...m,delay:2e3}),Ne().reveal(".room__card",{...m,interval:500}),Ne().reveal(".service__list li",{...m,interval:500,origin:"right"}),()=>{f.removeEventListener("click",_),j.removeEventListener("click",()=>{})}},[]),te.defaults.withCredentials=!0;const c=()=>{te.post("http://localhost:3001/user/logout").then(f=>{f.status===200&&(localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("displayName"),t("/signup"))}).catch(f=>{console.error("Error logging out:",f)})},[g,o]=s.useState(""),N=f=>{f?o(f):t("/signup")};s.useEffect(()=>{const f=localStorage.getItem("displayName");f?N(f):o("")},[]);const u=()=>{h(!0)},x=()=>{h(!1)},d=(f,j)=>{f.preventDefault(),t(j),h(!1)};return e.jsx("div",{children:e.jsxs("nav",{children:[e.jsxs("div",{className:"nav__bar",children:[e.jsx("div",{className:"logo",children:e.jsx("a",{href:"#home",children:e.jsx("img",{src:cr,alt:"logo",onClick:()=>{t("/")}})})}),e.jsx("div",{className:"nav__menu__btn",id:"menu-btn",children:e.jsx("i",{className:"ri-menu-line"})})]}),e.jsxs("ul",{className:"nav__links",id:"nav-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#home",onClick:()=>{t("/")},children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"#about",onClick:()=>{t("/")},children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#service",onClick:()=>{t("/")},children:"Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#gallery",onClick:()=>{t("/")},children:"Gallery"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",onClick:()=>{t("/")},children:"Contact"})}),e.jsxs("li",{className:"dropdown",onMouseEnter:u,onMouseLeave:x,children:[e.jsxs("a",{href:"#",className:"restaurant-link",children:[e.jsx(ct,{className:"nav-icon"})," Restaurant"]}),e.jsxs("div",{className:`dropdown-content ${a?"show":""}`,children:[e.jsx("a",{href:"/restaurant/menu",onClick:f=>d(f,"/restaurant/menu"),children:"View Menu"}),p?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"/restaurant/cart",id:"cart",onClick:f=>d(f,"/restaurant/cart"),children:"My Cart"}),e.jsx("a",{href:"/restaurant/reservations",onClick:f=>d(f,"/restaurant/reservations"),id:"book-table",children:"Book Table"}),e.jsx("a",{href:"/restaurant/orders",onClick:f=>d(f,"/restaurant/orders"),children:"My Orders"}),e.jsx("a",{href:"/restaurant/table-reservations",onClick:f=>d(f,"/restaurant/table-reservations"),id:"table-reservation",children:"Table Reservation"})]}):null]})]}),g?e.jsx(e.Fragment,{children:e.jsxs("li",{className:"dropdown",children:[e.jsxs("a",{href:"",className:"username",children:["Hi, ",g]}),e.jsxs("div",{className:"dropdown-content",children:[e.jsx("a",{href:"/qrscanner",children:"Self Check-In/Check-Out"}),e.jsx("a",{href:"/myprofile",children:"Profile"}),e.jsx("a",{href:"/guide",children:"Guide"}),e.jsx("a",{href:"/my-bookings",id:"my-bookings",children:"My Bookings"}),e.jsx("a",{href:"/saved-guests",children:"Saved Guests"}),e.jsx("a",{href:"",onClick:c,children:"Logout"})]})]})}):e.jsx("li",{children:e.jsx("a",{href:"",onClick:()=>t("/signup"),children:" Login"})})]}),e.jsx("button",{className:"btn nav__btn",onClick:()=>t("/rooms"),children:"Book Now"})]})})}const dr=new It("AIzaSyD3IRHNvEArziuMOFYQcO1NUO0fbWB1Jd0"),hr="http://localhost:3001",_e=async t=>{try{const a=await fetch(`${hr}/chat${t}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error(`Error fetching ${t}:`,a),null}},mr=async()=>{try{const[t,a,h,p]=await Promise.all([_e("/rooms"),_e("/restaurant"),_e("/facility"),_e("/package")]);if(!t||!a||!h||!p)throw new Error("Failed to fetch complete hotel data");return{rooms:t,restaurant:a,facilities:h,packages:p}}catch(t){throw console.error("Error fetching hotel data:",t),new Error("Failed to fetch hotel information")}},ur=async()=>{try{const t=await mr();return console.log("hotelData",t),`IntelliBot AI assistant. Here's our current information:

ROOMS:
${t.rooms.map(a=>`
- ${a.roomtype}: â‚¹${a.rate}/night,
  ${a.description},
  Allowed Adults: ${a.allowedAdults},
  Allowed Children: ${a.allowedChildren},
  Amenities: ${a.amenities},
  Status: ${a.status?"âœ… available":"âŒ Fully Booked"}
`).join(`
`)}

RESTAURANT:
- ${t.restaurant.name}
- Hours: ${t.restaurant.hours}
- Current Status: ${t.restaurant.isOpen?"ðŸŸ¢ Open":"ðŸ”´ Closed"}
- Special of the day: ${t.restaurant.specialOfDay}
- Wait Time: ${t.restaurant.currentWaitTime}

MENU HIGHLIGHTS:
${t.restaurant.menu.map(a=>`
${a.categoryName}:
${a.items.map(h=>`- ${h.name} (${h.price})`).join(`
`)}
`).join(`
`)}

FACILITIES:
${t.facilities.map(a=>`
- ${a.name}
  Hours: ${a.operatingHours.open} - ${a.operatingHours.close}
  Status: ${a.status}
`).join(`
`)}

CURRENT PACKAGES:
${t.packages.map(a=>`
- ${a.name}: ${a.price.currency}${a.price.amount}
  ${a.description}
  ${a.availability?"âœ… Available":"âŒ Sold Out"}
`).join(`
`)}

Instructions:
1. Provide concise, accurate information about our services
2. For room bookings, check availability before suggesting
3. For restaurant queries, mention current wait times
4. Always include relevant pricing information
5. Suggest suitable packages based on guest needs
6. For unavailable services, offer alternatives
7. Add relevant emojis to make responses engaging

Remember to:
- Keep responses brief (2-3 sentences)
- Be polite and professional
- Guide users to reception for complex queries
- Mention current promotions when relevant`}catch(t){return console.error("Error generating system prompt:",t),null}},xr=(t,a)=>{var h,p,c,g;if(t.includes("menu")||t.includes("food")||t.includes("restaurant")){const o={};return(h=a==null?void 0:a.menu)==null||h.forEach(N=>{o[N.categoryName]=N.items.map(u=>({name:u.name,price:u.price,description:u.description,isVegetarian:u.isVegetarian,spiceLevel:u.spiceLevel||"Medium",preparationTime:u.preparationTime||"20-30 mins"}))}),{type:"bot",content:t,formattedData:{restaurantInfo:[`ðŸª ${(a==null?void 0:a.name)||"IntelliStay Restaurant"}`,`â° Hours: ${(a==null?void 0:a.hours)||"7:00 AM - 11:00 PM"}`,`âŒ› Current Wait: ${(a==null?void 0:a.currentWaitTime)||"15"} minutes`,`ðŸ‘¨â€ðŸ³ Special: ${(a==null?void 0:a.specialOfDay)||"Chef's Special Butter Chicken"}`],menu:Object.entries(o).map(([N,u])=>({category:N,items:u.map(x=>({name:x.name,price:x.price,description:x.description,badges:[x.isVegetarian?"ðŸŒ± Veg":"ðŸ– Non-Veg",`ðŸŒ¶ï¸ ${x.spiceLevel}`,`â±ï¸ ${x.preparationTime}`]}))}))},options:[{text:"Reserve Table",icon:"ðŸª‘"},{text:"Special Offers",icon:"ðŸŽ‰"},{text:"Contact Restaurant",icon:"ðŸ“ž"}]}}return t.includes("room")||t.includes("accommodation")?{type:"bot",content:t,formattedData:(p=a==null?void 0:a.rooms)==null?void 0:p.map(o=>({title:o.roomtype,points:[`ðŸ’° Price: â‚¹${o.rate}/night`,`ðŸ›ï¸ Features: ${o.description}`,`âœ¨ Status: ${o.status?"available":"Fully Booked"}`,`Allowed Adults: ${o.allowedAdults}`,`Allowed Children: ${o.allowedChildren}`,`Amenities: ${o.amenities}`]}))}:t.includes("facility")||t.includes("amenities")?{type:"bot",content:t,formattedData:(c=a==null?void 0:a.facilities)==null?void 0:c.map(o=>({title:o.name,points:[`â° Hours: ${o.operatingHours.open} - ${o.operatingHours.close}`,`ðŸ“ Status: ${o.status}`,`ðŸ’° ${o.pricing.rate>0?`Rate: â‚¹${o.pricing.rate} ${o.pricing.unit}`:"Complimentary"}`,`ðŸ“ ${o.description}`]}))}:t.includes("package")||t.includes("deal")?{type:"bot",content:t,formattedData:(g=a==null?void 0:a.packages)==null?void 0:g.map(o=>({title:o.name,points:[`ðŸ’° Price: â‚¹${o.price.amount}`,`ðŸ“… Duration: ${o.duration.days} days, ${o.duration.nights} nights`,`âœ¨ Status: ${o.availability?"Available":"Sold Out"}`,o.discount?`ðŸŽ‰ Special Offer: ${o.discount.percentage}% off`:"",`ðŸ“ ${o.description}`,`âœ… Inclusions: ${o.inclusions.map(N=>N.item).join(", ")}`].filter(Boolean)}))}:{type:"bot",content:t}},pr=async t=>{try{const a=await ur();if(!a)throw new Error("Failed to initialize chat system");const p=dr.getGenerativeModel({model:"gemini-pro"}).startChat({history:[{role:"user",parts:[{text:"Initialize as IntelliStay's AI assistant."}]},{role:"model",parts:[{text:a}]}],generationConfig:{temperature:.7,maxOutputTokens:150}}),c=await gr(t),N=(await(await p.sendMessage([{text:t}])).response).text(),u=xr(N,c),x=await fr(t,c);return x.length>0&&(u.options=x),u}catch(a){return console.error("Gemini API Error:",a),{type:"bot",content:"I apologize, but I'm having trouble accessing the information right now. Please try again in a moment.",options:[{text:"Contact Reception",icon:"ðŸ“ž"},{text:"Try Again",icon:"ðŸ”„"}]}}},gr=async t=>{const a=t.toLowerCase();try{if(a.includes("menu")||a.includes("food")||a.includes("restaurant")){const h=await _e("/restaurant"),p=await _e("/menu");return{...h,menu:p}}return a.includes("room")||a.includes("book")?await _e("/rooms"):a.includes("facility")||a.includes("gym")||a.includes("pool")?await _e("/facility"):a.includes("package")||a.includes("deal")||a.includes("offer")?await _e("/package"):null}catch(h){return console.error("Error fetching specific data:",h),null}},fr=async(t,a)=>{const h=t.toLowerCase(),p=[{text:"View Rooms",icon:"ðŸ¨"},{text:"Restaurant Menu",icon:"ðŸ½ï¸"},{text:"Our Facilities",icon:"ðŸŠ"},{text:"Special Packages",icon:"ðŸŽ"}];return a?h.includes("room")||h.includes("book")?[{text:"Check Availability",icon:"ðŸ“…"},{text:"View Room Types",icon:"ðŸ›ï¸"},{text:"Room Rates",icon:"ðŸ’°"},{text:"Book Now",icon:"âœ…"}]:h.includes("menu")||h.includes("food")||h.includes("restaurant")?[{text:"View Full Menu",icon:"ðŸ“–"},{text:"Reserve Table",icon:"ðŸª‘"},{text:"Today's Special",icon:"ðŸ‘¨â€ðŸ³"},{text:"Contact Restaurant",icon:"ðŸ“ž"}]:p:p},jr=()=>{const[t,a]=s.useState(!1),[h,p]=s.useState(!0),[c,g]=s.useState([{type:"bot",content:"Welcome to IntelliStay! ðŸ‘‹ I'm your virtual concierge. How may I assist you today?",options:[{text:"Room Booking",icon:e.jsx(Tt,{})},{text:"Restaurant",icon:e.jsx(ct,{})},{text:"Services",icon:e.jsx(_t,{})},{text:"Contact Us",icon:e.jsx(Ft,{})}]}]),[o,N]=s.useState(""),[u,x]=s.useState(!1),[d,f]=s.useState(null),j=s.useRef(null),n=s.useRef(null),_=()=>{var C;(C=j.current)==null||C.scrollIntoView({behavior:"smooth"})};s.useEffect(()=>{_()},[c]),s.useEffect(()=>{t&&n.current&&n.current.focus()},[t]),s.useEffect(()=>{if(h){const C=setTimeout(()=>{p(!1)},1e5);return()=>clearTimeout(C)}},[h]);const m=async C=>{if(!C.trim())return;f(null);const H={type:"user",content:C};g(b=>[...b,H]),N(""),x(!0);try{const b=Math.min(1e3,C.length*50);await new Promise(ce=>setTimeout(ce,b));const z=await pr(C);g(ce=>[...ce,z])}catch(b){console.error("Chatbot error:",b),f("Oops! Something went wrong. Please try again."),g(z=>[...z,{type:"bot",content:"I apologize, but I encountered an error. Please try selecting one of these options:",options:[{text:"Room Booking",icon:e.jsx(Tt,{})},{text:"Restaurant",icon:e.jsx(ct,{})},{text:"Services",icon:e.jsx(_t,{})},{text:"Contact Us",icon:e.jsx(Ft,{})}]}])}finally{x(!1)}},k=C=>{m(C.text)},L=C=>{C.key==="Enter"&&!C.shiftKey&&o.trim()&&(C.preventDefault(),m(o))};return e.jsxs("div",{className:"chatbot-container",children:[h&&!t&&e.jsxs("div",{className:"welcome-popup",children:[e.jsxs("div",{className:"welcome-content",children:[e.jsx(at,{className:"welcome-icon"}),e.jsx("p",{children:"I am IntelliBot! How may I help you?"}),e.jsx("button",{className:"close-welcome",onClick:()=>p(!1),"aria-label":"Close welcome message",children:e.jsx(et,{})})]}),e.jsx("div",{className:"welcome-arrow"})]}),e.jsx("button",{className:`chatbot-toggle ${t?"open":""} ${u?"typing":""}`,onClick:()=>{a(!t),p(!1)},"aria-label":t?"Close chat":"Open chat",children:t?e.jsx(et,{}):e.jsx(at,{})}),t&&e.jsxs("div",{className:"chatbot-window",children:[e.jsxs("div",{className:"chatbot-header",children:[e.jsx(at,{className:"chatbot-icon pulse"}),e.jsxs("div",{className:"header-text",children:[e.jsx("h3",{children:"IntelliBot Assistant"}),e.jsx("span",{className:"status",children:"Online"})]})]}),e.jsxs("div",{className:"chatbot-messages",role:"log",children:[c.map((C,H)=>e.jsxs("div",{className:`message ${C.type}`,style:{animationDelay:`${H*.1}s`},children:[e.jsxs("div",{className:"message-content",children:[C.type==="bot"&&e.jsx(at,{className:"message-icon"}),e.jsx("p",{children:C.content})]}),C.options&&e.jsx("div",{className:"message-options",children:C.options.map((b,z)=>e.jsxs("button",{onClick:()=>k(b),className:"option-button",children:[b.icon,e.jsx("span",{children:b.text})]},z))}),C.formattedData&&e.jsx("div",{className:"formatted-data",children:Array.isArray(C.formattedData)?C.formattedData.map((b,z)=>e.jsxs("div",{className:"data-section",children:[e.jsx("h4",{children:b.title}),e.jsx("ul",{children:b.points.map((ce,de)=>e.jsx("li",{children:ce},de))})]},z)):C.formattedData.restaurantInfo?e.jsxs("div",{className:"restaurant-data",children:[e.jsx("div",{className:"restaurant-info",children:C.formattedData.restaurantInfo.map((b,z)=>e.jsx("p",{children:b},z))}),e.jsx("div",{className:"menu-sections",children:C.formattedData.menu.map((b,z)=>e.jsxs("div",{className:"menu-section",children:[e.jsx("h4",{children:b.category}),e.jsx("ul",{children:b.items.map((ce,de)=>e.jsx("li",{children:ce},de))})]},z))})]}):null})]},H)),u&&e.jsx("div",{className:"message bot typing",children:e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})}),d&&e.jsx("div",{className:"error-message",children:d}),e.jsx("div",{ref:j})]}),e.jsxs("div",{className:"chatbot-input",children:[e.jsx("input",{ref:n,type:"text",value:o,onChange:C=>N(C.target.value),onKeyPress:L,placeholder:"Type your message...","aria-label":"Chat input",disabled:u}),e.jsx("button",{onClick:()=>m(o),className:"send-button",disabled:!o.trim()||u,"aria-label":"Send message",children:e.jsx(As,{})})]})]})]})},vr="/assets/logo1-D24JubbG.png",yr="/assets/about-DrGC2TZk.jpg",fs="/assets/room-1-DG7dP6cW.jpg",br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAK7SURBVHic7ZtPSxtBGIefmQ00QXooAekaoTdphWyEHHrMXbx589BPoBQvQkOhCK1gDqKXfoTcBQk99QuUgBoKxVMLkoVS+sdiY22Tt4ckYKU1WTX7xs0+18zu/N5nZmcGwhgR4SyTxb0paZoFIA8mL+BygzHgg1SBqnGkfLiWO/jr964AYzDuyv5jMGtASiFrGDRAin7J2xJBoCOgXXxtB5hVDhgWFb+UnRNBLEB75EemeIDZTs2YzJPdqVbT7hLdaf8/GtZpzdjOgjdqxQOkpGkWLJDXTqJI3oIZYQEmb2/6Pn8VBFyrHUKbWIB2AG0S2gEuIj3mkJtM4WWSZCeSeJkk47cvjnzv6btAfQylgIRjWCqkWSykSThmsH0N9O2XYNpNsjHv8uDurVD6GyoBjx7e4dns+MBH/SxDswhOu8nQi4chEZBwDBvzbujFw5AIWCykQ/vmz6MuID3msFRIq/WvLiA3mVKZ+l3UBXiZpGr/6ttgdiKYgMrb72y9/sTnH02+NZr8/C29H7oAdQFBZ8CLVx85/PLr2vpX/wR6ne3Pc53FwxAI0CYWoB1Am1iAdgBtYgHaAbQx7sr+1Y5SPfjw/P4gX/9PavUT5l6+76ttJGdA+c3XvttGTsDxaYvtvaO+20dOwPbeEcenrb7bR05AkOkPERNQq59Qq58EeiZSAoKOPkRIQNDFr0tkBARd/LpERsBlpj+EcBLsRdCTYtB/f3sRmRlwWWIB2gG0iQVoB9AmFqAdQJtYgHYAbWIB2gG0iQVoB9DGtu/VjSYGfNu5VDiiSNUCIyyAqjWOlIGGdhIFGsaRsm3fpZWidprwkeLhWu7AAvglbwuoKCcKk0qn5vY2KIL4pewcyDLR/hwaIMvde8Nw5hwggtTXvU3rtGYMsmqQnShskQb8di2yap3WTH3d2+wWD/AH4abNDWvXi/sAAAAASUVORK5CYII=",wr="/assets/instagram-CwJJ6Y2J.png",Nr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABYgAAAWIBXyfQUwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAN7SURBVHic7drBbxVVFMfxz4xPni1VbGip1orGQDBCDYnBLquyZskSdpQddNE1sOEfYEOIq3ZJWLLEEIkSEmixojEUEItaRSgUG2ibkoyL26avtdra9s190vkmN5P7cmfO75w5c+fNvYeCgoKCgoKCgnVKshYXyXgF9Xh95ljGS3htwdBNSCv6dTPHiYrfnmN8wXmPK8Y9xZ8YT8LYVfGPAciC0G34EB/gDbRiC5pmxG8UnF6TQK6AKSEgYzPHx/gV9/ELvse3CSPLvmJGOaM7Yygje0Ha9YxDGS8v5XxbxpUaEFytdjXjnUqfkwrnN2MAW5edLv9PfsJHCY+YPyH1efGdh3fRO9tJIKMDVyIJisXHCVdnM+BQVClx6GLuEfgsopBYfArJzOT3QLx3eSwyNKd43/pznuDzjhTvxVYSkW0p2mKriMjWFM1VN7NrF62tVTezAppSYRKsLnv2cOsWJ05QV7fk8BzZnApfdtWnvp7jxxka4uBBkpqYd3PKgEra2ujt5eJFdu/O1fQiNKXCIkX+dHbS309fHy0tUSRgUyqs5sQhTTlwgNu3w/xQLuetoJwKy1dxaWgI88ONG+zfn6flDXEzYCHbt3P2LBcu0N6eh8UayYCF7N3LwABnztBc1b8pG2ozAFAq0dXFzZscPRr6a085XXpMZMplGhurFYCkJCwt11fj6qsiyzh3jp4e7t2rlpXJ2gzAtWsh7S9frralqVQIQG0wMsLhw3R05OE8TM1mQFwmJjh1ipMnGV+4K1ZVJkuYzNPi3zh/niNHuHs3hvWpFE9iWHb9evge2LcvlvMwluJhriZHR+nuDmsEly7lanoRHpYwmoup6WlOn+bYMZ7ESbpFGC3JIwMGB9m5M6wK1RY5ZcDAQNVNrJBHqVBIsF75OcWPsVVE5E6ShZKX+7GVRGJLmvAHhmMricBwwoPZz+Evo0qJw9fMbY9/HlFILOb7nPFFDRQx5dW+mvW7skiqBf14K7d7EIdRoUhqmIoiqSS8CT7BYBxduXATncm/TfoZdRk9GXdqIFXXqo1knMh4daG/S5XK7kC7UCr7tvCYvCmUxzYKpbIbVnNL1ogxPBNKZX/HbzPtB3yHbxKmFztx1Vu0WSg/bRCCslFYX5wtki6ZH/Xl7EWOm18EPWFu0eap4Oi4UDD9LAn9goKCgoKCgoKC/8pfE/1vrlVJXsAAAAAASUVORK5CYII=",Cr=()=>{const t=["https://upavanresort.com/uploads/gallery/main/18.jpg","https://upavanresort.com/uploads/gallery/main/131.JPG","https://upavanresort.com/uploads/gallery/main/21.JPG","https://upavanresort.com/uploads/gallery/main/1.jpg","https://upavanresort.com/uploads/gallery/main/2.JPG","https://upavanresort.com/uploads/gallery/main/5.JPG","https://upavanresort.com/uploads/gallery/main/1.jpg","https://upavanresort.com/uploads/gallery/main/2.JPG","https://upavanresort.com/uploads/gallery/main/5.JPG"],[a,h]=s.useState(6),p=()=>{h(c=>c+3)};return e.jsxs("section",{className:"explore",id:"gallery",children:[e.jsx("p",{className:"section__subheader",children:"GALLERY"}),e.jsx("h2",{className:"section__header",children:"Capture the Essence of Our Experience"}),e.jsx("div",{className:"gallery",children:t.slice(0,a).map((c,g)=>e.jsx("div",{className:"gallery__item",children:e.jsx("img",{src:c,alt:`Gallery Image ${g+1}`})},g))}),a<t.length&&e.jsx("div",{className:"see-more-container",children:e.jsx("button",{className:"btn",onClick:p,children:"See More"})})]})};function Sr(){const t=Se(),[a,h]=s.useState([]),[p,c]=s.useState(!1),g=o=>{t("/roomdetails",{state:{roomdata:o}})};return s.useEffect(()=>{const o=document.getElementById("menu-btn"),N=document.getElementById("nav-links"),u=o.querySelector("i"),x=()=>{N.classList.toggle("open");const f=N.classList.contains("open");u.setAttribute("className",f?"ri-close-line":"ri-menu-line")};o.addEventListener("click",x),N.addEventListener("click",()=>{N.classList.remove("open"),u.setAttribute("className","ri-menu-line")});const d={distance:"50px",origin:"bottom",duration:1e3};Ne().reveal(".header__container p",{...d}),Ne().reveal(".header__container h1",{...d,delay:500}),Ne().reveal(".about__image img",{...d,origin:"left"}),Ne().reveal(".about__content .section__subheader",{...d,delay:500}),Ne().reveal(".about__content .section__header",{...d,delay:1e3}),Ne().reveal(".about__content .section__description",{...d,delay:1500}),Ne().reveal(".about__btn",{...d,delay:2e3}),Ne().reveal(".room__card",{...d,interval:500}),Ne().reveal(".service__list li",{...d,interval:500,origin:"right"}),te.post("http://localhost:3001/user/rooms-details").then(f=>{if(f.status===200){const{availableRooms:j,message:n}=f.data;console.log(f.data),j.length===0?console.log("No rooms available."):(console.log(n),h(j))}}).catch(f=>{console.error("Error",f)})},[]),s.useEffect(()=>{const o=setTimeout(()=>{c(!0)},3e3);return()=>clearTimeout(o)},[]),s.useEffect(()=>{const o=()=>{window.scrollY>3e3?c(!1):c(!0)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),e.jsxs("div",{className:"home-container",children:[e.jsxs("header",{className:"header",children:[e.jsx(ke,{}),e.jsxs("div",{className:"section__container header__container",id:"home",children:[e.jsx("p",{children:"Simple - Unique - Friendly"}),e.jsxs("h1",{children:["Make Yourself At Home",e.jsx("br",{}),"In Our ",e.jsx("span",{children:"Hotel"}),"."]})]})]}),e.jsx(gs,{}),e.jsxs("section",{className:"section__container about__container",id:"about",children:[e.jsx("div",{className:"about__image",children:e.jsx("img",{src:yr,alt:"about"})}),e.jsxs("div",{className:"about__content",children:[e.jsx("p",{className:"section__subheader",children:"ABOUT US"}),e.jsx("h2",{className:"section__header",children:"The Best Holidays Start Here!"}),e.jsx("p",{className:"section__description",children:"With a focus on quality accommodations, personalized experiences, and seamless booking, our platform is dedicated to ensuring that every traveler embarks on their dream holiday with confidence and excitement."}),e.jsx("div",{className:"about__btn",children:e.jsx("button",{className:"btn",children:"Read More"})})]})]}),e.jsxs("section",{className:"section__container room__container",children:[e.jsx("p",{className:"section__subheader",children:"OUR LIVING ROOM"}),e.jsx("h2",{className:"section__header",children:"The Most Memorable Rest Time Starts Here."}),e.jsx("div",{className:"room__grid",children:a.length>0?a.map(o=>e.jsxs("div",{className:"room__card",children:[e.jsxs("div",{className:"room__card__image",children:[e.jsx("img",{src:o.images&&o.images.length>0?`http://localhost:3001/uploads/${o.images[0]}`:fs,alt:o.roomtype}),e.jsxs("div",{className:"room__card__icons",children:[e.jsx("span",{children:e.jsx("i",{className:"ri-heart-fill"})}),e.jsx("span",{children:e.jsx("i",{className:"ri-paint-fill"})}),e.jsx("span",{children:e.jsx("i",{className:"ri-shield-star-line"})})]})]}),e.jsxs("div",{className:"room__card__details",children:[e.jsx("h4",{children:o.roomtype}),e.jsx("p",{children:o.description}),e.jsxs("h5",{children:["Starting from ",e.jsxs("span",{children:["â‚¹",o.rate,"/night"]})]}),e.jsx("button",{className:"btn",onClick:()=>g(o),children:"See Details"})]})]},o._id)):e.jsx("p",{children:"No rooms available"})})]}),e.jsx("section",{className:"service",id:"service",children:e.jsx("div",{className:"section__container service__container",children:e.jsxs("div",{className:"service__content",children:[e.jsx("p",{className:"section__subheader",children:"SERVICES"}),e.jsx("h2",{className:"section__header",children:"Strive Only For The Best."}),e.jsxs("ul",{className:"service__list",children:[e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("i",{className:"ri-shield-star-line"})}),"High class Security"]}),e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("i",{className:"ri-24-hours-line"})}),"24 Hours Room Service"]}),e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("i",{className:"ri-headphone-line"})}),"Conference Room"]}),e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("i",{className:"ri-map-2-line"})}),"Tourist Guide Support"]})]})]})})}),e.jsx("section",{className:"section__container banner__container",children:e.jsxs("div",{className:"banner__content",children:[e.jsxs("div",{className:"banner__card",children:[e.jsx("h4",{children:"25+"}),e.jsx("p",{children:"Properties Available"})]}),e.jsxs("div",{className:"banner__card",children:[e.jsx("h4",{children:"350+"}),e.jsx("p",{children:"Bookings Completed"})]}),e.jsxs("div",{className:"banner__card",children:[e.jsx("h4",{children:"600+"}),e.jsx("p",{children:"Happy Customers"})]})]})}),e.jsx(Cr,{}),e.jsxs("footer",{className:"footer",id:"contact",children:[e.jsxs("div",{className:"section__container footer__container",children:[e.jsx("div",{className:"footer__col",children:e.jsx("div",{className:"logo",children:e.jsx("a",{href:"#home",onClick:()=>{t("/")},children:e.jsx("img",{src:vr,alt:"logo"})})})}),e.jsxs("div",{className:"footer__col",children:[e.jsx("h4",{children:"QUICK LINKS"}),e.jsx("ul",{className:"footer__links",children:e.jsx("li",{children:e.jsx("a",{href:"#home",onClick:()=>{t("/")},children:"Home"})})})]}),e.jsxs("div",{className:"footer__col",children:[e.jsx("h4",{children:"OUR SERVICES"}),e.jsx("ul",{className:"footer__links",children:e.jsx("li",{children:e.jsx("a",{href:"",onClick:()=>{t("/rooms")},children:"Reserve room"})})})]}),e.jsxs("div",{className:"footer__col",children:[e.jsx("h4",{children:"CONTACT US"}),e.jsx("ul",{className:"footer__links",children:e.jsx("li",{children:e.jsx("a",{href:"#",children:"intellistay@info.com"})})}),e.jsxs("div",{className:"footer__socials",children:[e.jsx("a",{href:"#",children:e.jsx("img",{src:br,alt:"facebook"})}),e.jsx("a",{href:"#",children:e.jsx("img",{src:wr,alt:"instagram"})}),e.jsx("a",{href:"#",children:e.jsx("img",{src:Nr,alt:"youtube"})})]})]})]}),e.jsx("div",{className:"footer__bar",children:"Copyright Â© 2024 INTELLISTAY Pvt.LTD. All rights reserved."})]}),p&&e.jsx("div",{className:"chatbot-wrapper",children:e.jsx(jr,{})})]})}function kr(){return e.jsx("div",{children:"Public"})}const Ir="data:image/svg+xml,%3csvg%20width='9'%20height='9'%20viewBox='0%200%209%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.33329%205.1721C3.33329%205.13139%203.36661%205.09807%203.40732%205.09807H3.73306C3.77377%205.09807%203.80709%205.13139%203.80709%205.1721V6.43803H6.43517V5.00924C6.43517%203.99946%205.6164%203.18068%204.60662%203.18068C3.59684%203.18068%202.77806%203.99946%202.77806%205.00924V6.43803H3.33329V5.1721Z'%20fill='%23492419'/%3e%3cpath%20d='M2.42205%203.13997L2.71522%202.84681C2.73817%202.82386%202.73817%202.78611%202.71522%202.76316L2.21255%202.26049C2.20142%202.24947%202.18639%202.24328%202.17072%202.24328C2.15506%202.24328%202.14002%202.24947%202.12889%202.26049L1.83573%202.55365C1.82471%202.56478%201.81853%202.57981%201.81853%202.59548C1.81853%202.61114%201.82471%202.62617%201.83573%202.63731L2.3384%203.13997C2.36135%203.16292%202.39836%203.16292%202.42205%203.13997ZM7.37915%202.55365L7.08598%202.26049C7.07485%202.24947%207.05982%202.24328%207.04416%202.24328C7.02849%202.24328%207.01346%202.24947%207.00233%202.26049L6.49966%202.76316C6.48864%202.77429%206.48246%202.78932%206.48246%202.80498C6.48246%202.82065%206.48864%202.83568%206.49966%202.84681L6.79282%203.13997C6.81577%203.16292%206.85353%203.16292%206.87648%203.13997L7.37915%202.63731C7.40209%202.61362%207.40209%202.5766%207.37915%202.55365ZM4.39941%202.17387H4.81398C4.84656%202.17387%204.87321%202.14722%204.87321%202.11465V1.40395C4.87321%201.37138%204.84656%201.34473%204.81398%201.34473H4.39941C4.36684%201.34473%204.34019%201.37138%204.34019%201.40395V2.11465C4.34019%202.14722%204.36684%202.17387%204.39941%202.17387ZM6.97568%207.44485H2.23772C2.10668%207.44485%202.00082%207.55072%202.00082%207.68175V7.85943C2.00082%207.892%202.02747%207.91865%202.06004%207.91865H7.15335C7.18593%207.91865%207.21258%207.892%207.21258%207.85943V7.68175C7.21258%207.55072%207.10671%207.44485%206.97568%207.44485ZM2.24512%206.73416C2.24512%206.86519%202.35099%206.97106%202.48202%206.97106H6.73138C6.86241%206.97106%206.96828%206.86519%206.96828%206.73416V5.00925C6.96828%203.70483%205.91112%202.64767%204.6067%202.64767C3.30228%202.64767%202.24512%203.70483%202.24512%205.00925V6.73416ZM2.77814%205.00925C2.77814%203.99947%203.59692%203.18069%204.6067%203.18069C5.61648%203.18069%206.43526%203.99947%206.43526%205.00925V6.43804H3.80717V5.17211C3.80717%205.1314%203.77385%205.09808%203.73314%205.09808H3.4074C3.36669%205.09808%203.33337%205.1314%203.33337%205.17211V6.43804H2.77814V5.00925Z'%20fill='%23FE2E00'/%3e%3c/svg%3e",Rr="data:image/svg+xml,%3csvg%20width='11'%20height='13'%20viewBox='0%200%2011%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.28171%2012.4278C6.09882%2012.4278%206.76163%2011.765%206.76163%2010.9472H3.80179C3.80179%2011.765%204.46459%2012.4278%205.28171%2012.4278ZM10.2647%208.96429C9.8177%208.48402%208.98139%207.76153%208.98139%205.39486C8.98139%203.59731%207.72102%202.15833%206.02155%201.8053V1.32318C6.02155%200.914389%205.69026%200.58287%205.28171%200.58287C4.87315%200.58287%204.54186%200.914389%204.54186%201.32318V1.8053C2.8424%202.15833%201.58203%203.59731%201.58203%205.39486C1.58203%207.76153%200.745713%208.48402%200.298753%208.96429C0.159946%209.11351%200.0984076%209.29188%200.0995643%209.46655C0.102109%209.84595%200.399851%2010.2069%200.842184%2010.2069H9.72123C10.1636%2010.2069%2010.4615%209.84595%2010.4639%209.46655C10.465%209.29188%2010.4035%209.11328%2010.2647%208.96429Z'%20fill='%238A8587'/%3e%3c/svg%3e",Dr="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5281%202.6345C10.8677%202.35919%2010.2067%202.25445%209.54605%202.25445C7.44886%202.25428%205.35184%203.30932%203.25465%203.30932C2.7287%203.30932%202.20308%203.24299%201.67712%203.07716C1.61804%203.05855%201.55879%203.04975%201.5009%203.04975C1.20786%203.04975%200.951782%203.27514%200.951782%203.58802V8.95647C0.951782%209.17018%201.07489%209.37273%201.27257%209.45497C1.93304%209.73044%202.59401%209.83519%203.25465%209.83519C5.35184%209.83519%207.44903%208.78015%209.54622%208.78015C10.0722%208.78015%2010.5978%208.84648%2011.1237%209.01231C11.1828%209.03092%2011.2421%209.03972%2011.3%209.03972C11.593%209.03972%2011.8491%208.81433%2011.8491%208.50145V3.13317C11.8489%202.91929%2011.7258%202.71691%2011.5281%202.6345ZM1.76907%203.9503C2.11165%204.03559%202.46921%204.0784%202.83699%204.10141C2.73687%204.59873%202.2969%204.97353%201.76907%204.97353V3.9503ZM1.76907%208.77287V7.96437C2.35428%207.96437%202.82779%208.42581%202.85384%209.00334C2.47023%208.97271%202.11165%208.89656%201.76907%208.77287ZM6.40035%207.66926C5.64794%207.66926%205.03821%206.94182%205.03821%206.04482C5.03821%205.14765%205.64811%204.42038%206.40035%204.42038C7.15259%204.42038%207.76249%205.14765%207.76249%206.04482C7.76249%206.94216%207.15242%207.66926%206.40035%207.66926ZM11.0316%208.13934C10.7333%208.06505%2010.4236%208.02343%2010.1067%207.99652C10.2067%207.55521%2010.575%207.22017%2011.0316%207.16264V8.13934ZM11.0316%204.14405C10.5057%204.07789%2010.0975%203.64149%2010.0814%203.10255C10.4141%203.13927%2010.7299%203.20797%2011.0316%203.31677V4.14405Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Ar="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.83536%201.54747H8.05863C8.05863%200.763487%207.42123%200.126083%206.63724%200.126083C5.85326%200.126083%205.21585%200.763487%205.21585%201.54747H3.43912C2.85057%201.54747%202.37308%202.02497%202.37308%202.61351V10.4311C2.37308%2011.0197%202.85057%2011.4972%203.43912%2011.4972H9.83536C10.4239%2011.4972%2010.9014%2011.0197%2010.9014%2010.4311V2.61351C10.9014%202.02497%2010.4239%201.54747%209.83536%201.54747ZM4.50516%209.54278C4.20978%209.54278%203.97214%209.30514%203.97214%209.00976C3.97214%208.71438%204.20978%208.47674%204.50516%208.47674C4.80054%208.47674%205.03818%208.71438%205.03818%209.00976C5.03818%209.30514%204.80054%209.54278%204.50516%209.54278ZM4.50516%207.4107C4.20978%207.4107%203.97214%207.17306%203.97214%206.87768C3.97214%206.58229%204.20978%206.34466%204.50516%206.34466C4.80054%206.34466%205.03818%206.58229%205.03818%206.87768C5.03818%207.17306%204.80054%207.4107%204.50516%207.4107ZM4.50516%205.27861C4.20978%205.27861%203.97214%205.04098%203.97214%204.74559C3.97214%204.45021%204.20978%204.21257%204.50516%204.21257C4.80054%204.21257%205.03818%204.45021%205.03818%204.74559C5.03818%205.04098%204.80054%205.27861%204.50516%205.27861ZM6.63724%201.01445C6.93262%201.01445%207.17026%201.25209%207.17026%201.54747C7.17026%201.84285%206.93262%202.08049%206.63724%202.08049C6.34186%202.08049%206.10422%201.84285%206.10422%201.54747C6.10422%201.25209%206.34186%201.01445%206.63724%201.01445ZM9.48002%209.18743C9.48002%209.28515%209.40006%209.3651%209.30234%209.3651H6.10422C6.0065%209.3651%205.92655%209.28515%205.92655%209.18743V8.83208C5.92655%208.73436%206.0065%208.65441%206.10422%208.65441H9.30234C9.40006%208.65441%209.48002%208.73436%209.48002%208.83208V9.18743ZM9.48002%207.05535C9.48002%207.15307%209.40006%207.23302%209.30234%207.23302H6.10422C6.0065%207.23302%205.92655%207.15307%205.92655%207.05535V6.7C5.92655%206.60228%206.0065%206.52233%206.10422%206.52233H9.30234C9.40006%206.52233%209.48002%206.60228%209.48002%206.7V7.05535ZM9.48002%204.92327C9.48002%205.02099%209.40006%205.10094%209.30234%205.10094H6.10422C6.0065%205.10094%205.92655%205.02099%205.92655%204.92327V4.56792C5.92655%204.4702%206.0065%204.39025%206.10422%204.39025H9.30234C9.40006%204.39025%209.48002%204.4702%209.48002%204.56792V4.92327Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Pr="data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.951782%2010.4413C0.951782%2010.9458%201.35854%2011.3551%201.85989%2011.3551H10.941C11.4423%2011.3551%2011.8491%2010.9458%2011.8491%2010.4413V7.0909H0.951782V10.4413ZM4.58422%209.14684C4.58422%209.0212%204.68638%208.9184%204.81124%208.9184H7.38422C7.50909%208.9184%207.61125%209.0212%207.61125%209.14684V9.90829C7.61125%2010.0339%207.50909%2010.1367%207.38422%2010.1367H4.81124C4.68638%2010.1367%204.58422%2010.0339%204.58422%209.90829V9.14684ZM2.16259%209.14684C2.16259%209.0212%202.26476%208.9184%202.38962%208.9184H3.75178C3.87665%208.9184%203.97881%209.0212%203.97881%209.14684V9.90829C3.97881%2010.0339%203.87665%2010.1367%203.75178%2010.1367H2.38962C2.26476%2010.1367%202.16259%2010.0339%202.16259%209.90829V9.14684ZM11.8491%203.74049V4.65424H0.951782V3.74049C0.951782%203.23602%201.35854%202.82674%201.85989%202.82674H10.941C11.4423%202.82674%2011.8491%203.23602%2011.8491%203.74049Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Tr="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_2_45)'%3e%3cpath%20d='M4.56435%205.37395L5.98573%206.79534L10.7237%202.05738'%20stroke='%23BDBABB'%20stroke-width='0.947592'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.2498%205.84773V9.1643C10.2498%209.41562%2010.15%209.65665%209.97228%209.83435C9.79457%2010.0121%209.55355%2010.1119%209.30223%2010.1119H2.66909C2.41777%2010.1119%202.17675%2010.0121%201.99904%209.83435C1.82133%209.65665%201.7215%209.41562%201.7215%209.1643V2.53116C1.7215%202.27984%201.82133%202.03882%201.99904%201.86111C2.17675%201.6834%202.41777%201.58357%202.66909%201.58357H7.88084'%20stroke='%23BDBABB'%20stroke-width='0.947592'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2_45'%3e%3crect%20width='11.3711'%20height='11.3711'%20fill='white'%20transform='translate(0.300171%200.16217)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",_r="data:image/svg+xml,%3csvg%20width='12'%20height='13'%20viewBox='0%200%2012%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.30225%202.3931H2.6691C2.14576%202.3931%201.72151%202.81735%201.72151%203.34069V9.97383C1.72151%2010.4972%202.14576%2010.9214%202.6691%2010.9214H9.30225C9.82559%2010.9214%2010.2498%2010.4972%2010.2498%209.97383V3.34069C10.2498%202.81735%209.82559%202.3931%209.30225%202.3931Z'%20stroke='%238A8587'%20stroke-width='0.947592'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Fr="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.1777%207.55002L11.1575%206.98605C11.2605%206.45418%2011.2605%205.90855%2011.1575%205.37668L12.1777%204.81271C12.2951%204.74852%2012.3477%204.61555%2012.3094%204.49176C12.0436%203.67561%2011.591%202.93741%2010.9995%202.323C10.9085%202.22901%2010.76%202.20608%2010.645%202.27027L9.62483%202.83424C9.19616%202.48119%208.70282%202.20837%208.16878%202.02955V0.903911C8.16878%200.775528%208.07538%200.663193%207.94367%200.635683C7.06477%200.447693%206.16431%200.456863%205.32852%200.635683C5.19681%200.663193%205.10341%200.775528%205.10341%200.903911V2.03185C4.57176%202.21296%204.07843%202.48577%203.64736%202.83653L2.62956%202.27257C2.51221%202.20837%202.36613%202.22901%202.27513%202.32529C1.68361%202.93741%201.23099%203.67561%200.965161%204.49405C0.924449%204.61785%200.97953%204.75081%201.09688%204.81501L2.11707%205.37897C2.01409%205.91085%202.01409%206.45647%202.11707%206.98835L1.09688%207.55231C0.97953%207.6165%200.926844%207.74947%200.965161%207.87327C1.23099%208.68942%201.68361%209.42762%202.27513%2010.042C2.36613%2010.136%202.51461%2010.1589%202.62956%2010.0948L3.64975%209.53079C4.07843%209.88384%204.57176%2010.1567%205.1058%2010.3355V11.4634C5.1058%2011.5918%205.1992%2011.7041%205.33092%2011.7316C6.20982%2011.9196%207.11027%2011.9105%207.94606%2011.7316C8.07778%2011.7041%208.17117%2011.5918%208.17117%2011.4634V10.3355C8.70282%2010.1544%209.19616%209.88155%209.62722%209.53079L10.6474%2010.0948C10.7648%2010.1589%2010.9108%2010.1383%2011.0018%2010.042C11.5934%209.42991%2012.046%208.69171%2012.3118%207.87327C12.3477%207.74718%2012.2951%207.61421%2012.1777%207.55002ZM6.63609%208.01541C5.57998%208.01541%204.72024%207.19238%204.72024%206.18137C4.72024%205.17035%205.57998%204.34732%206.63609%204.34732C7.69221%204.34732%208.55195%205.17035%208.55195%206.18137C8.55195%207.19238%207.69221%208.01541%206.63609%208.01541Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Er="data:image/svg+xml,%3csvg%20width='13'%20height='10'%20viewBox='0%200%2013%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.71764%202.87847L2.92624%206.00113V9.37137C2.92624%209.45863%202.96091%209.54232%203.02261%209.60403C3.08431%209.66573%203.168%209.7004%203.25526%209.7004L5.55967%209.69443C5.64665%209.694%205.72992%209.65914%205.79127%209.59748C5.85261%209.53583%205.88705%209.45239%205.88705%209.36541V7.39722C5.88705%207.30996%205.92172%207.22627%205.98342%207.16456C6.04513%207.10286%206.12882%207.0682%206.21608%207.0682H7.53218C7.61944%207.0682%207.70313%207.10286%207.76483%207.16456C7.82654%207.22627%207.8612%207.30996%207.8612%207.39722V9.36397C7.86107%209.40726%207.86948%209.45016%207.88595%209.4902C7.90243%209.53023%207.92664%209.56663%207.95721%209.59729C7.98777%209.62795%208.02409%209.65228%208.06408%209.66888C8.10406%209.68548%208.14693%209.69402%208.19023%209.69402L10.4938%209.7004C10.5811%209.7004%2010.6648%209.66573%2010.7265%209.60403C10.7882%209.54232%2010.8228%209.45863%2010.8228%209.37137V5.99886L7.03227%202.87847C6.9877%202.84255%206.93219%202.82297%206.87495%202.82297C6.81771%202.82297%206.7622%202.84255%206.71764%202.87847ZM12.7065%205.00089L10.9874%203.58382V0.735492C10.9874%200.670045%2010.9614%200.607279%2010.9151%200.561001C10.8688%200.514723%2010.806%200.488724%2010.7406%200.488724H9.58899C9.52355%200.488724%209.46078%200.514723%209.4145%200.561001C9.36823%200.607279%209.34223%200.670045%209.34223%200.735492V2.22865L7.50113%200.7139C7.32444%200.568508%207.10274%200.489014%206.87392%200.489014C6.64511%200.489014%206.4234%200.568508%206.24672%200.7139L1.04134%205.00089C1.01635%205.02154%200.995677%205.04692%200.980499%205.07556C0.965321%205.10421%200.955936%205.13557%200.952881%205.16784C0.949825%205.20011%200.953159%205.23267%200.962691%205.26366C0.972224%205.29464%200.987768%205.32345%201.00844%205.34842L1.53282%205.98591C1.55343%206.01097%201.57878%206.03172%201.60743%206.04698C1.63607%206.06223%201.66744%206.07168%201.69974%206.07479C1.73204%206.07791%201.76463%206.07462%201.79566%206.06512C1.82669%206.05562%201.85554%206.04009%201.88056%206.01943L6.71764%202.03535C6.7622%201.99943%206.81771%201.97984%206.87495%201.97984C6.93219%201.97984%206.9877%201.99943%207.03227%202.03535L11.8696%206.01943C11.8945%206.0401%2011.9233%206.05564%2011.9543%206.06517C11.9853%206.07471%2012.0179%206.07804%2012.0501%206.07498C12.0824%206.07193%2012.1138%206.06254%2012.1424%206.04737C12.1711%206.03219%2012.1964%206.01151%2012.2171%205.98653L12.7415%205.34904C12.7621%205.32392%2012.7776%205.29497%2012.787%205.26385C12.7964%205.23273%2012.7996%205.20005%2012.7964%205.1677C12.7931%205.13534%2012.7835%205.10395%2012.7681%205.07533C12.7527%205.0467%2012.7317%205.0214%2012.7065%205.00089Z'%20fill='white'/%3e%3c/svg%3e",Lr="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%203h20v2H0V3zm0%206h20v2H0V9zm0%206h20v2H0v-2z'%20fill='%23ffffff'%20class='fill-000000'%3e%3c/path%3e%3c/svg%3e",Br="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5243%200.0993558L1.22926%206.0369C0.827235%206.26783%200.878322%206.82739%201.27813%206.99614L3.63922%207.98647L10.0206%202.36424C10.1428%202.25543%2010.316%202.42197%2010.2116%202.54854L4.86086%209.06562V10.8531C4.86086%2011.3771%205.49389%2011.5836%205.80485%2011.2039L7.21528%209.48751L9.98284%2010.6466C10.2982%2010.7798%2010.6581%2010.5822%2010.7158%2010.2425L12.3151%200.650033C12.3906%200.201498%2011.9086%20-0.122691%2011.5243%200.0993558Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Mr="data:image/svg+xml,%3csvg%20width='12'%20height='13'%20viewBox='0%200%2012%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.11462%206.648H2.32425M6.11462%2010.4384V6.648V10.4384ZM6.11462%206.648V2.85764V6.648ZM6.11462%206.648H9.90498H6.11462Z'%20stroke='white'%20stroke-opacity='0.67'%20stroke-width='0.947592'%20stroke-linecap='round'/%3e%3c/svg%3e",Or="data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.9822%208.99957H2.78764V2.99815C2.78764%202.82364%202.63525%202.68229%202.4471%202.68229H1.76602C1.57787%202.68229%201.42548%202.82364%201.42548%202.99815V9.6313C1.42548%209.98013%201.73047%2010.263%202.10656%2010.263H11.9822C12.1704%2010.263%2012.3228%2010.1217%2012.3228%209.94716V9.31543C12.3228%209.14092%2012.1704%208.99957%2011.9822%208.99957ZM11.3012%203.31402H8.78839C8.33335%203.31402%208.1054%203.82433%208.42721%204.12283L9.1168%204.76245L7.55521%206.21108L5.99362%204.76265C5.72757%204.51588%205.29636%204.51588%205.03053%204.76265L3.56854%206.11869C3.43552%206.24208%203.43552%206.44206%203.56854%206.56544L4.04998%207.01199C4.18301%207.13538%204.39861%207.13538%204.53163%207.01199L5.51197%206.1025L7.07356%207.55094C7.33961%207.79771%207.77082%207.79771%208.03665%207.55094L10.0799%205.65575L10.7695%206.29538C11.0913%206.59387%2011.6415%206.38244%2011.6415%205.96036V3.62988C11.6417%203.45537%2011.4893%203.31402%2011.3012%203.31402Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",$r="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5748%209.8894L9.36038%207.67498C9.26043%207.57503%209.12494%207.5195%208.98279%207.5195H8.62076C9.23378%206.73546%209.59803%205.7493%209.59803%204.67652C9.59803%202.1245%207.53021%200.0566711%204.97819%200.0566711C2.42616%200.0566711%200.358337%202.1245%200.358337%204.67652C0.358337%207.22854%202.42616%209.29637%204.97819%209.29637C6.05097%209.29637%207.03713%208.93211%207.82117%208.31909V8.68113C7.82117%208.82328%207.8767%208.95876%207.97665%209.05871L10.1911%2011.2731C10.3998%2011.4819%2010.7374%2011.4819%2010.944%2011.2731L11.5726%2010.6446C11.7814%2010.4358%2011.7814%2010.0982%2011.5748%209.8894ZM4.97819%207.5195C3.40788%207.5195%202.1352%206.24905%202.1352%204.67652C2.1352%203.10622%203.40566%201.83354%204.97819%201.83354C6.54849%201.83354%207.82117%203.10399%207.82117%204.67652C7.82117%206.24682%206.55071%207.5195%204.97819%207.5195Z'%20fill='%238A8587'/%3e%3c/svg%3e",Gr="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.63739%205.75586C8.4319%205.75586%209.88628%204.48328%209.88628%202.91309C9.88628%201.3429%208.4319%200.0703125%206.63739%200.0703125C4.84289%200.0703125%203.38851%201.3429%203.38851%202.91309C3.38851%204.48328%204.84289%205.75586%206.63739%205.75586ZM8.91162%206.46656H8.48774C7.92426%206.69309%207.29732%206.82191%206.63739%206.82191C5.97746%206.82191%205.35307%206.69309%204.78705%206.46656H4.36317C2.47984%206.46656%200.951843%207.80355%200.951843%209.45147V10.3754C0.951843%2010.9639%201.49755%2011.4414%202.17018%2011.4414H11.1046C11.7772%2011.4414%2012.3229%2010.9639%2012.3229%2010.3754V9.45147C12.3229%207.80355%2010.795%206.46656%208.91162%206.46656Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Vr="data:image/svg+xml,%3csvg%20width='13'%20height='12'%20viewBox='0%200%2013%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.7679%203.56526H2.65449C2.46634%203.56526%202.31395%203.42139%202.31395%203.24376C2.31395%203.06613%202.46634%202.92225%202.65449%202.92225H10.8275C11.0156%202.92225%2011.168%202.77838%2011.168%202.60075C11.168%202.06805%2010.7106%201.63623%2010.1464%201.63623H2.31395C1.56156%201.63623%200.951782%202.21193%200.951782%202.92225V9.35234C0.951782%2010.0627%201.56156%2010.6384%202.31395%2010.6384H10.7679C11.3642%2010.6384%2011.8491%2010.2057%2011.8491%209.67384V4.52977C11.8491%203.99789%2011.3642%203.56526%2010.7679%203.56526ZM9.80584%207.74482C9.42976%207.74482%209.12476%207.45687%209.12476%207.10181C9.12476%206.74675%209.42976%206.4588%209.80584%206.4588C10.1819%206.4588%2010.4869%206.74675%2010.4869%207.10181C10.4869%207.45687%2010.1819%207.74482%209.80584%207.74482Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",zr="data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.87413%201.59013C3.86503%201.59013%201.42548%203.75673%201.42548%206.42961C1.42548%207.58271%201.88116%208.64019%202.63908%209.47151C2.37175%2010.6421%201.48294%2011.6872%201.4723%2011.6995C1.44938%2011.7259%201.43405%2011.7591%201.42819%2011.7949C1.42234%2011.8307%201.42622%2011.8676%201.43936%2011.901C1.45249%2011.9345%201.47431%2011.963%201.50211%2011.983C1.52991%2012.003%201.56246%2012.0136%201.59575%2012.0136C3.00601%2012.0136%204.06445%2011.2749%204.58825%2010.8182C5.28402%2011.1046%206.05662%2011.2691%206.87413%2011.2691C9.88323%2011.2691%2012.3228%209.1025%2012.3228%206.42961C12.3228%203.75673%209.88323%201.59013%206.87413%201.59013ZM7.38494%208.62693V9.03549C7.38494%209.24117%207.23255%209.40776%207.0444%209.40776H6.70386C6.51571%209.40776%206.36332%209.24117%206.36332%209.03549V8.62297C6.12026%208.59156%205.88911%208.50222%205.68692%208.35633C5.55453%208.26071%205.54176%208.05131%205.65393%207.92869L6.02682%207.52106C6.10642%207.43404%206.22497%207.42241%206.32714%207.47383C6.39482%207.5078%206.46889%207.52548%206.54551%207.52548H7.24319C7.34237%207.52548%207.42283%207.43753%207.42283%207.32957C7.42283%207.24232%207.36919%207.16484%207.29257%207.14088L6.22689%206.80816C5.75332%206.66042%205.37532%206.23324%205.3136%205.69904C5.2274%204.95287%205.71863%204.31629%206.36332%204.23207V3.82374C6.36332%203.61806%206.51571%203.45147%206.70386%203.45147H7.0444C7.23255%203.45147%207.38494%203.61806%207.38494%203.82374V4.23626C7.628%204.26767%207.85914%204.35701%208.06134%204.50289C8.19373%204.59852%208.20649%204.80792%208.09433%204.93054L7.72144%205.33817C7.64184%205.42519%207.52329%205.43682%207.42112%205.3854C7.3526%205.35115%207.2781%205.33353%207.20275%205.33375H6.50507C6.40589%205.33375%206.32543%205.4217%206.32543%205.52965C6.32543%205.61691%206.37907%205.69438%206.45569%205.71835L7.52137%206.05106C7.99493%206.19904%208.37293%206.62598%208.43466%207.16019C8.52086%207.90612%208.02963%208.5427%207.38494%208.62693Z'%20fill='white'%20fill-opacity='0.4'/%3e%3c/svg%3e",Hr="/assets/person_one-BAZNu8ls.jpg",Wr="/assets/person_two-CVUeIEn0.jpg",qr="/assets/person_three-DjEQL3qL.jpg",Yr="/assets/person_four-Byqtd9Je.jpg",be={alert:Ir,bell:Rr,bills:Dr,budget:Ar,card:Pr,check:Tr,empty_check:_r,gears:Fr,home:Er,menu:Lr,plane:Br,plus:Mr,report:Or,search:$r,user:Gr,wallet:Vr,wealth:zr},Ye={person_one:Hr,person_two:Wr,person_three:qr,person_four:Yr},Ur=[{id:1,title:"Home",image:be.home},{id:2,title:"Budget",image:be.budget},{id:3,title:"Transactions",image:be.plane},{id:4,title:"Subscriptions",image:be.wallet},{id:5,title:"Loans",image:be.bills},{id:6,title:"Reports",image:be.report},{id:7,title:"Savings",image:be.wallet},{id:8,title:"Financial Advice",image:be.wealth},{id:9,title:"Account",image:be.user},{id:10,title:"Settings",image:be.gears}],Zr=[{id:11,name:"Sarah Parker",image:Ye.person_four,date:"23/12/04",amount:22e3},{id:12,name:"Krisitine Carter",image:Ye.person_three,date:"23/07/21",amount:2e4},{id:13,name:"Irene Doe",image:Ye.person_two,date:"23/08/25",amount:3e4}],Qr=[{id:14,month:"Jan",value1:45,value2:null},{id:15,month:"Feb",value1:45,value2:60},{id:16,month:"Mar",value1:45,value2:null},{id:17,month:"Apr",value1:45,value2:null},{id:18,month:"May",value1:45,value2:null}],Kr=[{id:19,title:"Subscriptions",type:"Automated",amount:22e3},{id:20,title:"Loan Payment",type:"Automated",amount:16e3},{id:21,title:"Foodstuff",type:"Automated",amount:2e4},{id:22,title:"Subscriptions",type:null,amount:1e4},{id:23,title:"Subscriptions",type:null,amount:4e4}],Jr=[{id:24,title:"LinkedIn",due_date:"23/12/04",amount:2e4},{id:25,title:"Netflix",due_date:"23/12/10",amount:5e3},{id:26,title:"DSTV",due_date:"23/12/22",amount:2e3}],Xr=[{id:27,image:Ye.person_one,saving_amount:25e4,title:"Pay kid broâ€™s fees",date_taken:"23/12/22",amount_left:4e4}],js=s.createContext({});Ps.node;const en=()=>{const[t]=s.useState(1),[a,h]=s.useState(""),{isSidebarOpen:p}=s.useContext(js);return s.useEffect(()=>{h(p?"sidebar-change":"")},[p]),e.jsxs("div",{className:`sidebar ${a}`,children:[e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"info-img img-fit-cover",children:e.jsx("img",{src:Ye.person_two,alt:"profile image"})}),e.jsx("span",{className:"info-name",children:"alice-doe"})]}),e.jsx("nav",{className:"navigation",children:e.jsx("ul",{className:"nav-list",children:Ur.map(c=>e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:"#",className:`nav-link ${c.id===t?"active":null}`,children:[e.jsx("img",{src:c.image,className:"nav-link-icon",alt:c.title}),e.jsx("span",{className:"nav-link-text",children:c.title})]})},c.id))})})]})},tn=()=>{const{toggleSidebar:t}=s.useContext(js);return e.jsxs("div",{className:"main-content-top",children:[e.jsxs("div",{className:"content-top-left",children:[e.jsx("button",{type:"button",className:"sidebar-toggler",onClick:()=>t(),children:e.jsx("img",{src:be.menu,alt:""})}),e.jsx("h3",{className:"content-top-title",children:"Home"})]}),e.jsxs("div",{className:"content-top-btns",children:[e.jsx("button",{type:"button",className:"search-btn content-top-btn",children:e.jsx("img",{src:be.search,alt:""})}),e.jsxs("button",{className:"notification-btn content-top-btn",children:[e.jsx("img",{src:be.bell}),e.jsx("span",{className:"notification-btn-dot"})]})]})]})},sn=()=>e.jsxs("div",{className:"grid-one-item grid-common grid-c1",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Cards"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsxs("div",{className:"grid-c1-content",children:[e.jsx("p",{children:"Balance"}),e.jsx("div",{className:"lg-value",children:"$ 22,000"}),e.jsxs("div",{className:"card-wrapper",children:[e.jsx("span",{className:"card-pin-hidden",children:"**** **** **** "}),e.jsx("span",{children:"1234"})]}),e.jsxs("div",{className:"card-logo-wrapper",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text text-silver-v1 expiry-text",children:"Expires"}),e.jsx("p",{className:"text text-sm text-white",children:"12/22"})]}),e.jsxs("div",{className:"card-logo",children:[e.jsx("div",{className:"logo-shape1"}),e.jsx("div",{className:"logo-shape2"})]})]})]})]}),an=()=>e.jsxs("div",{className:"grid-one-item grid-common grid-c2",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"All Transactions"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsx("div",{className:"grid-content",children:e.jsx("div",{className:"grid-items",children:Zr.map(t=>e.jsxs("div",{className:"grid-item",children:[e.jsxs("div",{className:"grid-item-l",children:[e.jsx("div",{className:"avatar img-fit-cover",children:e.jsx("img",{src:t.image,alt:""})}),e.jsxs("p",{className:"text",children:[t.name," ",e.jsx("span",{children:t.date})]})]}),e.jsx("div",{className:"grid-item-r",children:e.jsxs("span",{className:"text-scarlet",children:["$ ",t.amount]})})]},t.id))})})]}),rn=()=>e.jsxs("div",{className:"grid-one-item grid-common grid-c3",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Report"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsx("div",{className:"grid-c3-content",children:e.jsxs("div",{className:"grid-chart",children:[e.jsxs("div",{className:"chart-vert-value",children:[e.jsx("span",{children:"100"}),e.jsx("span",{children:"75"}),e.jsx("span",{children:"50"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"0"})]}),Qr.map(t=>e.jsxs("div",{className:"grid-chart-bar",children:[e.jsxs("div",{className:"bar-wrapper",children:[e.jsx("div",{className:"bar-item1",style:{height:`${t.value1!==null?"40%":""}`}}),e.jsx("div",{className:"bar-item2",style:{height:`${t.value2!==null?"60%":""}`}})]}),e.jsx("span",{className:"grid-hortz-value",children:"Jan"})]},t.id))]})})]}),nn=()=>e.jsxs("div",{className:"grid-two-item grid-common grid-c4",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Budget"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsxs("div",{className:"grid-c-top text-silver-v1",children:[e.jsx("h2",{className:"lg-value",children:"Cash"}),e.jsx("span",{className:"lg-value",children:"$ 100,000"})]}),e.jsx("div",{className:"grid-c4-content bg-jet",children:e.jsx("div",{className:"grid-items",children:Kr.map(t=>e.jsxs("div",{className:"grid-item",children:[e.jsxs("div",{className:"grid-item-l",children:[e.jsx("div",{className:"icon",children:e.jsx("img",{src:be.check})}),e.jsxs("p",{className:"text text-silver-v1",children:[t.title," ",e.jsx("span",{children:t.type})]})]}),e.jsx("div",{className:"grid-item-r",children:e.jsxs("span",{className:"text-silver-v1",children:["$ ",t.amount]})})]},t.id))})})]}),on=()=>e.jsxs("div",{className:"subgrid-two-item grid-common grid-c5",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Subscriptions"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsx("div",{className:"grid-c5-content",children:e.jsx("div",{className:"grid-items",children:Jr.map(t=>e.jsxs("div",{className:"grid-item",children:[e.jsxs("div",{className:"grid-item-l",children:[e.jsx("div",{className:"icon",children:e.jsx("img",{src:be.alert})}),e.jsxs("p",{className:"text text-silver-v1",children:[t.title," ",e.jsxs("span",{children:["due ",t.due_date]})]})]}),e.jsx("div",{className:"grid-item-r",children:e.jsxs("span",{className:"text-silver-v1",children:["$ ",t.amount]})})]},t.id))})})]}),ln=()=>e.jsxs("div",{className:"subgrid-two-item grid-common grid-c6",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Savings"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsx("div",{className:"grid-c6-content",children:e.jsx("div",{className:"grid-items",children:Xr.map(t=>e.jsxs("div",{className:"grid-item",children:[e.jsxs("div",{className:"grid-item-top",children:[e.jsxs("div",{className:"grid-item-top-l",children:[e.jsx("div",{className:"avatar img-fit-cover",children:e.jsx("img",{src:Ye.person_one})}),e.jsx("p",{className:"text text-silver-v1",children:t.title})]}),e.jsx("div",{className:"grid-item-top-r",children:e.jsxs("span",{className:"text-silver-v1",children:["$ ",t.saving_amount]})})]}),e.jsxs("div",{className:"grid-item-bottom",children:[e.jsxs("div",{className:"grid-item-badges",children:[e.jsxs("span",{className:"grid-item-badge",children:["Date taken ",t.date_taken]}),e.jsxs("span",{className:"grid-item-badge",children:["Amount left $ ",t.amount_left]})]}),e.jsx("div",{className:"grid-item-progress",children:e.jsx("div",{className:"grid-item-fill"})})]})]},t.id))})})]}),cn=()=>e.jsxs("div",{className:"subgrid-two-item grid-common grid-c7",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Loans"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsxs("div",{className:"grid-c7-content",children:[e.jsx("div",{className:"progress-bar",children:e.jsxs("div",{className:"percent",children:[e.jsx("svg",{children:e.jsx("circle",{cx:"105",cy:"105",r:"50"})}),e.jsx("div",{className:"number",children:e.jsxs("h3",{children:["50",e.jsx("span",{children:"%"})]})})]})}),e.jsxs("ul",{className:"data-list",children:[e.jsxs("li",{className:"data-item text-silver-v1",children:[e.jsx("span",{className:"data-item-text",children:"Savings Target"}),e.jsx("span",{className:"data-item-value",children:"$ 500,000"})]}),e.jsxs("li",{className:"data-item text-silver-v1",children:[e.jsx("span",{className:"data-item-text",children:"Target Reached"}),e.jsx("span",{className:"data-item-value",children:"$ 250,000"})]})]})]})]}),dn=()=>e.jsxs("div",{className:"subgrid-two-item grid-common grid-c8",children:[e.jsxs("div",{className:"grid-c-title",children:[e.jsx("h3",{className:"grid-c-title-text",children:"Financial Advice"}),e.jsx("button",{className:"grid-c-title-icon",children:e.jsx("img",{src:be.plus})})]}),e.jsx("div",{className:"grid-c8-content",children:e.jsx("p",{className:"text text-silver-v1",children:"Ipsum dolor sit amet consectetur, adipisicing elit. Iste, vitae....."})})]}),hn=()=>e.jsxs("div",{className:"main-content-holder",children:[e.jsxs("div",{className:"content-grid-one",children:[e.jsx(sn,{}),e.jsx(an,{}),e.jsx(rn,{})]}),e.jsxs("div",{className:"content-grid-two",children:[e.jsx(nn,{}),e.jsx("div",{className:"grid-two-item",children:e.jsxs("div",{className:"subgrid-two",children:[e.jsx(on,{}),e.jsx(ln,{})]})}),e.jsx("div",{className:"grid-two-item",children:e.jsxs("div",{className:"subgrid-two",children:[e.jsx(cn,{}),e.jsx(dn,{})]})})]})]}),mn=()=>e.jsxs("div",{className:"main-content",children:[e.jsx(tn,{}),e.jsx(hn,{})]});function un(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"app",children:[e.jsx(en,{}),e.jsx(mn,{})]})})}const Pe=()=>{const t=new Date().getFullYear();return e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section company-info",children:[e.jsx("div",{className:"logo-container",children:e.jsx("img",{src:"/logo1.png",alt:"IntelliStay Logo",className:"footer-logo"})}),e.jsx("p",{className:"company-description",children:"Experience luxury dining with our innovative restaurant management system. Making reservations simpler and dining experiences better."}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"contact-item",children:[e.jsx(Ts,{className:"contact-icon"}),e.jsx("span",{children:"+1 234 567 8900"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(_s,{className:"contact-icon"}),e.jsx("span",{children:"intellistay@info.com"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(rt,{className:"contact-icon"}),e.jsx("span",{children:"123 Dining Street, Foodie City, FC 12345"})]})]})]}),e.jsxs("div",{className:"footer-section quick-links",children:[e.jsx("h3",{children:"Quick Links"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(Ae,{to:"/",children:"Home"})}),e.jsx("li",{children:e.jsx(Ae,{to:"/restaurant/menu",children:"Menu"})}),e.jsx("li",{children:e.jsx(Ae,{to:"/reservations",children:"Reservations"})}),e.jsx("li",{children:e.jsx(Ae,{to:"/about",children:"About Us"})}),e.jsx("li",{children:e.jsx(Ae,{to:"/contact",children:"Contact"})})]})]}),e.jsxs("div",{className:"footer-section services",children:[e.jsx("h3",{children:"Our Services"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(Ae,{to:"/table-booking",children:"Table Booking"})}),e.jsx("li",{children:e.jsx(Ae,{to:"/online-order",children:"Online Order"})})]})]}),e.jsxs("div",{className:"footer-section newsletter",children:[e.jsx("h3",{children:"Stay Connected"}),e.jsx("p",{children:"Subscribe to our newsletter for updates and special offers"}),e.jsxs("div",{className:"newsletter-form",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"newsletter-input"}),e.jsx("button",{className:"subscribe-btn",children:"Subscribe"})]}),e.jsxs("div",{className:"social-links",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Fs,{className:"social-icon"})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Es,{className:"social-icon"})}),e.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Ls,{className:"social-icon"})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Bs,{className:"social-icon"})})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsxs("div",{className:"footer-bottom-content",children:[e.jsxs("p",{children:["Â© ",t," INTELLISTAY Pvt LTD. All rights reserved."]}),e.jsxs("div",{className:"footer-bottom-links",children:[e.jsx(Ae,{to:"/privacy-policy",children:"Privacy Policy"}),e.jsx(Ae,{to:"/terms",children:"Terms of Service"}),e.jsx(Ae,{to:"/cookies",children:"Cookie Policy"})]})]})})]})},xn=async(t,a)=>{try{return(await te.get("http://localhost:3001/user/recommendations",{params:{userId:t,adults:a.adults,children:a.children,checkIn:a.checkIn,checkOut:a.checkOut}})).data}catch(h){return console.error("Error fetching recommendations:",h),null}};function pn(){const t=Se(),[a,h]=s.useState([]),g=(Ue().state||{}).data||{},[o,N]=s.useState();s.useRef(null);const[u,x]=s.useState("all"),[d,f]=s.useState([0,1e4]),[j,n]=s.useState([]),[_,m]=s.useState([]),[k,L]=s.useState(null),C=()=>{te.post("http://localhost:3001/user/checkrooms",{searchdata:g}).then(A=>{if(A.status===200){const{availableRooms:F,roomsNeeded:K,roomsAvailable:R,message:I}=A.data;console.log(A.data),F.length<K?(console.log(I),console.log(`Rooms needed: ${K}, Rooms available: ${R}`)):(console.log(I),N(K),h(F))}}).catch(A=>{console.error("Error",A)})},H=async()=>{const A=localStorage.getItem("userId");if(!A)return;const F=await xn(A,g);F&&(m(F.recommendedRooms),L(F.userPreferences),console.log("userPreferences",F.userPreferences))};s.useEffect(()=>{C(),H()},[g]);const b=A=>{const F={};return A.forEach(K=>{F[K.roomtype]||(F[K.roomtype]=[]),F[K.roomtype].push(K)}),F},z=b(a),ce=A=>{const F=z[A];if(!F||F.length===0)return null;const K=g.adults,R=g.children,I=F[0],M=Math.ceil(K/I.allowedAdults),X=Math.ceil(R/I.allowedChildren),U=Math.max(M,X);if(F.length<U)return null;const S=[],l=[...F];for(let i=0;i<U;i++){const v=Math.floor(Math.random()*l.length);S.push(l.splice(v,1)[0])}return{rooms:S,count:U,distribution:{adults:Math.ceil(K/U),children:Math.ceil(R/U)}}},de=A=>{const F=ce(A);if(!F){P.fire({icon:"error",title:"Not Enough Rooms",text:`We don't have enough ${A} rooms to accommodate your group. Please try a different room type or adjust your group size.`,showConfirmButton:!0});return}P.fire({icon:"info",title:"Room Allocation",html:`
        <div class="room-allocation-info">
          <p>Based on your group size, you need ${F.count} ${A} room(s):</p>
          <ul>
            <li>Adults per room: ${F.distribution.adults}</li>
            <li>Children per room: ${F.distribution.children}</li>
          </ul>
          <p>Total: ${F.count} room(s) for ${g.adults} adults and ${g.children} children</p>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Proceed with Booking",cancelButtonText:"Cancel",customClass:{container:"room-allocation-container"}}).then(K=>{K.isConfirmed&&t("/roominfo",{state:{data:g,roomdata:F.rooms[0],allocation:{totalRooms:F.count,rooms:F.rooms,distribution:F.distribution}}})})},re=()=>["all",...[...new Set(a.map(F=>F.roomtype))]],xe=(A,F)=>{f(F)},le=A=>{x(A.target.value)};s.useEffect(()=>{let A=[...a];u!=="all"&&(A=A.filter(F=>F.roomtype===u)),A=A.filter(F=>F.rate>=d[0]&&F.rate<=d[1]),n(A)},[a,u,d]);const fe=A=>_.some(F=>F.roomtype===A.roomtype),O=({preferences:A})=>A?e.jsxs(J,{sx:{padding:"15px",backgroundColor:"#f8f4ff",borderRadius:"8px",marginBottom:"20px",border:"1px solid #e0d4ff"},children:[e.jsx(r,{variant:"h6",sx:{color:"#5c2db0",marginBottom:"10px"},children:"Personalized Recommendations"}),e.jsxs(r,{variant:"body2",children:["Based on your previous stays, we noticed you prefer:",e.jsxs("ul",{children:[A.preferredRoomTypes&&e.jsxs("li",{children:["Room types similar to: ",A.preferredRoomTypes.join(", ")]}),A.averageStayDuration&&e.jsxs("li",{children:["Average stay duration: ",A.averageStayDuration," nights"]}),A.preferredAmenities&&e.jsxs("li",{children:["Amenities you enjoy: ",A.preferredAmenities.join(", ")]})]})]})]}):null,ne=({room:A,isRecommended:F})=>(console.log("isRecommended",F),e.jsxs("div",{className:`room__card ${F?"recommended":""}`,children:[e.jsxs("div",{className:"room__card__image",children:[e.jsx("img",{src:A.images.length>0?`http://localhost:3001/uploads/${A.images[0]}`:fs,alt:"room"}),F&&e.jsx("div",{className:"recommendation-badge",children:e.jsx("span",{children:"âœ¨ Recommended for You"})}),e.jsxs("div",{className:"room__card__icons",children:[e.jsx("span",{children:e.jsx("i",{className:"ri-heart-fill"})}),e.jsx("span",{children:e.jsx("i",{className:"ri-paint-fill"})}),e.jsx("span",{children:e.jsx("i",{className:"ri-shield-star-line"})})]})]}),e.jsxs("div",{className:"room__card__details",children:[e.jsx("h4",{children:A.roomtype}),F&&e.jsx("div",{className:"recommendation-reason",children:e.jsx("p",{style:{color:"#5c2db0",fontSize:"0.9em",marginTop:"5px",fontStyle:"italic"},children:"Matches your preferred room type"})}),e.jsxs("div",{className:"room__capacity",children:[e.jsx("p",{children:"Capacity per room:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Adults: ",A.allowedAdults]}),e.jsxs("li",{children:["Children: ",A.allowedChildren]})]})]}),e.jsxs("h5",{children:["Starting from ",e.jsxs("span",{children:["â‚¹",A.rate,"/night"]})]}),e.jsx("button",{className:`btn ${F?"btn-recommended":""}`,id:"details",onClick:()=>de(A.roomtype),children:F?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"star-icon",children:"â˜…"}),"Book Recommended Room"]}):"See Details"})]})]})),ie=()=>e.jsxs(J,{sx:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"8px",margin:"20px 0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Filter Rooms"}),e.jsxs(J,{sx:{display:"flex",gap:"20px",flexWrap:"wrap"},children:[e.jsxs(as,{sx:{minWidth:200},children:[e.jsx(rs,{children:"Room Type"}),e.jsx(ns,{value:u,onChange:le,label:"Room Type",children:re().map(A=>e.jsx(Je,{value:A,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]}),e.jsxs(J,{sx:{width:300},children:[e.jsx(r,{gutterBottom:!0,children:"Price Range (â‚¹)"}),e.jsx(Ms,{value:d,onChange:xe,valueLabelDisplay:"auto",min:0,max:1e4,step:500}),e.jsxs(J,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{variant:"body2",children:["â‚¹",d[0]]}),e.jsxs(r,{variant:"body2",children:["â‚¹",d[1]]})]})]})]})]});return e.jsxs("div",{id:"room-page",children:[e.jsx("div",{className:"room_nav",children:e.jsx(ke,{})}),e.jsx(gs,{searchdata:g}),e.jsxs("section",{className:"section__container room__container",children:[e.jsx("p",{className:"section__subheader",style:{color:"red"},children:`You need to book ${o} rooms for ${g.adults} adults and ${g.children} child`}),e.jsx("p",{className:"section__subheader",children:"OUR LIVING ROOM"}),e.jsx("h2",{className:"section__header",children:"The Most Memorable Rest Time Starts Here."}),k&&e.jsx(O,{preferences:k}),e.jsx(ie,{}),e.jsxs(r,{variant:"body1",sx:{margin:"20px 0"},children:["Showing ",j.length," room",j.length!==1?"s":""]}),e.jsx("div",{className:"room__grid",children:Object.keys(b(j)).map(A=>{const K=b(j)[A][0];return e.jsx(ne,{room:K,isRecommended:fe(K)},K._id)})}),j.length===0&&e.jsx(r,{variant:"h6",sx:{textAlign:"center",margin:"40px 0",color:"#666"},children:"No rooms found matching your criteria"})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})}const gn=()=>{const[t,a]=s.useState(0),[h,p]=s.useState(!1),c=Se(),o=Ue().state||{},N=o.data||{},u=o.roomdata||{},x=o.allocation||{};console.log("allocation",x),console.log("roomdatas",u);const d=s.useMemo(()=>{try{const k=new Date(N.checkOutDate),L=new Date(N.checkInDate);if(isNaN(L.getTime())||isNaN(k.getTime()))return console.error("Invalid date(s)"),{differenceInDays:0,totalRate:0};const C=k.getTime()-L.getTime(),H=Math.ceil(C/(1e3*3600*24)),b=parseFloat(u.rate)||0;return{differenceInDays:H,totalRate:b*H}}catch(k){return console.error("Error calculating dates:",k),{differenceInDays:0,totalRate:0}}},[N.checkInDate,N.checkOutDate,u.rate]),f=s.useMemo(()=>{try{console.log("roomdatas innn",u);const{allowedAdults:k,allowedChildren:L}=u,C=parseInt(N.adults)||0,H=parseInt(N.children)||0;let b,z;C<=k&&H<=L?(b=1,z=1):(b=Math.ceil(C/k),z=Math.ceil(H/L));const ce=Math.max(b,z),de=ce*d.totalRate;return{totalRooms:ce,totalRate:de,breakdown:{adults:{requested:C,allowed:k,roomsNeeded:b,withinCapacity:C<=k},children:{requested:H,allowed:L,roomsNeeded:z,withinCapacity:H<=L}}}}catch(k){return console.error("Error calculating rooms:",k),{totalRooms:0,totalRate:0,breakdown:{adults:{requested:0,allowed:0,roomsNeeded:0,withinCapacity:!1},children:{requested:0,allowed:0,roomsNeeded:0,withinCapacity:!1}}}}},[N.adults,N.children,u.allowedAdults,u.allowedChildren,d.totalRate]),j=()=>{localStorage.getItem("userId")?c("/guestdetails",{state:{data:N,roomdata:u,totalRate:f.totalRate,totalDays:d.differenceInDays,requiredRooms:f.totalRooms}}):c("/signup")},n=s.useMemo(()=>(u.images||[]).map(k=>({src:`http://localhost:3001/uploads/${k}`})),[u.images]),_=k=>{a(k),p(!0)},m=k=>{const L=n.length;let C;k==="l"?C=t===0?L-1:t-1:C=t===L-1?0:t+1,a(C)};return e.jsxs("div",{children:[e.jsx("div",{className:"room_nav",children:e.jsx(ke,{})}),e.jsxs("div",{className:"hotelContainer",children:[h&&e.jsxs("div",{className:"slider",children:[e.jsx(tt,{className:"close",onClick:()=>p(!1),style:{cursor:"pointer"}}),e.jsx(We,{icon:is,className:"arrow",onClick:()=>m("l")}),e.jsx("div",{className:"sliderWrapper",children:e.jsx("img",{src:n[t].src,alt:"",className:"sliderImg"})}),e.jsx(We,{icon:os,className:"arrow",onClick:()=>m("r")})]}),e.jsxs("div",{className:"hotelWrapper",children:[e.jsxs("button",{className:"bookNow",onClick:j,children:["Reserve or Book Now! â‚¹",f.totalRate.toLocaleString(),"(",d.differenceInDays," nights, ",f.totalRooms," ",f.totalRooms>1?"rooms":"room",")"]}),e.jsx("h1",{className:"hotelTitle",children:u.roomtype}),e.jsxs("div",{className:"hotelAddress",children:[e.jsx(We,{icon:ls}),e.jsx("span",{children:"Kochi"})]}),e.jsx("div",{className:"hotelImages",children:n.map((k,L)=>e.jsx("div",{className:"hotelImgWrapper",children:e.jsx("img",{onClick:()=>_(L),src:k.src,alt:"",className:"hotelImg"})},L))}),e.jsxs("div",{className:"hotelDetails",style:{marginBottom:"100px"},children:[e.jsxs("div",{className:"hotelDetailsTexts",children:[e.jsx("h1",{className:"hotelTitle",children:"Stay in the heart of City"}),e.jsx("p",{className:"hotelDesc",children:u.description}),e.jsxs("div",{className:"amenities-section",children:[e.jsx("h3",{children:"In-Room Amenities"}),e.jsx("div",{className:"amenities-grid",children:u.amenities&&typeof u.amenities=="string"?u.amenities.split(",").map((k,L)=>k.trim()&&e.jsxs("div",{className:"amenity-item",children:[e.jsx("span",{className:"amenity-icon",children:"â€¢"}),e.jsx("span",{className:"amenity-text",children:k.trim()})]},L)):e.jsx("div",{className:"amenity-item",children:e.jsx("span",{className:"amenity-text",children:"No amenities listed"})})})]})]}),e.jsxs("div",{className:"hotelDetailsPrice",children:[e.jsxs("h1",{children:["Perfect for a ",d.differenceInDays,"-night stay!"]}),e.jsx("span",{children:"Located in the real heart of Kochi, this property has an excellent location score of 9.8!"}),e.jsxs("h2",{children:[e.jsxs("b",{children:["â‚¹",f.totalRate.toLocaleString()]}),"(",d.differenceInDays," nights, ",f.totalRooms," ",f.totalRooms>1?"rooms":"room",")"]}),e.jsx("button",{onClick:j,children:"Reserve or Book Now!"})]})]})]})]}),e.jsx("div",{}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},fn=()=>e.jsxs("div",{className:"searchItem",children:[e.jsx("img",{src:"https://cf.bstatic.com/xdata/images/hotel/square600/261707778.webp?k=fa6b6128468ec15e81f7d076b6f2473fa3a80c255582f155cae35f9edbffdd78&o=&s=1",alt:"",className:"siImg"}),e.jsxs("div",{className:"siDesc",children:[e.jsx("h1",{className:"siTitle",children:"Tower Street Apartments"}),e.jsx("span",{className:"siDistance",children:"500m from center"}),e.jsx("span",{className:"siTaxiOp",children:"Free airport taxi"}),e.jsx("span",{className:"siSubtitle",children:"Studio Apartment with Air conditioning"}),e.jsx("span",{className:"siFeatures",children:"Entire studio â€¢ 1 bathroom â€¢ 21mÂ² 1 full bed"}),e.jsx("span",{className:"siCancelOp",children:"Free cancellation "}),e.jsx("span",{className:"siCancelOpSubtitle",children:"You can cancel later, so lock in this great price today!"})]}),e.jsxs("div",{className:"siDetails",children:[e.jsxs("div",{className:"siRating",children:[e.jsx("span",{children:"Excellent"}),e.jsx("button",{children:"8.9"})]}),e.jsxs("div",{className:"siDetailTexts",children:[e.jsx("span",{className:"siPrice",children:"$112"}),e.jsx("span",{className:"siTaxOp",children:"Includes taxes and fees"}),e.jsx("button",{className:"siCheckButton",children:"See availability"})]})]})]}),jn=()=>{const t=Ue(),{destination:a="mumbai",date:h=[{startDate:new Date,endDate:new Date}],options:p={}}=t.state||{},[c,g]=s.useState(a),[o,N]=s.useState(h),[u,x]=s.useState(!1),[d,f]=s.useState(p);return e.jsx("div",{children:e.jsx("div",{className:"listContainer",children:e.jsxs("div",{className:"listWrapper",children:[e.jsxs("div",{className:"listSearch",children:[e.jsx("h1",{className:"lsTitle",children:"Search"}),e.jsxs("div",{className:"lsItem",children:[e.jsx("label",{htmlFor:"destination",children:"Destination"}),e.jsx("input",{id:"destination",placeholder:c,type:"text",onChange:j=>g(j.target.value)})]}),e.jsxs("div",{className:"lsItem",children:[e.jsx("label",{htmlFor:"date",children:"Check-in Date"}),e.jsx("span",{onClick:()=>x(!u),children:`${vt(o[0].startDate,"MM/dd/yyyy")} to ${vt(o[0].endDate,"MM/dd/yyyy")}`}),u&&e.jsx(Os.DateRange,{onChange:j=>N([j.selection]),minDate:new Date,ranges:o})]}),e.jsxs("div",{className:"lsItem",children:[e.jsx("label",{htmlFor:"options",children:"Options"}),e.jsxs("div",{className:"lsOptions",children:[e.jsxs("div",{className:"lsOptionItem",children:[e.jsxs("span",{className:"lsOptionText",children:["Min price ",e.jsx("small",{children:"per night"})]}),e.jsx("input",{type:"number",className:"lsOptionInput",placeholder:"Min price"})]}),e.jsxs("div",{className:"lsOptionItem",children:[e.jsxs("span",{className:"lsOptionText",children:["Max price ",e.jsx("small",{children:"per night"})]}),e.jsx("input",{type:"number",className:"lsOptionInput",placeholder:"Max price"})]}),e.jsxs("div",{className:"lsOptionItem",children:[e.jsx("span",{className:"lsOptionText",children:"Adult"}),e.jsx("input",{type:"number",min:1,className:"lsOptionInput",placeholder:d.adult||"1"})]}),e.jsxs("div",{className:"lsOptionItem",children:[e.jsx("span",{className:"lsOptionText",children:"Children"}),e.jsx("input",{type:"number",min:0,className:"lsOptionInput",placeholder:d.children||"0"})]}),e.jsxs("div",{className:"lsOptionItem",children:[e.jsx("span",{className:"lsOptionText",children:"Room"}),e.jsx("input",{type:"number",min:1,className:"lsOptionInput",placeholder:d.room||"1"})]})]})]}),e.jsx("button",{children:"Search"})]}),e.jsx("div",{className:"listResult",children:[...Array(9).keys()].map(j=>e.jsx(fn,{},j))})]})})})},Me=()=>{const t=Se();s.useEffect(()=>{localStorage.getItem("userId")||(t("/"),P.fire("Session expired. Please log in again."))},[t])};function vn(){Me();const t=Se(),[a,h]=s.useState([]),[p,c]=s.useState(3),[g,o]=s.useState(!0),[N,u]=s.useState(null),[x,d]=s.useState(""),[f,j]=s.useState([]);s.useEffect(()=>{(async()=>{try{const k=localStorage.getItem("userId");if(!k){u("No user found"),o(!1);return}const L=await te.get(`http://localhost:3001/user/my-bookings/${k}`);L.status===200?(h(L.data),j(L.data)):u("Failed to fetch bookings")}catch{u("An error occurred while fetching bookings")}finally{o(!1)}})()},[]),s.useEffect(()=>{(()=>{let k=a;x&&(k=a.filter(L=>{const C=new Date(L.check_in).toLocaleDateString("en-GB"),H=new Date(L.check_out).toLocaleDateString("en-GB"),b=x.toLowerCase();return C.includes(b)||H.includes(b)||L.status.toLowerCase().includes(b)||L._id.toLowerCase().includes(b)||L.room_id.roomtype.toLowerCase().includes(b)})),j(k)})()},[x,a]);const n=m=>{d(m.target.value)},_=m=>{t(`/booking-details/${m._id}`)};return g?e.jsx("div",{children:"Loading..."}):N?e.jsx("div",{children:N}):e.jsxs("div",{children:[e.jsx("div",{className:"MyBookingsnav",children:e.jsx(ke,{})}),e.jsxs("div",{className:"bookings-container",children:[e.jsx("h2",{children:"My Bookings"}),e.jsx("br",{}),e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"Search by check-in date, check-out date, status, etc.",value:x,onChange:n})}),f.length===0?e.jsx("p",{children:"No bookings found."}):e.jsx("ul",{className:"bookings-list",children:f.slice(0,p).map(m=>{var k;return e.jsx("li",{onClick:()=>_(m),children:e.jsxs("div",{className:x?"filtered-booking":"booking-card",style:{display:"flex",alignItems:"center"},children:[m.room_id&&m.room_id.images&&m.room_id.images.length>0&&e.jsx("img",{src:`http://localhost:3001/uploads/${m.room_id.images[0]}`,alt:"Room Thumbnail",style:{width:"100px",height:"100px",objectFit:"cover",marginRight:"10px"}}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"BookingId:"})," ",m._id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Room:"})," ",((k=m.room_id)==null?void 0:k.roomtype)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Check-In Date:"})," ",new Date(m.check_in).toLocaleDateString("en-GB")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Check-Out Date:"})," ",new Date(m.check_out).toLocaleDateString("en-GB")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",m.status]})]})]})},m._id)})}),e.jsxs("div",{className:"buttons-container",children:[p<f.length&&e.jsx("button",{className:"see-more-button",onClick:()=>c(p+3),children:"See More"}),p>3&&e.jsx("button",{className:"see-less-button",onClick:()=>c(3),children:"Show Less"})]})]})]})}let Ee=null;const yn=async()=>(Ee||(Ee=await sr.createWorker(),await Ee.loadLanguage("eng"),await Ee.initialize("eng")),Ee),bn=async()=>{Ee&&(await Ee.terminate(),Ee=null)},wn=async(t,a,h)=>{let p=null;try{p=await yn();const c=await Nn(t),{data:{text:g}}=await p.recognize(c);return Cn(g,a,h)}catch(c){return console.error("OCR Error:",c),{isValid:!1,error:"Failed to verify document. Please ensure the image is clear."}}finally{p&&await bn()}},Nn=async t=>new Promise((a,h)=>{const p=new FileReader;p.onload=c=>{const g=new Image;g.onload=()=>a(g),g.onerror=h,g.src=c.target.result},p.onerror=h,p.readAsDataURL(t)}),Cn=(t,a,h)=>{const p=t.toLowerCase().replace(/\s/g,"");switch(a){case"aadhar":return Sn(p,h);case"passport":return kn(p,h);case"drivingLicense":return Rn(p,h);case"panCard":return In(p,h);default:return{isValid:!1,error:"Unsupported document type"}}},Sn=(t,a)=>{const h=/\d{12}/,p=t.includes(a),c=h.test(a);return{isValid:p&&c,error:p?c?null:"Invalid Aadhar number format":"Aadhar number not found in document"}},kn=(t,a)=>{const h=/[A-Z]{1}[0-9]{7}/,p=t.includes(a.toLowerCase()),c=h.test(a);return{isValid:p&&c,error:p?c?null:"Invalid passport number format":"Passport number not found in document"}},In=(t,a)=>{const h=/[A-Z]{5}[0-9]{4}[A-Z]{1}/,p=t.includes(a.toLowerCase()),c=h.test(a);return{isValid:p&&c,error:p?c?null:"Invalid PAN number format":"PAN number not found in document"}},Rn=(t,a)=>{const h=/^(([A-Z]{2}[0-9]{2})( )|([A-Z]{2}-[0-9]{2}))((19|20)[0-9][0-9])[0-9]{7}$/,p=t.includes(a.toLowerCase()),c=h.test(a);return{isValid:p&&c,error:p?c?null:"Invalid driving license number format":"Driving license number not found in document"}},Dn=[{label:"Aadhar",value:"aadhar"},{label:"Driving License",value:"drivingLicense"},{label:"Passport",value:"passport"}],An=()=>{const t=Se(),h=Ue().state||{},p=h.data||{},c=p.adults||0,g=p.children||0,o=h.roomdata||{},N=h.totalRate||{};console.log("totlrates",N);const u=h.totalDays||{};console.log("totldays",u);const[x,d]=s.useState(null),f=new Date,j=new Date(f.setFullYear(f.getFullYear()-18)).toISOString().split("T")[0],n=new Date,_=new Date(n);_.setDate(n.getDate()-1);const m=new Date(_);m.setFullYear(_.getFullYear()-5);const k=_.toISOString().split("T")[0],L=m.toISOString().split("T")[0],[C,H]=s.useState(Array.from({length:c},()=>({_id:"",name:"",email:"",phone:"",address:"",dob:"",proofType:"",proofNumber:"",proofDocument:null,errors:{},saveDetails:!1}))),[b,z]=s.useState(Array.from({length:g},()=>({_id:"",name:"",email:"",phone:"",address:"",dob:"",proofType:"",proofNumber:"",proofDocument:null,saveDetails:!1,errors:{}}))),ce=/^[A-Za-z\s]+$/,de=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,re=/^\d{4}-\d{2}-\d{2}$/,xe=/^[A-Za-z0-9]+$/,[le,fe]=s.useState(null),[O,ne]=s.useState([]),[ie,A]=s.useState({adults:[],children:[]}),F=localStorage.getItem("userId"),[K,R]=s.useState([]),[I,M]=s.useState(!1),[X,U]=s.useState({});s.useEffect(()=>{(async()=>{try{const G=await te.get(`http://localhost:3001/user/previousGuestDetails/${F}`);console.log(G.data),R(G.data||[])}catch(G){console.error("Failed to fetch previous guest:",G),R([])}})()},[]);const S=(W,G)=>{switch(W){case"name":return ce.test(G)?"":"Invalid name format (letters only)";case"email":return de.test(G)?"":"Invalid email format";case"phone":return(Z=>{const je=/^[0-9]{10}$/,ye=/^(\d)\1{9}$/.test(Z);return je.test(Z)?ye?"Phone number cannot consist of repeating digits.":"":"Phone number must be exactly 10 digits."})(G);case"dob":const $=G.split("T")[0];return re.test($)?"":"Invalid date of birth (YYYY-MM-DD)";case"proofNumber":return xe.test(G)?"":"Invalid proof number format";default:return""}},l=()=>{let W=!0;const G=[...C];return[...b],G.forEach((ae,$)=>{ae._id||!X[`adult_${$}`]&&ae.proofType&&ae.proofNumber&&(W=!1);const Z={};ae.name||(Z.name="Name is required"),ae.email||(Z.email="Email is required"),ae.phone||(Z.phone="Phone is required"),ae.dob||(Z.dob="Date of Birth is required"),ae.proofType||(Z.proofType="Proof type is required"),ae.proofNumber||(Z.proofNumber="Proof number is required"),G[$].errors=Z,Object.keys(Z).length>0&&(W=!1)}),H(G),W},i=(W,G,ae)=>{ae==="adult"?H($=>{const Z=[...$];return Z[W]={...Z[W],saveDetails:G},Z}):ae==="child"&&z($=>{const Z=[...$];return Z[W]={...Z[W],saveDetails:G},Z})},v=(W,G,ae)=>{const{name:$,value:Z}=W.target,je=S($,Z);if(ae==="adult"){const ye=[...C];ye[G]={...ye[G],[$]:Z,errors:{...ye[G].errors,[$]:je}},H(ye),A(he=>({...he,adults:ye.map(Re=>({...Re,errors:void 0}))}))}else{const ye=[...b];ye[G]={...ye[G],[$]:Z,errors:{...ye[G].errors,[$]:je}},z(ye),A(he=>({...he,children:ye.map(Re=>({...Re,errors:void 0}))}))}},T=W=>{if(W.preventDefault(),l()){const G={selectedGuestIds:O,newGuestDetails:{adults:C.filter(ae=>!O.includes(ae._id)),children:b.filter(ae=>!O.includes(ae._id))}};t("/reserveroom",{state:{...h,guestData:G,adults:C,children:b,totldays:u,selectedGuestIds:O,totlrates:N}})}else C.filter((ae,$)=>!X[`adult_${$}`]&&C[$].proofType&&C[$].proofNumber).length>0?P.fire({icon:"error",title:"Document Verification Required",text:"Please verify all required documents before proceeding.",confirmButtonText:"OK"}):P.fire({icon:"error",title:"Validation Error",text:"Please fix all validation errors before submitting.",confirmButtonText:"OK"})},V=async(W,G,ae)=>{const $=ae==="adult"?C[G]:b[G];if($._id){U(Z=>({...Z,[`${ae}_${G}`]:!0}));return}try{M(!0);const Z=W.target.files[0];if(!Z)return;const je=URL.createObjectURL(Z);d(je);const ye=await wn(Z,$.proofType,$.proofNumber);U(he=>({...he,[`${ae}_${G}`]:ye.isValid})),ye.isValid?(P.fire({icon:"success",title:"Document Verified",text:"The document has been successfully verified."}),ee(Z,ae,G)):P.fire({icon:"error",title:"Document Verification Failed",text:ye.error,confirmButtonText:"Try Again"}).then(()=>{W.target.value="",d(null)})}catch(Z){console.error("Error handling file upload:",Z),U(je=>({...je,[`${ae}_${G}`]:!1})),P.fire({icon:"error",title:"Upload Error",text:"There was an error processing your document. Please try again."})}finally{M(!1)}},ee=(W,G,ae)=>{if(G==="adult"){const $=[...C];$[ae].proofDocument=W,H($)}else{const $=[...b];$[ae].proofDocument=W,z($)}},ue=W=>{if(ne(G=>G.includes(W._id)?G.filter(ae=>ae!==W._id):[...G,W._id]),W.role==="adult")if(C.length>=o.allowedAdults){P.fire(`Maximum allowed adults (${allowedAdults}) reached.`);return}else H(G=>{const ae=G.findIndex($=>$._id===W._id);return ae!==-1?G.filter(($,Z)=>Z!==ae):[...G,{...W,errors:{}}]});else if(W.role==="child")if(C.length>=o.allowedChildren){P.fire(`Maximum allowed children (${allowedChildren}) reached.`);return}else z(G=>{const ae=G.findIndex($=>$._id===W._id);return ae!==-1?G.filter(($,Z)=>Z!==ae):[...G,{...W,errors:{}}]})},Q=()=>(console.log("Rendering previous guests:",K),!K||!Array.isArray(K)||K.length===0?null:e.jsxs("div",{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Saved Guests"}),K.map((W,G)=>e.jsxs(J,{id:"previous-guest-item",className:"previous-guest-item",onClick:()=>ue(W),sx:{display:"flex",alignItems:"center",mb:2,p:2,border:"1px solid lightgray",borderRadius:"10px",cursor:"pointer",position:"relative"},children:[e.jsx(Rt,{sx:{bgcolor:"blue",marginRight:"10px"},children:W.name[0].toUpperCase()}),e.jsxs(J,{children:[e.jsx(r,{variant:"subtitle1",children:W.name}),e.jsxs(r,{variant:"body2",children:["DOB: ",new Date(W.dob).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body2",children:["Email: ",W.email]})]}),O.includes(W._id)&&e.jsx(dt,{sx:{position:"absolute",top:10,right:10,color:"blue"}})]},G))]})),B=(W,G,ae)=>W.map(($,Z)=>{var je,ye;return e.jsxs(Ce,{elevation:3,sx:{padding:3,marginBottom:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:G==="adult"?`Adult ${Z+1}`:`Child ${Z+1}`}),e.jsx(D,{container:!0,spacing:2,alignItems:"center",children:G==="child"?e.jsxs(e.Fragment,{children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(ge,{fullWidth:!0,label:"Name",name:"name",value:$.name,onChange:he=>v(he,Z,G),required:!0,error:!!$.errors.name,helperText:$.errors.name,InputProps:{readOnly:!!$._id}})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(ge,{fullWidth:!0,label:"Date of Birth",type:"date",name:"dob",value:$.dob?$.dob.split("T")[0]:"",onChange:he=>v(he,Z,G),required:!0,InputLabelProps:{shrink:!0},inputProps:{max:k,min:L},error:!!$.errors.dob,helperText:$.errors.dob,InputProps:{readOnly:!!$._id}})}),!$._id&&e.jsx(D,{item:!0,xs:12,children:e.jsx(Et,{control:e.jsx(Lt,{checked:$.saveDetails||!1,onChange:he=>i(Z,he.target.checked,G),icon:e.jsx(Bt,{}),checkedIcon:e.jsx(Mt,{})}),label:"Save guest details for future bookings"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{item:!0,xs:12,md:3,children:e.jsx(ge,{fullWidth:!0,label:"Name",variant:"outlined",name:"name",value:$.name,onChange:he=>v(he,Z,G),required:!0,error:!!$.errors.name,helperText:$.errors.name,InputProps:{readOnly:!!le}})}),e.jsx(D,{item:!0,xs:12,md:3,children:e.jsx(ge,{fullWidth:!0,label:"Email",variant:"outlined",name:"email",value:$.email,onChange:he=>v(he,Z,G),required:!0,type:"email",error:!!$.errors.email,helperText:$.errors.email,InputProps:{readOnly:!!le}})}),e.jsx(D,{item:!0,xs:12,md:3,children:e.jsx(ge,{fullWidth:!0,label:"Phone",variant:"outlined",name:"phone",value:$.phone,onChange:he=>v(he,Z,G),required:!0,type:"tel",error:!!$.errors.phone,helperText:$.errors.phone,InputProps:{readOnly:!!le}})}),e.jsx(D,{item:!0,xs:12,md:12,children:e.jsx(ge,{fullWidth:!0,label:"Address",variant:"outlined",name:"address",value:$.address,onChange:he=>v(he,Z,G),required:!0,multiline:!0,rows:3,InputProps:{readOnly:!!le}})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(ge,{fullWidth:!0,label:"Date of Birth",type:"date",name:"dob",value:$.dob?$.dob.split("T")[0]:"",onChange:he=>v(he,Z,G),required:!0,InputLabelProps:{shrink:!0},inputProps:{max:j},error:!!$.errors.dob,helperText:$.errors.dob,InputProps:{readOnly:!!le}})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(ge,{select:!0,fullWidth:!0,label:"Proof of Identity",variant:"outlined",name:"proofType",value:$.proofType,onChange:he=>v(he,Z,G),required:!0,children:Dn.map(he=>e.jsx(Je,{value:he.value,children:he.label},he.value))})}),!$._id&&$.proofType&&e.jsxs(e.Fragment,{children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(ge,{fullWidth:!0,label:`${$.proofType} Number`,name:"proofNumber",value:$.proofNumber,onChange:he=>v(he,Z,G),required:!0,error:!!((je=$.errors)!=null&&je.proofNumber),helperText:(ye=$.errors)==null?void 0:ye.proofNumber})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(pe,{variant:"contained",component:"label",fullWidth:!0,disabled:I,startIcon:I?e.jsx(Ze,{size:20}):null,children:[I?"Verifying...":`Upload ${$.proofType} Document`,e.jsx("input",{type:"file",hidden:!0,onChange:he=>V(he,Z,G),accept:"image/*,.pdf"})]})})]})]})}),!$._id&&e.jsx(D,{item:!0,xs:12,children:e.jsx(Et,{control:e.jsx(Lt,{checked:$.saveDetails||!1,onChange:he=>i(Z,he.target.checked,G),icon:e.jsx(Bt,{}),checkedIcon:e.jsx(Mt,{})}),label:"Save guest details for future bookings"})}),!$._id&&e.jsx(J,{mt:2,children:e.jsxs(pe,{variant:"contained",color:"secondary",id:"remove-guest-button",onClick:()=>q(Z,ae),children:["Remove ",G==="adult"?"Adult":"Child"]})}),$.proofType&&$.proofNumber&&e.jsxs(J,{sx:{mt:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Document Status:"}),$._id||X[`${G}_${Z}`]?e.jsx(Le,{label:"Verified",color:"success",size:"small",icon:e.jsx(dt,{})}):e.jsx(Le,{label:"Verification Required",color:"warning",size:"small",icon:e.jsx($s,{})})]})]},$._id||Z)}),q=(W,G)=>{G(ae=>ae.filter(($,Z)=>Z!==W))},oe=W=>{if(W==="adult")if(C.length>=o.allowedAdults){P.fire(`Maximum allowed adults (${allowedAdultsCount}) reached.`);return}else H(G=>[...G,{name:"",email:"",phone:"",address:"",dob:"",proofType:"",proofNumber:"",proofDocument:null,errors:{}}]);else if(W==="child")if(C.length>=o.allowedChildren){P.fire(`Maximum allowed children (${allowedChildren}) reached.`);return}else z(G=>[...G,{name:"",dob:"",errors:{}}])};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"guestnav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),e.jsx(J,{className:"guest-form-container",children:e.jsx("form",{onSubmit:T,children:e.jsxs(D,{container:!0,spacing:2,children:[e.jsx(D,{item:!0,xs:12,style:{textAlign:"center"},children:e.jsx(r,{variant:"h5",sx:{textDecoration:"underline",textDecorationColor:"skyblue"},children:"Fill Guest Details"})}),e.jsx(D,{item:!0,xs:12,children:Q()}),e.jsx(D,{item:!0,xs:12,children:e.jsx(r,{variant:"h5",children:"Adults Information"})}),e.jsxs(D,{item:!0,xs:12,children:[B(C,"adult",H),e.jsx(pe,{variant:"contained",onClick:()=>oe("adult"),children:"Add Adult"})]}),e.jsx(D,{item:!0,xs:12,children:e.jsx(r,{variant:"h5",children:"Children Information"})}),e.jsxs(D,{item:!0,xs:12,children:[B(b,"child",z),e.jsx(pe,{variant:"contained",onClick:()=>oe("child"),children:"Add Child"})]}),e.jsx(D,{item:!0,xs:12,mt:3,style:{display:"flex",justifyContent:"center"},children:e.jsx(pe,{variant:"contained",color:"primary",type:"submit",id:"proceed-to-reserve-room-button",children:"Proceed to Reserve Room"})})]})})}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},Pn=()=>{Me();const t="rzp_test_kcqNw37pFm1tK2",a="0KSuyptpnCbsVt3Yp71yy4Si";s.useState(null);const h=Se(),c=Ue().state||{},g=c.roomdata||{};console.log("room details",g);const o=c.data||{};console.log(o);const N=c.adults||[];console.log(N);const u=c.children||[],x=c.totlrates||0;console.log("total rate",x);const d=c.totldays||0;console.log("total days",d);const f=c.guestData||{},j=f.selectedGuestIds||[],n=f.newGuestDetails||{adults:[],children:[]};console.log("selected guestids",j),console.log("new guest details",n);const _=localStorage.getItem("userId"),[m,k]=s.useState(!1);s.useEffect(()=>{const b=document.createElement("script");return b.src="https://checkout.razorpay.com/v1/checkout.js",b.async=!0,b.onload=()=>{console.log("Razorpay script loaded")},document.body.appendChild(b),()=>{document.body.removeChild(b)}},[]);const L=async()=>{var ce,de;const b=new FormData;b.append("roomDetails",JSON.stringify(g)),b.append("datas",JSON.stringify(o)),b.append("userid",_),b.append("totalRate",x),b.append("totldays",d),b.append("selectedGuestIds",JSON.stringify(j)),b.append("newGuestDetails",JSON.stringify(n)),n&&(n.adults&&n.adults.length>0&&n.adults.forEach((re,xe)=>{re._id||(b.append(`newAdultDetails[${xe}]`,JSON.stringify(re)),re.proofDocument&&b.append("proofDocuments",re.proofDocument))}),n.children&&n.children.length>0&&n.children.forEach((re,xe)=>{re._id||b.append(`newChildrenDetails[${xe}]`,JSON.stringify(re))}));try{const re=await te.post("http://localhost:3001/user/confirmbook",b,{headers:{"Content-Type":"multipart/form-data"}});if(re.status===201){const xe=re.data.reservation.total_amount,le=re.data.reservation._id,fe=re.data.reservation,O={key:t,key_secret:a,amount:parseInt(xe*100),currency:"INR",order_receipt:"order_rcptid_"+b.get("userid"),name:"INTELLISTAY PAYMENT GATEWAY",description:"Booking Payment",handler:function(ne){console.log("Payment successful",ne);const ie=ne.razorpay_payment_id,A={userid:_,paymentId:ie,totalRate:x,totldays:d,reservation_id:le,checkInDate:fe.check_in,checkOutDate:fe.check_out};k(!0),te.post("http://localhost:3001/user/orders/create",A).then(F=>{P.fire("Booking and payment successful"),console.log(F.data.reservation),console.log("user details",F.data.user),(()=>{const R=new Gs;let I=20;R.setFontSize(28),R.text("IntelliStay",105,I,{align:"center"}),R.line(10,I+5,200,I+5),I+=15,R.setFontSize(18),R.text("Reservation Confirmation",105,I,{align:"center"}),R.line(10,I+5,200,I+5),I+=15,R.setFontSize(14),R.text("Reservation Details",10,I),I+=10,R.setFontSize(12),R.text(`Room ID: ${re.data.reservation.room_id}`,10,I),R.text(`Booking Date: ${new Date(re.data.reservation.booking_date).toLocaleDateString("en-GB")}`,200,I,{align:"right"}),I+=10,R.text(`User Name: ${F.data.user.displayName}`,10,I),R.text(`User Email: ${F.data.user.email}`,200,I,{align:"right"}),I+=20,R.text(`Room Type: ${g.roomtype}`,10,I),R.text(`Check-In Date: ${new Date(re.data.reservation.check_in).toLocaleDateString("en-GB")}`,10,I+10),R.text(`Check-Out Date: ${new Date(re.data.reservation.check_out).toLocaleDateString("en-GB")}`,200,I+10,{align:"right"}),I+=20,R.text("Check-In Time: 02:00 PM ",10,I+10),R.text("Check-Out Time: 11:00 AM",200,I+10,{align:"right"}),I+=20,R.text(`Price per Night: Rs.${g.rate}`,10,I),R.text(`Total Nights: ${d}`,200,I,{align:"right"}),I+=10,R.text(`Total Amount: Rs.${re.data.reservation.total_amount}`,10,I),R.text(`Reservation Status: ${re.data.reservation.status}`,200,I,{align:"right"}),I+=15,R.line(10,I,200,I),I+=10;const M=()=>{I>280&&(R.addPage(),I=20)};R.setFontSize(14),R.text("Room Details",10,I),I+=10,R.setFontSize(12),R.text(`Room Name: ${g.roomtype}`,10,I);let X=R.splitTextToSize(g.description,180);R.text(`Description: ${X}`,10,I+10),I+=10+X.length*7,R.text(`Price per Night: Rs.${g.rate}`,10,I+20),I+=30,M(),R.line(10,I,200,I),I+=10,R.setFontSize(14),R.text("Guest Details",10,I),I+=10,R.setFontSize(12),N.forEach((U,S)=>{let l=I+S*30,i=R.splitTextToSize(U.address,180);M(),R.text(`Adult ${S+1} Name: ${U.name}`,10,l),R.text(`Email: ${U.email}`,200,l,{align:"right"}),R.text(`Phone: ${U.phone}`,10,l+10),R.text(`Address: ${i}`,200,l+10,{align:"right"}),R.text(`Proof of Identity: ${U.proofType}`,10,l+20+(i.length-1)*7),R.text(`Proof Number: ${U.proofNumber}`,200,l+20+(i.length-1)*7,{align:"right"}),I=l+30+(i.length-1)*7}),M(),R.line(10,I,200,I),I+=10,R.setFontSize(14),R.text("Children Details",10,I),I+=10,R.setFontSize(12),u.length===0?(R.setFontSize(12),R.text("No children details available",10,I),I+=10):(R.setFontSize(12),u.forEach((U,S)=>{let l=I+S*20;M(),R.text(`Child ${S+1} Name: ${U.name}`,10,l),R.text(`DOB: ${U.dob}`,200,l,{align:"right"}),I=l+20})),M(),R.line(10,I,200,I),I+=10,R.setFontSize(14),R.text(`Total Room Rate: Rs: ${x}`,10,I),I+=15,R.line(10,I,200,I),R.addPage(),I=20,R.setFontSize(18),R.text("Payment Details",105,I,{align:"center"}),R.line(10,I+5,200,I+5),I+=15,R.setFontSize(12),R.text(`Transaction ID: ${F.data.bill.paymentId}`,10,I+10),R.text(`Reservation ID: ${F.data.bill.reservationid}`,10,I+20),R.text(`Payment Status: ${F.data.bill.status}`,10,I+30),I+=40,R.setFontSize(14),R.text(`Total Amount Paid: Rs.${F.data.bill.totalRate}`,10,I),I+=10,R.save(`Reservation_${g.roomtype}_${Date.now()}.pdf`)})(),h("/")}).catch(F=>{console.error("Error creating order:",F),C(le),P.fire("Error finalizing the booking. Please try again.")})},modal:{ondismiss:function(){console.log("Payment modal closed"),C(le),console.log("Booking cancelled. The reservation has been removed.")}},theme:{color:"#3399cc"}};var z=new window.Razorpay(O);z.on("payment.failed",function(ne){console.log("Payment failed",ne.error),C(le),console.log({title:"Payment Failed",text:"The payment was unsuccessful. The reservation has been cancelled.",icon:"error"})}),z.open()}else P.fire(re.data.message)}catch(re){const xe=((de=(ce=re.response)==null?void 0:ce.data)==null?void 0:de.message)||"An error occurred while booking.";P.fire(xe),console.error("Error:",re)}},C=async b=>{try{await te.delete(`http://localhost:3001/user/reservations/${b}`),console.log("Reservation deleted successfully")}catch(z){console.error("Error deleting reservation:",z),console.log({title:"Error",text:"Failed to cancel the reservation. Please contact support.",icon:"error"})}};console.log("Room Details:",g),console.log("Adult Details:",N),console.log("Children Details:",u),console.log("Guest Data:",f);const H=b=>b?typeof b=="object"?Object.values(b).filter(Boolean).join(", ")||"N/A":b:"N/A";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"resroomnav",children:e.jsx(ke,{})}),e.jsxs(J,{sx:{margin:{xs:"10px",md:"20px"},marginTop:{xs:"20px",md:"40px"}},children:[e.jsx(r,{variant:"h4",gutterBottom:!0,sx:{textAlign:{xs:"center",md:"left"}},children:"Reserve Room"}),e.jsxs(Ce,{elevation:3,sx:{padding:3,marginBottom:3},children:[e.jsx(r,{variant:"h5",gutterBottom:!0,children:"Room Details"}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsx(D,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx("strong",{children:"Room Name:"})," ",String((g==null?void 0:g.roomtype)||"N/A")]})}),e.jsx(D,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx("strong",{children:"Room Type:"})," ",String((g==null?void 0:g.roomtype)||"N/A")]})}),e.jsx(D,{item:!0,xs:12,children:e.jsxs(r,{children:[e.jsx("strong",{children:"Description:"})," ",String((g==null?void 0:g.description)||"No description available")]})}),e.jsx(D,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx("strong",{children:"Price per Night:"})," Rs.",Number((g==null?void 0:g.rate)||0).toLocaleString()]})}),e.jsx(D,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx("strong",{children:"Total Nights:"})," ",Number(d||0)]})})]})]}),e.jsxs(Ce,{elevation:3,sx:{padding:3,marginBottom:3},children:[e.jsx(r,{variant:"h5",gutterBottom:!0,children:"Guest Details"}),e.jsx(r,{variant:"h6",sx:{marginBottom:2},children:"Adult Guests"}),Array.isArray(N)&&N.length>0?N.map((b,z)=>e.jsxs(J,{sx:{marginBottom:3},children:[e.jsxs(r,{children:[e.jsxs("strong",{children:["Adult ",z+1," Name:"]})," ",String((b==null?void 0:b.name)||"N/A")]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Email:"})," ",String((b==null?void 0:b.email)||"N/A")]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Phone:"})," ",String((b==null?void 0:b.phone)||"N/A")]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Address:"})," ",H(b==null?void 0:b.address)]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Proof of Identity:"})," ",String((b==null?void 0:b.proofType)||"N/A")]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Proof Number:"})," ",String((b==null?void 0:b.proofNumber)||"N/A")]}),e.jsx(qe,{sx:{marginY:2}})]},z)):e.jsx(r,{children:"No adult guest details available."}),e.jsx(r,{variant:"h6",sx:{marginBottom:2},children:"Children Guests"}),Array.isArray(u)&&u.length>0?u.map((b,z)=>e.jsxs(J,{sx:{marginBottom:3},children:[e.jsxs(r,{children:[e.jsxs("strong",{children:["Child ",z+1," Name:"]})," ",String((b==null?void 0:b.name)||"N/A")]}),e.jsxs(r,{children:[e.jsx("strong",{children:"DOB:"})," ",String((b==null?void 0:b.dob)||"N/A")]}),e.jsx(qe,{sx:{marginY:2}})]},z)):e.jsx(r,{children:"No children details available."})]}),e.jsxs(Ce,{elevation:3,sx:{padding:3,marginBottom:3},children:[e.jsx(r,{variant:"h5",gutterBottom:!0,children:"Total Room Rate"}),e.jsxs(r,{variant:"h6",children:["Rs.",Number(x||0).toLocaleString()]})]}),e.jsx(J,{sx:{textAlign:"center",marginTop:3},children:e.jsx(pe,{variant:"contained",color:"primary",disabled:m,size:"large",id:"booknow",onClick:L,children:m?"Processing...":"Book Now"})})]}),m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Ze,{})}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},Tn=()=>{Me();const[t,a]=s.useState(!1),[h,p]=s.useState(!1),[c,g]=s.useState(null),o=Vs(),[N,u]=s.useState({_id:""}),[x,d]=s.useState({displayName:"",email:"",address:"",image:"",role:"",phone_no:"",dob:""}),[f,j]=s.useState({}),[n,_]=s.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,k]=s.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[L,C]=s.useState(!1),[H,b]=s.useState(!1),z=s.useRef(null);s.useState(!1);const[ce,de]=s.useState(!0),[re,xe]=s.useState(!1),[le,fe]=s.useState(!1),O=s.useCallback(async y=>{try{const E=(await te.get(`http://localhost:3001/user/profile/${y}`)).data;d({displayName:E.displayName||"",email:E.email||"",address:E.address||"",image:E.image||"",role:E.role||"",phone_no:E.phone_no||"",dob:E.dob||""}),C(!!E.googleId),xe(E.hasFaceEnabled)}catch(w){console.error("Failed to fetch profile data:",w),P.fire("Error","Failed to fetch profile data","error")}},[]);s.useEffect(()=>{const y=localStorage.getItem("token");if(y)try{const w=Qe(y);u(w),O(w==null?void 0:w._id)}catch(w){console.error("Failed to decode token:",w),P.fire("Error","Failed to authenticate","error")}},[O]),s.useEffect(()=>{(async()=>{try{de(!0);const w="/models";await Promise.all([He.tinyFaceDetector.loadFromUri(w),He.faceLandmark68Net.loadFromUri(w),He.faceRecognitionNet.loadFromUri(w)]),de(!1)}catch(w){console.error("Error loading face models:",w),P.fire({title:"Model Loading Error",text:"Failed to load face detection models. Please refresh the page.",icon:"error"})}})()},[]);const ne=()=>{a(!0)},ie=(y,w)=>{let E="";switch(y){case"displayName":/^[a-zA-Z\s._]+$/.test(w)||(E="Only letters, spaces, dots, and underscores are allowed");break;case"phone_no":/^\d{10}$/.test(w)?/(\d)\1{3,}/.test(w)&&(E="No more than 3 consecutive repeated digits allowed"):E="Phone number must be 10 digits";break;case"dob":const Y=new Date(w),se=new Date;let me=se.getFullYear()-Y.getFullYear();const we=se.getMonth()-Y.getMonth();(we<0||we===0&&se.getDate()<Y.getDate())&&me--,me<18&&(E="Must be at least 18 years old");break}return E},A=y=>{const{name:w,value:E}=y.target,Y=ie(w,E);j(se=>({...se,[w]:Y})),d(se=>({...se,[w]:E}))},F=()=>{const y={};if(Object.keys(x).forEach(w=>{const E=ie(w,x[w]);E&&(y[w]=E)}),Object.keys(y).length>0){j(y);return}te.post(`http://localhost:3001/user/profile/update/${N._id}`,x).then(w=>{P.fire("Success","Profile updated successfully","success"),a(!1)}).catch(w=>{P.fire("Error","Error updating profile data","error")})},K=()=>{p(!0)},R=y=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[^a-zA-Z\d])([a-zA-Z\d[^a-zA-Z\d]]{6,50})$/.test(y),I=y=>{const{name:w,value:E}=y.target;_(Y=>({...Y,[w]:E})),w==="newPassword"&&(R(E)?k(Y=>({...Y,newPassword:""})):k(Y=>({...Y,newPassword:"Password must be 6-50 characters long, include a letter, a number, and a special character"}))),w==="confirmPassword"&&(E!==n.newPassword?k(Y=>({...Y,confirmPassword:"Passwords do not match"})):k(Y=>({...Y,confirmPassword:""})))},M=()=>{if(n.newPassword!==n.confirmPassword){k(y=>({...y,confirmPassword:"Passwords do not match"}));return}if(!R(n.newPassword)){k(y=>({...y,newPassword:"Password must be 6-50 characters long, include a letter, a number, and a special character"}));return}te.put(`http://localhost:3001/user/change-password/${N._id}`,{currentPassword:n.currentPassword,newPassword:n.newPassword}).then(y=>{P.fire("Success","Password changed successfully","success"),p(!1),_({currentPassword:"",newPassword:"",confirmPassword:""}),k({currentPassword:"",newPassword:"",confirmPassword:""})}).catch(y=>{P.fire("Error","Current password is incorrect or error updating password","error")})},X=y=>{const w=y.target.files[0];g(w);const E=new FormData;E.append("image",w),te.post(`http://localhost:3001/user/upload-photo/${N._id}`,E).then(Y=>{P.fire("Success","Profile image updated successfully","success"),d(se=>({...se,image:Y.data.image}))}).catch(Y=>{P.fire("Error","Error uploading image","error")})},U=async()=>{var y;if(!le)try{fe(!0);const{value:w}=await P.fire({title:"Face ID Setup Instructions",html:`
          <div class="face-setup-instructions">
            <p>Please follow these steps:</p>
            <ol>
              <li>Center your face in the frame</li>
              <li>Blink naturally 2-3 times</li>
              <li>Slowly turn your head left and right (about 15 degrees)</li>
              <li>Maintain good lighting on your face</li>
              <li>Keep a neutral expression</li>
            </ol>
          </div>
        `,icon:"info",showCancelButton:!0,confirmButtonText:"I Understand",cancelButtonText:"Cancel"});if(!w){fe(!1);return}const E=[],Y=10;let se=!1,me=!1;const we=P.mixin({allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{P.showLoading()}});for(let De=0;De<Y;De++){we.fire({title:"Capturing Face Data",html:`
            Progress: ${Math.round(De/Y*100)}%<br>
            ${De<3?"Please blink naturally...":De<6?"Slowly turn your head left...":De<9?"Slowly turn your head right...":"Almost done..."}
          `}),await new Promise(ks=>setTimeout(ks,300));const Ge=(y=z.current)==null?void 0:y.getScreenshot();if(!Ge)continue;const st=await S(Ge);if(!st)throw new Error("Face not clearly visible. Please adjust your position.");const{landmarks:Pt,descriptor:Ss}=st,mt=await l(Pt);mt.eyeAspectRatio<.25&&(se=!0),Math.abs(mt.headPose.yaw)>10&&(me=!0),E.push({descriptor:Ss,landmarks:Pt,metrics:mt,timestamp:Date.now()})}we.close();try{i(E,se,me)}catch(De){throw new Error(`Validation failed: ${De.message}`)}const Ke=await V(E);await B(Ke,N._id),xe(!0),b(!1),P.fire({title:"Success!",text:"Face ID has been successfully set up",icon:"success"})}catch(w){console.error("Face capture error:",w),P.fire({title:"Setup Failed",text:w.message||"Failed to set up Face ID. Please try again.",icon:"error",confirmButtonText:"Try Again"})}finally{fe(!1)}},S=async y=>{const w=new Image;return w.src=y,await new Promise(E=>{w.onload=E}),ts(w,new ss).withFaceLandmarks().withFaceDescriptor()},l=async y=>({eyeAspectRatio:oe(y),headPose:W(y),faceSymmetry:Z(y),skinTexture:ye()}),i=(y,w,E)=>{if(y.length<8)throw new Error("Not enough valid frames captured. Please try again.");if(!w)throw new Error("No blink detected. Please blink naturally during the capture.");if(!E)throw new Error("No head movement detected. Please turn your head slightly left and right.");const Y=he(y),se=Fe(y);if(Y<.7)throw new Error("Face consistency check failed. Please keep your face steady.");if(se<.6)throw new Error("Movement appears unnatural. Please move more smoothly.");return!0},v=y=>y.reduce((w,E)=>{const Y=T(E),se=T(w);return Y>se?E:w}),T=y=>{if(!y||!y.metrics)return 0;const w={eyeAspectRatio:.2,faceSymmetry:.3,headPose:.3,skinTexture:.2};let E=0;const se=1-Math.abs(y.metrics.eyeAspectRatio-.3);E+=se*w.eyeAspectRatio,E+=y.metrics.faceSymmetry*w.faceSymmetry;const me=1-(Math.abs(y.metrics.headPose.yaw)/45+Math.abs(y.metrics.headPose.pitch)/30+Math.abs(y.metrics.headPose.roll)/30)/3;return E+=me*w.headPose,E+=y.metrics.skinTexture*w.skinTexture,E},V=async y=>{const w=v(y);return{faceDescriptor:Array.from(w.descriptor),livenessScore:ee(y),depthMap:Q(w.landmarks),qualityScore:ys(y),securityMetrics:{spoofingScore:bs(),movementNaturalness:Fe(y),textureConsistency:ws()}}},ee=y=>{if(y.length<2)return 0;const w={blinkNaturalness:ue(y),movementSmoothing:At(y[0].landmarks,y[1].landmarks,y[2].landmarks),descriptorConsistency:he(y)};return(w.blinkNaturalness+w.movementSmoothing+w.descriptorConsistency)/3},ue=y=>{let w=0,E=0,Y=y[0].metrics.eyeAspectRatio;for(let se=1;se<y.length;se++){const me=y[se].metrics.eyeAspectRatio;if(Y>.25&&me<.25){E++;const we=Math.abs(me-Y);w+=we<.15?1:.5}Y=me}return E>0?w/E:0},Q=y=>{const w=[],E=y.positions;for(let Y=0;Y<E.length;Y++){const se=E[Y],me=Ns();w.push({x:se.x,y:se.y,z:me})}return w},B=async(y,w)=>te.post("http://localhost:3001/user/save-face",{userId:w,...y}),q=y=>{const w=y[1],E=y[5],Y=y[2],se=y[4],me=y[0],we=y[3],Ke=Math.sqrt(Math.pow(E.x-w.x,2)+Math.pow(E.y-w.y,2)),De=Math.sqrt(Math.pow(se.x-Y.x,2)+Math.pow(se.y-Y.y,2)),Ge=Math.sqrt(Math.pow(we.x-me.x,2)+Math.pow(we.y-me.y,2));return(Ke+De)/(2*Ge)},oe=y=>{const w=y.getLeftEye(),E=y.getRightEye(),Y=q(w),se=q(E);return(Y+se)/2},W=y=>{const w=y.getNose(),E=y.getJawOutline(),Y=G(w,E),se=ae(w,E),me=$(w,E);return{yaw:Y,pitch:se,roll:me}},G=(y,w)=>{const E=y[0],Y=w[0],se=w[w.length-1],me=Math.sqrt(Math.pow(E.x-Y.x,2)+Math.pow(E.y-Y.y,2)),we=Math.sqrt(Math.pow(E.x-se.x,2)+Math.pow(E.y-se.y,2));return(we-me)/(we+me)*100},ae=(y,w)=>{const E=y[0],Y=y[3],se=w[Math.floor(w.length/2)],me=Math.abs(Y.y-E.y),we=Math.abs(se.y-E.y)*.3;return(me-we)/we*100},$=(y,w)=>{const E=w[0],Y=w[w.length-1];return Math.atan2(Y.y-E.y,Y.x-E.x)*(180/Math.PI)},Z=y=>{const w=y.getLeftEye(),E=y.getRightEye(),Y=y.getNose(),se=y.getJawOutline();return je(w,E,Y,se)},je=(y,w,E,Y)=>{const se=E[0].x;let me=0;const we=[[y[0],w[3]],[y[3],w[0]],[Y[0],Y[Y.length-1]]];return we.forEach(([Ke,De])=>{const Ge=Math.abs(se-Ke.x),st=Math.abs(De.x-se);me+=Math.abs(Ge-st)}),1-me/(we.length*se)},ye=y=>1,he=y=>{if(y.length<2)return 0;let w=0;const E=y.length-1;for(let Y=0;Y<E;Y++){const se=Re(y[Y].descriptor,y[Y+1].descriptor);w+=se}return w/E},Re=(y,w)=>{let E=0,Y=0,se=0;for(let me=0;me<y.length;me++)E+=y[me]*w[me],Y+=y[me]*y[me],se+=w[me]*w[me];return E/(Math.sqrt(Y)*Math.sqrt(se))},Fe=y=>{if(y.length<3)return 0;let w=0;const E=y.length-2;for(let Y=0;Y<E;Y++){const se=At(y[Y].landmarks,y[Y+1].landmarks,y[Y+2].landmarks);w+=se}return w/E},At=(y,w,E)=>.9,ys=y=>y.reduce((w,E)=>w+3/3,0)/y.length,bs=y=>.95,ws=y=>.9,Ns=(y,w)=>.5,Cs=async()=>{try{await te.delete(`http://localhost:3001/user/disable-face/${N._id}`),xe(!1),P.fire("Success","Face login disabled successfully","success")}catch(y){console.error("Error disabling face login:",y),P.fire("Error","Failed to disable face login","error")}};return s.useEffect(()=>{if(H)return(async()=>{try{const w=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});z.current&&(z.current.video.srcObject=w)}catch(w){console.error("Webcam initialization error:",w),P.fire({title:"Camera Error",text:"Failed to initialize camera. Please check permissions and try again.",icon:"error"})}})(),()=>{var w,E;(E=(w=z.current)==null?void 0:w.video)!=null&&E.srcObject&&z.current.video.srcObject.getTracks().forEach(se=>se.stop())}},[H]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"myprofile_nav",children:[" ",e.jsx(ke,{})," "]}),e.jsxs(Ce,{elevation:3,sx:{padding:3,margin:"auto",maxWidth:600,mt:5,borderRadius:2,backgroundColor:o.palette.mode==="dark"?"#333":"#f9f9f9",color:o.palette.mode==="dark"?"#fff":"#000"},children:[e.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",mb:4,position:"relative",children:[e.jsx(Rt,{alt:x.displayName||"User",src:x.image?x.image:"/placeholder-avatar.png",sx:{width:150,height:150,mb:1,border:`4px solid ${o.palette.primary.main}`}}),e.jsxs(ze,{component:"label",sx:{position:"absolute",bottom:28,right:"37%",backgroundColor:o.palette.primary.main,color:"#fff","&:hover":{backgroundColor:o.palette.primary.dark}},children:[e.jsx("input",{hidden:!0,accept:".jpg,.jpeg,.png",type:"file",onChange:X}),e.jsx(zs,{})]}),e.jsx(r,{variant:"h5",fontWeight:"bold",mt:2,children:x.displayName})]}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Name:"}),t?e.jsxs(e.Fragment,{children:[e.jsx(ge,{fullWidth:!0,name:"displayName",value:x.displayName||"",onChange:A,error:!!f.displayName,sx:{color:o.palette.text.primary}}),f.displayName&&e.jsx(ut,{error:!0,children:f.displayName})]}):e.jsx(r,{variant:"h6",children:x.displayName})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Email:"}),t?e.jsx(ge,{fullWidth:!0,name:"email",value:x.email||"",onChange:A,InputProps:{readOnly:!0},sx:{color:o.palette.text.primary}}):e.jsx(r,{variant:"h6",children:x.email})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Phone Number:"}),t?e.jsxs(e.Fragment,{children:[e.jsx(ge,{fullWidth:!0,name:"phone_no",value:x.phone_no||"",onChange:A,error:!!f.phone_no,sx:{color:o.palette.text.primary}}),f.phone_no&&e.jsx(ut,{error:!0,children:f.phone_no})]}):e.jsx(r,{variant:"h6",children:x.phone_no})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Date of Birth:"}),t?e.jsxs(e.Fragment,{children:[e.jsx(ge,{fullWidth:!0,name:"dob",type:"date",value:x.dob||"",onChange:A,error:!!f.dob,sx:{color:o.palette.text.primary},InputLabelProps:{shrink:!0},inputProps:{max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0]}}),f.dob&&e.jsx(ut,{error:!0,children:f.dob})]}):e.jsx(r,{variant:"h6",children:x.dob})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Address:"}),t?e.jsx(ge,{fullWidth:!0,name:"address",value:x.address||"",onChange:A,sx:{color:o.palette.text.primary}}):e.jsx(r,{variant:"h6",children:x.address})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body1",color:"textSecondary",children:"Face Recognition Login:"}),re?e.jsx(pe,{variant:"outlined",color:"secondary",onClick:Cs,startIcon:e.jsx(Ot,{}),sx:{mt:1},children:"Disable Face Login"}):e.jsx(pe,{variant:"contained",color:"primary",onClick:()=>b(!0),startIcon:e.jsx(Ot,{}),sx:{mt:1},disabled:ce,children:ce?"Loading Face Detection...":"Enable Face Login"})]}),e.jsxs(D,{item:!0,xs:12,textAlign:"center",children:[t?e.jsx(pe,{variant:"contained",color:"primary",onClick:F,sx:{mt:2,mr:2},disabled:Object.keys(f).some(y=>f[y]),children:"Save"}):e.jsx(pe,{variant:"contained",color:"primary",onClick:ne,sx:{mt:2,mr:2},children:"Edit Profile"}),!L&&(h?e.jsxs(J,{children:[e.jsx(r,{variant:"body1",color:"textSecondary",mt:2,children:"Current Password:"}),e.jsx(ge,{fullWidth:!0,type:"password",name:"currentPassword",value:n.currentPassword,onChange:I,sx:{color:o.palette.text.primary}}),e.jsx(r,{variant:"body1",color:"textSecondary",mt:2,children:"New Password:"}),e.jsx(ge,{fullWidth:!0,type:"password",name:"newPassword",value:n.newPassword,onChange:I,error:!!m.newPassword,helperText:m.newPassword,sx:{color:o.palette.text.primary}}),e.jsx(r,{variant:"body1",color:"textSecondary",mt:2,children:"Confirm New Password:"}),e.jsx(ge,{fullWidth:!0,type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:I,error:!!m.confirmPassword,helperText:m.confirmPassword,sx:{color:o.palette.text.primary}}),e.jsx(pe,{variant:"contained",color:"primary",onClick:M,sx:{mt:2},disabled:!!m.newPassword||!!m.confirmPassword,children:"Save Password"})]}):e.jsx(pe,{variant:"outlined",color:"secondary",onClick:K,sx:{mt:2},children:"Change Password"}))]})]})]}),e.jsxs(cs,{open:H,onClose:()=>b(!1),maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{position:"relative",zIndex:1e3}},children:[e.jsx(ds,{children:"Face ID Setup"}),e.jsx(hs,{children:e.jsx(J,{sx:{position:"relative",width:"100%",height:400},children:e.jsx(Hs,{ref:z,screenshotFormat:"image/jpeg",width:"100%",height:"100%",videoConstraints:{width:1280,height:720,facingMode:"user",aspectRatio:1.333333},mirrored:!0,screenshotQuality:1,forceScreenshotSourceSize:!0})})}),e.jsxs(ms,{children:[e.jsx(pe,{onClick:()=>b(!1),children:"Cancel"}),e.jsx(pe,{onClick:U,variant:"contained",color:"primary",disabled:le,children:le?"Processing...":"Capture"})]})]}),e.jsx("div",{className:"swal-dialog-container"})]})},_n=Be(Te)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(3),background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:t.spacing(2),boxShadow:"0 8px 32px rgba(0,0,0,0.1)",transition:"transform 0.3s ease-in-out","&:hover":{transform:"translateY(-5px)"}})),Fn=({reservationId:t})=>{var _,m,k;const[a,h]=s.useState(""),[p,c]=s.useState(!1),[g,o]=s.useState(!1),[N,u]=s.useState(null),[x,d]=s.useState(null);s.useEffect(()=>{f()},[t]);const f=async()=>{try{const L=localStorage.getItem("userId");console.log("user_id",L);const C={headers:{user_id:L}},H=await te.get(`http://localhost:3001/user/reservations/${t}`,C);console.log("Reservation response:",H.data),H.data.success?d(H.data.data):u("Failed to fetch reservation details")}catch(L){console.error("Error fetching reservation:",L),u("Failed to fetch reservation details")}},j=async()=>{o(!0),u(null);try{const L=await te.post("http://localhost:3001/user/qr/generate",{reservationId:t,timestamp:new Date().toISOString()});h(L.data.qrCode),c(!0)}catch{u("Failed to generate QR code")}o(!1)},n=()=>{const L=document.getElementById("qr-code"),C=new XMLSerializer().serializeToString(L),H=document.createElement("canvas"),b=H.getContext("2d"),z=new Image;z.onload=()=>{H.width=z.width,H.height=z.height,b.drawImage(z,0,0);const ce=H.toDataURL("image/png"),de=document.createElement("a");de.download=`qr-code-${t}.png`,de.href=ce,de.click()},z.src="data:image/svg+xml;base64,"+btoa(C)};return e.jsx(Dt,{maxWidth:"sm",children:e.jsx(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(_n,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,children:["Self Check-",(x==null?void 0:x.status)==="checked_in"?"Out":"In"]}),N&&e.jsx($e,{severity:"error",sx:{mb:2},children:N}),x&&e.jsxs(J,{sx:{mb:2},children:[e.jsxs(r,{variant:"body1",children:["Room: ",((_=x.roomDetails)==null?void 0:_.roomNumber)||"N/A"]}),e.jsxs(r,{variant:"body1",children:["Check-in: ",(m=x.dates)!=null&&m.checkIn?new Date(x.dates.checkIn).toLocaleDateString():"N/A"]}),e.jsxs(r,{variant:"body1",children:["Check-out: ",(k=x.dates)!=null&&k.checkOut?new Date(x.dates.checkOut).toLocaleDateString():"N/A"]})]}),e.jsx(pe,{variant:"contained",color:"primary",onClick:j,disabled:g||!x,fullWidth:!0,children:g?e.jsx(Ze,{size:24,color:"inherit"}):`Generate QR Code for Check-${(x==null?void 0:x.status)==="checked_in"?"Out":"In"}`}),e.jsxs(cs,{open:p,onClose:()=>c(!1),children:[e.jsx(ds,{children:"Scan this QR Code at the Self-Service Kiosk"}),e.jsxs(hs,{children:[e.jsx(J,{sx:{display:"flex",justifyContent:"center",p:3,background:"#f5f5f5",borderRadius:1},children:e.jsx(Ws,{id:"qr-code",value:a,size:256,level:"H",includeMargin:!0})}),e.jsxs(r,{variant:"body2",sx:{mt:2,textAlign:"center"},children:["Please scan this QR code at our self-service kiosk to complete your check-",(x==null?void 0:x.status)==="checked_in"?"out":"in","."]})]}),e.jsxs(ms,{children:[e.jsx(pe,{onClick:n,children:"Download QR Code"}),e.jsx(pe,{onClick:()=>c(!1),children:"Close"})]})]})]})})})},En=()=>{Me();const{bookingId:t}=qs(),[a,h]=s.useState(null),[p,c]=s.useState(!0),[g,o]=s.useState(null),[N,u]=s.useState(!1),[x,d]=s.useState(null),[f,j]=s.useState(""),[n,_]=s.useState(0),[m,k]=s.useState(1),[L,C]=s.useState(!1),[H,b]=s.useState(0),[z,ce]=s.useState(0),[de,re]=s.useState(""),[xe,le]=s.useState(!1);let fe=0,O=0;s.useEffect(()=>{(async()=>{c(!0),o(null);try{const oe=await te.get(`http://localhost:3001/user/user-booking/${t}`);oe.status===200?h(oe.data):o("Failed to fetch booking details.")}catch(oe){console.error("Error fetching booking details:",oe),o("An error occurred while fetching booking details.")}finally{c(!1)}})()},[t,L]);const ne=Ys({opacity:N?1:0,transform:N?"scale(1)":"scale(0.8)",config:{tension:300,friction:25}}),ie=(q,oe)=>{d(q),j(oe),u(!0),k(1)},A=()=>{u(!1)},F=()=>{a&&a.room.images&&_(q=>(q+1)%a.room.images.length)},K=()=>{a&&a.room.images&&_(q=>(q-1+a.room.images.length)%a.room.images.length)},R=()=>{k(q=>Math.min(q+.1,3))},I=()=>{k(q=>Math.max(q-.1,1))};if(p)return e.jsx(r,{children:"Loading..."});if(g)return e.jsx(r,{children:g});if(!a)return e.jsx(r,{children:"No booking details available."});const{reservation:M,room:X,guests:U,bill:S}=a,v=new Date(M.check_in)>=new Date,T=()=>{P.fire({title:"Are you sure?",text:"Do you really want to cancel the booking? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, cancel it!",cancelButtonText:"No, keep it"}).then(async q=>{if(q.isConfirmed)try{const oe=await te.post(`http://localhost:3001/user/user-bookings/cancel/${M._id}`);P.fire("Cancelled!",oe.data.message,"success"),C(W=>!W)}catch(oe){P.fire("Error!",oe.response.data.message||"An error occurred while cancelling the booking.","error")}})},V=async()=>{try{(await te.post("http://localhost:3001/user/feedback",{reservationId:M._id,hotelRating:H,roomRating:z,feedback:de,userId:localStorage.getItem("userId")})).status===201&&(le(!0),P.fire("Success","Thank you for your feedback!","success"))}catch{P.fire("Error","Failed to submit feedback. Please try again.","error")}},ee=new Date(M.check_in),ue=M.cancel_date?new Date(M.cancel_date):null,Q=Math.ceil((ee-new Date)/(1e3*60*60*24));let B=S.status;return ue&&Q>=2&&(B="Refunded"),e.jsxs("div",{id:"booking-info",children:[e.jsx("div",{className:"MyBookingsnav",children:e.jsx(ke,{})}),e.jsxs(J,{p:4,children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,style:{fontWeight:"bold",textAlign:"center",position:"relative"},children:["Booking Details",e.jsx(J,{component:"span",sx:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"10%",height:"3px",backgroundColor:"skyblue"}})]}),e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#93C572",color:"#111"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center",paddingBottom:"5px"},children:"Reservation Details"}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Reservation id:"})," ",M._id]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Booking Date:"})," ",new Date(M.booking_date).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_In Date:"})," ",new Date(M.check_in).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_Out Date:"})," ",new Date(M.check_out).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_In Time:"})," 02:00 PM"]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_Out Time:"})," 11:00 AM"]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Total nights:"})," ",M.totaldays]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Total Amount:"})," ",M.total_amount]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"No of Guests:"})," ",M.guestids.length]}),M.check_in_time&&e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_In Time by user:"})," ",new Date(M.check_in_time).toLocaleTimeString("en-GB")]}),M.check_out_time&&e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check_Out Time by user:"})," ",new Date(M.check_out_time).toLocaleTimeString("en-GB")]}),e.jsxs(r,{variant:"body1",style:{display:"flex",alignItems:"center"},children:[" ",e.jsx("strong",{children:"Status:"}),e.jsx("span",{style:{color:M.status==="Cancelled"?"red":"green",marginLeft:"4px"},children:M.status}),M.status==="Cancelled"?e.jsxs(e.Fragment,{children:[e.jsx($t,{style:{color:"red",marginLeft:"8px",padding:"4px"}}),e.jsxs(r,{variant:"body2",style:{marginLeft:"8px"},children:[e.jsx("strong",{children:"Cancelled Date:"})," ",new Date(M.cancel_date).toLocaleDateString("en-GB")]})]}):e.jsx(e.Fragment,{children:e.jsx(dt,{style:{color:"green",marginLeft:"8px"}})})]})]})}),e.jsx(D,{item:!0,xs:12,children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#93C572",color:"#111"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center"},children:"Guest Details"}),U.map((q,oe)=>{let W="";return q.role==="adult"?(fe+=1,W=`Adult ${fe}`):q.role==="child"&&(O+=1,W=`Child ${O}`),e.jsxs(J,{mb:2,p:2,style:{border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,style:{fontWeight:"bold",color:"red"},children:W}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Name:"})," ",q.name]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",q.email]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Phone:"})," ",q.phone]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Address:"})," ",q.address]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(q.dob).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Proof Type:"})," ",q.proofType]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Proof Number:"})," ",q.proofNumber]})]},oe)})]})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(xt.div,{children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#FFBF00",color:"#111"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center"},children:"Room Information"}),X.images&&X.images.length>0?e.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",mb:2,mt:2,children:[e.jsxs(J,{position:"relative",display:"flex",justifyContent:"center",children:[e.jsx(pe,{onClick:K,style:{position:"absolute",left:0},children:"<"}),e.jsx(J,{component:"img",src:`http://localhost:3001/uploads/${X.images[n]}`,alt:`Room Image ${n+1}`,style:{width:"500px",height:"300px",borderRadius:"10px",cursor:"pointer",objectFit:"cover"},onClick:()=>ie(X.images[n],"room")}),e.jsx(pe,{onClick:F,style:{position:"absolute",right:0},children:">"})]}),e.jsx(J,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",mt:1,children:X.images.map((q,oe)=>e.jsx(J,{mb:1,mr:1,children:e.jsx(J,{component:"img",src:`http://localhost:3001/uploads/${q}`,alt:`Room Thumbnail ${oe+1}`,style:{width:"60px",height:"60px",borderRadius:"10px",cursor:"pointer",opacity:n===oe?1:.5},onClick:()=>_(oe)})},oe))})]}):e.jsx(r,{variant:"body2",color:"textSecondary",children:"No images available for this room."}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Room Number:"})," ",X.roomno]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Room Type:"})," ",X.roomtype]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check-In Date:"})," ",new Date(M.check_in).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Check-Out Date:"})," ",new Date(M.check_out).toLocaleDateString("en-GB")]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Total Amount:"})," Rs.",M.total_amount]})]})})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(xt.div,{children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#93C572",color:"#111"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold"},children:"Proof Documents"}),U.map((q,oe)=>e.jsxs("div",{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,style:{fontWeight:"bold"},children:[q.name,"'s Documents"]}),q.proofDocument&&q.proofDocument.length>0?e.jsx(J,{mb:2,children:e.jsx(Rt,{src:q.proofDocument,alt:`Document ${q._id+1}`,style:{width:"100px",height:"100px",cursor:"pointer"},onClick:()=>ie(q.proofDocument,"proof")})},q._id):e.jsx(r,{variant:"body2",color:"textSecondary",children:"No proof documents available for this guest."})]},oe))]})})}),e.jsx(D,{item:!0,xs:12,children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#93C572",color:"#111"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center",paddingBottom:"5px"},children:"Payment Details"}),S&&Object.keys(S).length>0?e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Reservation ID:"})," ",S.reservationid]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Transaction ID:"})," ",S.paymentId]}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"Amount Paid:"})," ",S.totalRate]}),e.jsxs(r,{variant:"body1",style:{display:"flex",alignItems:"center"},children:[e.jsx("strong",{children:"Payment Status:"}),e.jsx("span",{style:{color:B==="pending"||B==="Refunded"?"red":"green",marginLeft:"4px"},children:B}),B==="pending"?e.jsx($t,{style:{color:"red",marginLeft:"8px",padding:"4px"}}):B==="Refunded"?e.jsx(Us,{style:{color:"red",marginLeft:"8px"}}):e.jsx(dt,{style:{color:"green",marginLeft:"8px"}})]})]}):e.jsx(r,{variant:"body1",style:{textAlign:"center"},children:"No payment details available."})]})}),v&&e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"h6",gutterBottom:!0,style:{fontWeight:"bold",marginTop:"20px"},children:"Cancellation Rules:"}),e.jsxs(r,{variant:"body2",color:"textSecondary",paragraph:!0,children:["- Full refund is available if cancelled 2 days before the check-in date.",e.jsx("br",{}),"- No refund is available if cancelled within 2 days of the check-in date."]}),M.check_in_time?null:e.jsx(e.Fragment,{children:M.status==="Cancelled"?e.jsx(pe,{variant:"contained",style:{backgroundColor:"red",color:"white",marginTop:"20px"},disabled:!0,children:"Reservation Cancelled"}):e.jsx(pe,{variant:"contained",color:"secondary",onClick:T,style:{marginTop:"20px"},children:"Cancel Booking"})})]})]}),M.check_in_time&&!xe&&e.jsx(D,{item:!0,xs:12,children:e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#F0F8FF",color:"#111",marginTop:"20px"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center",marginBottom:"20px"},children:"Share Your Experience"}),e.jsxs(J,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(J,{children:[e.jsx(r,{component:"legend",style:{fontWeight:"bold",marginBottom:"8px"},children:"Hotel Rating"}),e.jsx(Gt,{name:"hotel-rating",value:H,onChange:(q,oe)=>b(oe),precision:.5,emptyIcon:e.jsx(yt,{style:{opacity:.55},fontSize:"inherit"}),size:"large"})]}),e.jsxs(J,{children:[e.jsx(r,{component:"legend",style:{fontWeight:"bold",marginBottom:"8px"},children:"Room Rating"}),e.jsx(Gt,{name:"room-rating",value:z,onChange:(q,oe)=>ce(oe),precision:.5,emptyIcon:e.jsx(yt,{style:{opacity:.55},fontSize:"inherit"}),size:"large"})]}),e.jsx(ge,{label:"Share your thoughts about your stay",multiline:!0,rows:4,value:de,onChange:q=>re(q.target.value),variant:"outlined",fullWidth:!0}),e.jsx(pe,{variant:"contained",color:"primary",onClick:V,disabled:!H||!z,style:{marginTop:"10px"},children:"Submit Feedback"})]})]})}),xe&&e.jsx(D,{item:!0,xs:12,children:e.jsx(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#E8F5E9",color:"#111",marginTop:"20px"},children:e.jsx(r,{variant:"h6",style:{textAlign:"center",color:"green"},children:"Thank you for sharing your feedback!"})})}),e.jsx(bt,{open:N,onClose:A,fullWidth:!0,maxWidth:"md",sx:{backgroundColor:"transparent"},children:e.jsx(xt.div,{style:ne,children:e.jsxs(J,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",borderRadius:"8px",boxShadow:24,p:2},children:[e.jsx(ze,{onClick:A,style:{position:"absolute",top:10,right:10},children:e.jsx(tt,{})}),f==="room"&&e.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Room Image"}),e.jsx(J,{component:"img",src:`http://localhost:3001/uploads/${x}`,alt:"Room",style:{width:`${m*100}%`,height:"auto",borderRadius:"10px",maxHeight:"80vh",objectFit:"contain"}}),e.jsxs(J,{mt:2,display:"flex",justifyContent:"center",children:[e.jsx(ze,{onClick:R,"aria-label":"Zoom In",children:e.jsx(Vt,{})}),e.jsx(ze,{onClick:I,"aria-label":"Zoom Out",children:e.jsx(zt,{})})]})]}),f==="proof"&&e.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Proof Document"}),e.jsx(J,{component:"img",src:x,alt:"Proof Document",style:{width:`${m*100}%`,height:"auto",borderRadius:"10px",maxHeight:"80vh",objectFit:"contain"}}),e.jsxs(J,{mt:2,display:"flex",justifyContent:"center",children:[e.jsx(ze,{onClick:R,"aria-label":"Zoom In",children:e.jsx(Vt,{})}),e.jsx(ze,{onClick:I,"aria-label":"Zoom Out",children:e.jsx(zt,{})})]})]})]})})})]}),e.jsx(D,{item:!0,xs:12,children:M&&(()=>{const q=new Date,oe=new Date(M.check_in),W=new Date(M.check_out);return q>=oe&&q<W?e.jsxs(Ce,{elevation:3,style:{padding:"20px",backgroundColor:"#93C572",color:"#111",marginTop:"20px"},children:[e.jsx(r,{variant:"h5",style:{fontWeight:"bold",textAlign:"center",marginBottom:"20px"},children:"Self Check-In/Out"}),M.status==="booked"||M.status==="checked_in"?e.jsx(J,{sx:{backgroundColor:"#fff",padding:2,borderRadius:2,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsx(Fn,{reservationId:M._id})}):e.jsx($e,{severity:"info",style:{backgroundColor:"#fff"},children:"QR Code generation is only available for confirmed or checked-in reservations."}),e.jsx(J,{sx:{mt:2},children:e.jsxs(r,{variant:"body1",style:{backgroundColor:"#fff",padding:"15px",borderRadius:"8px",marginTop:"10px"},children:[e.jsx("strong",{children:"How to use:"}),e.jsxs("ol",{style:{marginTop:"10px"},children:[e.jsx("li",{children:`Click "Generate QR Code" when you're ready to check in/out`}),e.jsx("li",{children:"Save or take a screenshot of the QR code"}),e.jsx("li",{children:"Visit our self-service kiosk in the hotel lobby"}),e.jsx("li",{children:"Scan the QR code at the kiosk"}),e.jsx("li",{children:(M==null?void 0:M.status)==="checked_in"?"Complete your check-out process":"Collect your room key from the dispenser"})]})]})}),e.jsx($e,{severity:"warning",style:{marginTop:"15px",backgroundColor:"#fff"},children:e.jsxs(r,{variant:"body2",children:[e.jsx("strong",{children:"Important:"}),e.jsxs("ul",{style:{marginTop:"5px",marginBottom:"0"},children:[e.jsx("li",{children:"QR codes are valid for 5 minutes after generation"}),e.jsx("li",{children:"Generate a new code if the current one expires"}),e.jsx("li",{children:"Keep your QR code private and secure"})]})]})})]}):null})()})]})},Ln=()=>{const t=Se(),a=Ue();console.log(a);const p=(a.state||{}).roomdata||{};console.log("roominfo",p);const[c,g]=s.useState(0),[o,N]=s.useState(!1);p.rate;const u=()=>{t("/rooms")},x=p.images.map(j=>({src:`http://localhost:3001/uploads/${j}`})),d=j=>{g(j),N(!0)},f=j=>{let n;const _=x.length;j==="l"?n=c===0?_-1:c-1:n=c===_-1?0:c+1,g(n)};return e.jsxs("div",{children:[e.jsx("div",{className:"room_nav",children:e.jsx(ke,{})}),e.jsxs("div",{className:"hotelContainer",children:[o&&e.jsxs("div",{className:"slider",children:[e.jsx(tt,{className:"close",onClick:()=>N(!1),style:{cursor:"pointer"}}),e.jsx(We,{icon:is,className:"arrow",onClick:()=>f("l")}),e.jsx("div",{className:"sliderWrapper",children:e.jsx("img",{src:x[c].src,alt:"",className:"sliderImg"})}),e.jsx(We,{icon:os,className:"arrow",onClick:()=>f("r")})]}),e.jsxs("div",{className:"hotelWrapper",children:[e.jsxs("button",{className:"bookNow",onClick:u,children:["Reserve or Book Now! â‚¹",p.rate," /(1 night) "]}),e.jsx("h1",{className:"hotelTitle",children:p.roomtype}),e.jsxs("div",{className:"hotelAddress",children:[e.jsx(We,{icon:ls}),e.jsx("span",{children:"Kochi"})]}),e.jsx("span",{className:"hotelDistance",children:"Excellent location â€“ 500m from MG road,Kochi"}),e.jsxs("span",{className:"hotelPriceHighlight",children:["Book a stay over â‚¹",p.rate," at this property and get a free airport taxi"]}),e.jsx("div",{className:"hotelImages",children:p.images.map((j,n)=>e.jsx("div",{className:"hotelImgWrapper",children:e.jsx("img",{onClick:()=>d(n),src:`http://localhost:3001/uploads/${j}`,alt:"",className:"hotelImg"})},n))}),e.jsxs("div",{className:"hotelDetails",children:[e.jsxs("div",{className:"hotelDetailsTexts",children:[e.jsx("h1",{className:"hotelTitle",children:"Stay in the heart of City"}),e.jsx("p",{className:"hotelDesc",children:p.description}),e.jsx("div",{style:{color:"red",fontSize:"14px",marginTop:"10px"},children:e.jsx("p",{children:"**Check-in time is 2 PM and Check-out time is 11 AM."})}),e.jsxs("div",{style:{fontSize:"14px",marginTop:"10px"},children:[e.jsx("h4",{children:"In-Room Amenities:"}),e.jsxs("ul",{style:{listStyleType:"disc",marginLeft:"20px"},children:[e.jsx("li",{children:"55â€ smart IPTV"}),e.jsx("li",{children:"Luxury bathroom with walk-in shower and bathtub"}),e.jsx("li",{children:"Deluxe French Note bathroom amenities"}),e.jsx("li",{children:"Hair dryer"}),e.jsx("li",{children:"Stocked refreshments"}),e.jsx("li",{children:"Iron and ironing board"}),e.jsx("li",{children:"In-room safe"}),e.jsx("li",{children:"Crib and rollaway bed on request"}),e.jsx("li",{children:"Complimentary Wi-Fi"}),e.jsx("li",{children:"Complimentary bottled mineral water"})]})]})]}),e.jsxs("div",{className:"hotelDetailsPrice",children:[e.jsx("h1",{children:"Perfect for a 1-night stay!"}),e.jsx("span",{children:"Located in the real heart of Kochi, this property has an excellent location score of 9.8!"}),e.jsxs("h2",{children:[e.jsxs("b",{children:["â‚¹",p.rate]})," /(1 nights)"]}),e.jsx("button",{onClick:u,children:"Reserve or Book Now!"})]})]})]})]})]})};function Bn(){Me(),Se();const[t,a]=s.useState([]),[h,p]=s.useState(3),[c,g]=s.useState(!0),[o,N]=s.useState(null),[u,x]=s.useState(""),[d,f]=s.useState([]),[j,n]=s.useState(null),[_,m]=s.useState(!1),[k,L]=s.useState(!1),[C,H]=s.useState(null),[b,z]=s.useState(null),ce=s.useRef(null),de=/^[A-Za-z\s]+$/,re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,xe=/^[0-9]{10}$/,le=/^\d{4}-\d{2}-\d{2}$/,fe=/^[A-Za-z0-9]+$/;s.useEffect(()=>{(async()=>{try{const X=localStorage.getItem("userId");if(!X){N("No user found"),g(!1);return}const U=await te.get(`http://localhost:3001/user/saved-guests/${X}`);U.status===200?(a(U.data),f(U.data)):N("Failed to fetch saved guests")}catch{N("An error occurred while fetching saved guests")}finally{g(!1)}})()},[]),s.useEffect(()=>{(()=>{let X=t;u&&(X=t.filter(U=>{const S=u.toLowerCase();return U.name.toLowerCase().includes(S)||U.email.toLowerCase().includes(S)||U.phone.includes(S)})),f(X)})()},[u,t]),s.useLayoutEffect(()=>{const M=ce.current;if(!M)return;let X=window.pageYOffset,U=M.offsetHeight,S=window.innerHeight,l=document.documentElement.scrollHeight;const i=()=>{const T=window.pageYOffset,V=l-S,ee=T/V,ue=Math.min(U,Math.max(50,ee*U));T<X?M.style.transform=`translateY(calc(100% - ${ue}px))`:M.style.transform="translateY(calc(100% - 50px))",X=T},v=()=>{U=M.offsetHeight,S=window.innerHeight,l=document.documentElement.scrollHeight};return window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",v),v(),i(),()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",v)}},[]);const O=M=>{x(M.target.value)},ne=M=>{n(M),H({...M,errors:{}}),m(!0)},ie=()=>{m(!1),L(!1),n(null),H(null)},A=()=>{L(!0)},F=(M,X)=>{switch(M){case"name":return de.test(X)?"":"Invalid name format (letters only)";case"email":return re.test(X)?"":"Invalid email format";case"phone":return xe.test(X)?/^(\d)\1{9}$/.test(X)?"Phone number cannot consist of repeating digits.":"":"Phone number must be exactly 10 digits.";case"dob":const U=X.split("T")[0];return le.test(U)?"":"Invalid date of birth (YYYY-MM-DD)";case"proofNumber":return fe.test(X)?"":"Invalid proof number format";default:return""}},K=M=>{const{name:X,value:U}=M.target,S=F(X,U);H(l=>({...l,[X]:U,errors:{...l.errors,[X]:S}}))},R=async()=>{if(Object.values(C.errors).some(X=>X!=="")){console.error("Please correct the errors before saving");return}try{(await te.put(`http://localhost:3001/user/update-guest/${C._id}`,C)).status===200?(a(U=>U.map(S=>S._id===C._id?C:S)),L(!1),n(C)):console.error("Failed to update guest")}catch(X){console.error("Error updating guest:",X)}},I=async M=>{try{(await P.fire({title:"Delete Guest",text:"Are you sure you want to remove this guest? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed&&(P.fire({title:"Deleting Guest",text:"Please wait...",allowOutsideClick:!1,didOpen:()=>{P.showLoading()}}),(await te.delete(`http://localhost:3001/user/delete-guest/${j._id}`)).status===200&&(a(S=>S.filter(l=>l._id!==j._id)),ie(),await P.fire({icon:"success",title:"Guest Deleted",text:"The guest has been successfully removed",timer:1500,showConfirmButton:!1})))}catch(X){console.error("Error deleting guest:",X),P.fire({icon:"error",title:"Delete Failed",text:"Failed to delete guest. Please try again.",confirmButtonColor:"#3085d6"})}};return c?e.jsx("div",{children:"Loading..."}):o?e.jsx("div",{children:o}):e.jsxs("div",{children:[e.jsx("div",{className:"SavedGuestnav",children:e.jsx(ke,{})}),e.jsxs("div",{className:"saved-guests-container",children:[e.jsx("h2",{children:"Saved Guests"}),e.jsx("br",{}),e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone",value:u,onChange:O})}),d.length===0?e.jsx("p",{children:"No saved guests found."}):e.jsx("ul",{className:"saved-guests-list",children:d.slice(0,h).map(M=>e.jsx("li",{onClick:()=>ne(M),children:e.jsxs("div",{className:u?"filtered-guest":"guest-card",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",M.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",M.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",M.phone]})]})},M._id))}),e.jsxs("div",{className:"buttons-container",children:[h<d.length&&e.jsx("button",{className:"see-more-button",onClick:()=>p(h+3),children:"See More"}),h>3&&e.jsx("button",{className:"see-less-button",onClick:()=>p(3),children:"Show Less"})]})]}),e.jsx(bt,{open:_,onClose:ie,children:e.jsxs("div",{className:"guest-modal",children:[e.jsx(tt,{className:"close-icon",onClick:ie}),j&&e.jsxs("div",{children:[e.jsx("h2",{children:j.name}),k?e.jsxs("div",{children:[e.jsx(ge,{name:"name",label:"Name",value:C.name,onChange:K,fullWidth:!0,margin:"normal",error:!!C.errors.name,helperText:C.errors.name}),e.jsx(ge,{name:"email",label:"Email",value:C.email,onChange:K,fullWidth:!0,margin:"normal",error:!!C.errors.email,helperText:C.errors.email}),e.jsx(ge,{name:"phone",label:"Phone",value:C.phone,onChange:K,fullWidth:!0,margin:"normal",error:!!C.errors.phone,helperText:C.errors.phone}),e.jsx(ge,{name:"address",label:"Address",value:C.address,onChange:K,fullWidth:!0,margin:"normal",multiline:!0,rows:3}),e.jsx(ge,{name:"dob",label:"Date of Birth",type:"date",value:C.dob.split("T")[0],onChange:K,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},error:!!C.errors.dob,helperText:C.errors.dob}),e.jsxs(as,{fullWidth:!0,margin:"normal",children:[e.jsx(rs,{children:"Proof Type"}),e.jsxs(ns,{name:"proofType",value:C.proofType,onChange:K,children:[e.jsx(Je,{value:"passport",children:"Passport"}),e.jsx(Je,{value:"drivingLicense",children:"Driving License"}),e.jsx(Je,{value:"aadhar",children:"Aadhar"})]})]}),e.jsx(ge,{name:"proofNumber",label:"Proof Number",value:C.proofNumber,onChange:K,fullWidth:!0,margin:"normal",error:!!C.errors.proofNumber,helperText:C.errors.proofNumber}),e.jsx(pe,{onClick:R,variant:"contained",color:"primary",children:"Save Changes"})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",j.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",j.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",j.address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(j.dob).toLocaleDateString("en-GB")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Proof Type:"})," ",j.proofType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Proof Number:"})," ",j.proofNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Proof Document:"}),j.proofDocument&&e.jsx("img",{src:`${j.proofDocument}`,alt:"Proof Document",className:"proof-document-preview",onClick:()=>z(`${j.proofDocument}`)})]}),e.jsxs("div",{className:"button-group",children:[e.jsx(pe,{onClick:A,variant:"contained",color:"primary",startIcon:e.jsx(Zs,{}),sx:{mr:2},children:"Edit"}),e.jsx(pe,{onClick:()=>I(j._id),variant:"contained",color:"error",startIcon:e.jsx(Qs,{}),children:"Delete"})]})]})]})]})}),b&&e.jsx(bt,{open:!!b,onClose:()=>z(null),children:e.jsxs("div",{className:"full-screen-image-container",children:[e.jsx("img",{src:b,alt:"Full Screen Proof Document",className:"full-screen-image"}),e.jsx(tt,{className:"close-icon",onClick:()=>z(null)})]})}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})}const Mn=()=>localStorage.getItem("token")?e.jsx(Ks,{}):e.jsx(Js,{to:"/signup"}),vs=({item:t,onClose:a,menuItems:h=[]})=>{const p=s.useRef(null),c=s.useRef(null),g=s.useRef(null),o=s.useRef(null),N=s.useRef(null),u=s.useRef(null),x=s.useRef([]),d=s.useRef({isDragging:!1,selectedModel:null,plane:new Xs,raycaster:new ea,mouse:new ta,intersection:new Ht}),[f,j]=s.useState(!0),[n,_]=s.useState(null),[m,k]=s.useState([{...t,position:{x:0,y:0,z:-2},scale:1,rotation:{x:0,y:0,z:0}}]),[L,C]=s.useState(h.filter(S=>S.id!==t.id)||[]),[H,b]=s.useState(!1),[z,ce]=s.useState(0);s.useRef(null),s.useState(()=>{const S=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(S)});const de=(S,l)=>{const i=new ca,v=S.model3d||"/models/pizza.glb";i.load(v,T=>{const V=T.scene,ee=new da;V.position.set(0,0,0),ee.position.set(S.position.x,S.position.y,S.position.z),ee.scale.setScalar(S.scale),ee.add(V);const ue=fe(S.name,V);if(ee.add(ue),o.current){x.current[l]&&o.current.remove(x.current[l]),o.current.add(ee),x.current[l]=ee;const Q=()=>{ue&&N.current&&ue.lookAt(N.current.position)},B=()=>{requestAnimationFrame(B),Q()};B()}},void 0,T=>{console.error("Error loading model:",T)})},re=S=>{if(!N.current)return;const l=S.accelerationIncludingGravity;l&&Math.abs(l.z)>.5&&(N.current.position.z+=l.z*.005,N.current.position.z=sa.clamp(N.current.position.z,1,10),x.current.forEach((i,v)=>{if(i){const V=1+1/N.current.position.distanceTo(i.position);i.scale.setScalar(V*m[v].scale)}}))};s.useEffect(()=>((()=>{const l=new aa;o.current=l;const i=new ra(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.z=5,N.current=i;const v=new na({alpha:!0,antialias:!0});v.setSize(window.innerWidth,window.innerHeight),v.setClearColor(0,0),v.setPixelRatio(window.devicePixelRatio),g.current=v;const T=new ia(16777215,.5);l.add(T);const V=new oa(16777215,.8);V.position.set(10,10,5),l.add(V);const ee=new la(i,v.domElement);if(ee.enableDamping=!0,ee.dampingFactor=.05,ee.minDistance=1,ee.maxDistance=10,ee.enablePan=!0,ee.panSpeed=.5,ee.rotateSpeed=.5,ee.enableZoom=!0,u.current=ee,p.current){const q=v.domElement;q.style.position="absolute",q.style.top="0",q.style.left="0",q.style.zIndex="2",p.current.appendChild(q)}de(m[0],0);const ue=()=>{const q=window.innerWidth,oe=window.innerHeight;i.aspect=q/oe,i.updateProjectionMatrix(),v.setSize(q,oe)};window.addEventListener("resize",ue);const Q=()=>{requestAnimationFrame(Q),u.current&&u.current.update(),v.render(l,i)};Q();const B=v.domElement;return B.addEventListener("mousedown",ie),B.addEventListener("mousemove",A),B.addEventListener("mouseup",F),B.addEventListener("mouseleave",F),B.addEventListener("touchstart",K),B.addEventListener("touchmove",R),B.addEventListener("touchend",I),B.addEventListener("touchcancel",I),window.DeviceMotionEvent&&window.addEventListener("devicemotion",re),()=>{window.removeEventListener("resize",ue),window.removeEventListener("devicemotion",re),B.removeEventListener("mousedown",ie),B.removeEventListener("mousemove",A),B.removeEventListener("mouseup",F),B.removeEventListener("mouseleave",F),B.removeEventListener("touchstart",K),B.removeEventListener("touchmove",R),B.removeEventListener("touchend",I),B.removeEventListener("touchcancel",I),ee.dispose()}})(),()=>{if(g.current&&g.current.dispose(),o.current)for(;o.current.children.length>0;)o.current.remove(o.current.children[0]);u.current&&u.current.dispose()}),[]),s.useEffect(()=>{const S=async()=>{try{j(!0),_(null);const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.setAttribute("playsinline",""),l.style.width="100%",l.style.height="100%",l.style.objectFit="cover",c.current=l,p.current&&p.current.appendChild(l);const v={video:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?{facingMode:{exact:"environment"}}:{width:{ideal:1920},height:{ideal:1080}}},T=await navigator.mediaDevices.getUserMedia(v);l.srcObject=T,await new Promise(V=>{l.onloadedmetadata=()=>{l.play().then(V)}}),j(!1)}catch(l){console.error("Camera error:",l),P.fire({icon:"error",title:"Camera Access Required",html:`
            <div>
              <p>Please allow camera access to use AR view.</p>
              <p style="margin-top: 10px"><strong>Quick Fix:</strong></p>
              <ol style="text-align: left; margin-top: 10px">
                <li>Click the camera icon in your address bar</li>
                <li>Select "Allow" for camera access</li>
                <li>Refresh the page</li>
              </ol>
            </div>
          `,confirmButtonText:"Try Again",showCancelButton:!0,cancelButtonText:"Close"}).then(i=>{i.isConfirmed?S():a()})}};return S(),()=>{var l;(l=c.current)!=null&&l.srcObject&&c.current.srcObject.getTracks().forEach(i=>i.stop())}},[a]);const xe=()=>{_(null),j(!0),initCamera()},le=S=>{const l=m.length,i=2,v=Math.floor(l/2),T=l%2,V={...S,position:{x:T*i-i/2,y:0,z:-2-v*i},scale:1,rotation:{x:0,y:0,z:0}};k(ee=>[...ee,V]),C(ee=>ee.filter(ue=>ue.id!==S.id)),b(!1),de(V,m.length)},fe=(S,l,i)=>{const v=document.createElement("canvas"),T=v.getContext("2d");v.width=512,v.height=256,T.fillStyle="rgba(0, 0, 0, 0.85)",O(T,0,0,v.width,v.height,20),T.fill(),T.textAlign="center",T.textBaseline="middle",T.font="bold 48px Arial",T.fillStyle="#ffffff",T.fillText(S,v.width/2,50),T.font="28px Arial",["Calories: 266","Protein: 12g","Carbs: 34g","Fat: 12g"].forEach((oe,W)=>{T.fillText(oe,v.width/2,100+W*35)});const ee=new ha(v),ue=new ma({map:ee,transparent:!0,opacity:.95}),Q=new ua(ue),B=new xa().setFromObject(l),q=B.max.y-B.min.y;return Q.position.set(0,q+1,0),Q.scale.set(2.5,1.25,1),Q};function O(S,l,i,v,T,V){S.beginPath(),S.moveTo(l+V,i),S.lineTo(l+v-V,i),S.quadraticCurveTo(l+v,i,l+v,i+V),S.lineTo(l+v,i+T-V),S.quadraticCurveTo(l+v,i+T,l+v-V,i+T),S.lineTo(l+V,i+T),S.quadraticCurveTo(l,i+T,l,i+T-V),S.lineTo(l,i+V),S.quadraticCurveTo(l,i,l+V,i),S.closePath()}const ne=S=>{if(x.current[z]){const l=x.current[z].scale.x,i=Math.max(.5,Math.min(3,l*S));x.current[z].scale.setScalar(i),k(v=>{const T=[...v];return T[z]={...T[z],scale:i},T})}},ie=S=>{S.preventDefault();const l=S.target.getBoundingClientRect(),i=(S.clientX-l.left)/l.width*2-1,v=-((S.clientY-l.top)/l.height)*2+1;d.current.mouse.set(i,v),d.current.raycaster.setFromCamera(d.current.mouse,N.current);const T=d.current.raycaster.intersectObjects(x.current.filter(Boolean),!0);if(T.length>0){let V=T[0].object;for(;V.parent&&!x.current.includes(V);)V=V.parent;u.current&&(u.current.enabled=!1),d.current.isDragging=!0,d.current.selectedModel=V;const ee=new Ht;N.current.getWorldDirection(ee),d.current.plane.setFromNormalAndCoplanarPoint(ee,V.position)}},A=S=>{if(!d.current.isDragging||!d.current.selectedModel)return;const l=S.target.getBoundingClientRect(),i=(S.clientX-l.left)/l.width*2-1,v=-((S.clientY-l.top)/l.height)*2+1;if(d.current.mouse.set(i,v),d.current.raycaster.setFromCamera(d.current.mouse,N.current),d.current.raycaster.ray.intersectPlane(d.current.plane,d.current.intersection)){d.current.selectedModel.position.copy(d.current.intersection);const T=x.current.indexOf(d.current.selectedModel);T!==-1&&k(V=>{const ee=[...V];return ee[T]={...ee[T],position:{x:d.current.intersection.x,y:d.current.intersection.y,z:d.current.intersection.z}},ee})}},F=()=>{d.current.isDragging=!1,d.current.selectedModel=null,u.current&&(u.current.enabled=!0)},K=S=>{S.preventDefault();const l=S.touches[0];ie({preventDefault:()=>{},clientX:l.clientX,clientY:l.clientY,target:S.target})},R=S=>{const l=S.touches[0];A({clientX:l.clientX,clientY:l.clientY,target:S.target})},I=F,M=async()=>{try{typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?await DeviceMotionEvent.requestPermission()==="granted"&&window.addEventListener("devicemotion",re):window.addEventListener("devicemotion",re)}catch(S){console.error("Error requesting device motion permission:",S)}};s.useEffect(()=>(M(),()=>{window.removeEventListener("devicemotion",re)}),[]);const X=()=>h.length>1,U=()=>e.jsxs("div",{className:"ar-floating-menu",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"15px",padding:"20px",boxShadow:"0 8px 16px rgba(0,0,0,0.2)",maxWidth:"90%",width:"400px",maxHeight:"80vh",overflowY:"auto",zIndex:1001},children:[e.jsxs("div",{className:"ar-menu-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"10px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600"},children:"Add More Items to View"}),e.jsx("button",{onClick:()=>b(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:e.jsx(et,{})})]}),e.jsx("div",{className:"ar-menu-items",style:{display:"grid",gap:"15px"},children:L.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666",backgroundColor:"#f9f9f9",borderRadius:"10px"},children:"All items have been added to the AR view"}):L.map(S=>e.jsxs("div",{className:"ar-menu-item",onClick:()=>le(S),style:{display:"flex",flexDirection:"column",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease",":hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[e.jsx("img",{src:S.image||"/images/default-food.png",alt:S.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px",marginRight:"15px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"500",marginBottom:"4px"},children:S.name}),e.jsxs("div",{style:{color:"#4CAF50",fontWeight:"600"},children:["â‚¹",S.price.toFixed(2)]})]}),e.jsx(nt,{style:{color:"#2196F3",marginLeft:"10px"}})]}),e.jsx("div",{style:{backgroundColor:"#fff",padding:"10px",borderRadius:"8px",marginTop:"5px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[e.jsxs("div",{style:{color:"#666"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Calories:"})," ",S.calories||"N/A"]}),e.jsxs("div",{style:{color:"#666"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Protein:"})," ",S.protein||"N/A","g"]}),e.jsxs("div",{style:{color:"#666"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Carbs:"})," ",S.carbs||"N/A","g"]}),e.jsxs("div",{style:{color:"#666"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Fat:"})," ",S.fat||"N/A","g"]})]})})]},S.id))})]});return s.useEffect(()=>{console.log("Available items:",L),console.log("Menu items:",h)},[L,h]),e.jsxs("div",{className:"ar-view-container",children:[e.jsx("button",{className:"ar-close-btn",onClick:a,children:e.jsx(et,{})}),e.jsx("div",{className:"ar-scene-container",ref:p,children:e.jsx("canvas",{className:"ar-canvas"})}),f&&e.jsxs("div",{className:"ar-loading-overlay",children:[e.jsx("div",{className:"ar-spinner"}),e.jsx("p",{children:"Initializing AR view..."})]}),n&&e.jsxs("div",{className:"ar-error",children:[e.jsx("p",{children:n}),e.jsxs("div",{className:"ar-error-buttons",children:[e.jsx("button",{onClick:xe,className:"retry-btn",children:"Try Again"}),e.jsx("button",{onClick:a,className:"close-btn",children:"Close AR View"})]})]}),!f&&!n&&e.jsxs(e.Fragment,{children:[X()&&L.length>0&&e.jsxs("button",{onClick:()=>b(!H),style:{position:"fixed",bottom:"160px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#2196F3",color:"white",padding:"12px 24px",borderRadius:"25px",border:"none",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"16px",fontWeight:"500",zIndex:1e3,width:"auto",minWidth:"200px",justifyContent:"center"},children:[e.jsx(nt,{})," Add More Items (",L.length," available)"]}),e.jsx("div",{className:"ar-controls",children:e.jsxs("div",{className:"ar-item-controls",children:[e.jsx("button",{className:"ar-control-btn",onClick:()=>ne(1.2),children:e.jsx(nt,{})}),e.jsx("button",{className:"ar-control-btn",onClick:()=>ne(.8),children:e.jsx(us,{})})]})}),H&&e.jsx(U,{})]}),e.jsxs("div",{className:"ar-instructions",children:[e.jsx("p",{children:"Move device closer or further to zoom"}),e.jsx("p",{children:"Tap and drag to move items"}),e.jsx("p",{children:"Use two fingers to rotate view"}),e.jsx("p",{children:"Use + and - buttons to adjust base size"}),X()&&L.length>0&&e.jsx("p",{style:{color:"#4CAF50",fontWeight:"bold"},children:"Tap the green + button to add more items"})]})]})},On=({addToCart:t})=>{const[a,h]=s.useState([]),[p,c]=s.useState([]),[g,o]=s.useState("all"),[N,u]=s.useState(""),[x,d]=s.useState(!0),[f,j]=s.useState(null),n=localStorage.getItem("token"),[_,m]=s.useState(null),[k,L]=s.useState(!1),[C,H]=s.useState(null);s.useState(!1),s.useState(null),s.useRef(null);const[b,z]=s.useState(!1),[ce,de]=s.useState(null),[re,xe]=s.useState(!1),[le,fe]=s.useState(!1),[O,ne]=s.useState(null),ie=s.useRef(null);s.useEffect(()=>{(async()=>{try{d(!0),j(null);const i=await te.get("http://localhost:3001/user/restaurant/menuitems");h(Array.isArray(i.data)?i.data:[]),console.log("menuResponse",i.data);const v=await te.get("http://localhost:3001/user/restaurant/categoriess");c(Array.isArray(v.data)?v.data:[])}catch(i){console.error("Error fetching data:",i),j("Failed to load menu data. Please try again later."),h([]),c([])}finally{d(!1)}})()},[]);const A=Array.isArray(a)?a.filter(l=>{const i=g==="all"||l.category===g,v=l.name.toLowerCase().includes(N.toLowerCase())||l.description.toLowerCase().includes(N.toLowerCase());return i&&v}):[],F=()=>{try{const l=localStorage.getItem("token");return l?Qe(l)._id:null}catch(l){return console.error("Error decoding token:",l),null}},K=async l=>{var i,v;try{const T=F();if(!T){P.fire({icon:"error",title:"Authentication Required",text:"Please login to add items to cart",showConfirmButton:!0,position:"center"});return}const V={itemTitle:l.name,image:l.image,rating:l.rating||5,price:l.price,quantity:1,subTotal:l.price,menuItemId:l._id,availableQuantity:l.availableQuantity||100,userId:T,specialInstructions:""};(await te.post("http://localhost:3001/user/restaurant/cart/add",V)).data.success&&P.fire({icon:"success",title:"Added to Cart!",text:`${l.name} has been added to your cart`,showConfirmButton:!1,timer:2500,position:"top-end",toast:!0,background:"#4caf50",color:"#fff",customClass:{popup:"colored-toast"}})}catch(T){console.error("Error adding to cart:",T),P.fire({icon:"error",title:"Oops...",text:((v=(i=T.response)==null?void 0:i.data)==null?void 0:v.message)||"Failed to add item to cart",showConfirmButton:!0,position:"center",background:"#fff",confirmButtonColor:"#4caf50"})}},R=async(l,i)=>{var v,T;try{const V=new It(i),ee=V.getGenerativeModel({model:"gemini-1.5-pro-latest"});try{const q=(await(await ee.generateContent({contents:[{parts:[{text:l}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})).response).text().replace(/```json\s*|\s*```/g,"").replace(/^\s+|\s+$/g,"");try{return JSON.parse(q)}catch(oe){throw console.error("JSON Parse Error:",oe),new Error("Failed to parse AI response as JSON")}}catch(ue){if((v=ue.message)!=null&&v.includes("not found")||(T=ue.message)!=null&&T.includes("404")){console.log("Falling back to gemini-pro");const oe=(await(await V.getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:l}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})).response).text().replace(/```json\s*|\s*```/g,"").replace(/^\s+|\s+$/g,"");return JSON.parse(oe)}throw ue}}catch(V){throw console.error("Generation error:",V),V}},I=async l=>{L(!0),H(l);try{const i=`Generate a JSON object with detailed culinary information about "${l}". Return ONLY the JSON object with no additional text or formatting. The JSON structure should be:
      {
        "origin": {
          "country": "country name",
          "region": "region name",
          "history": "brief history"
        },
        "ingredients": {
          "mainIngredients": ["ingredient1", "ingredient2"],
          "spicesAndHerbs": ["spice1", "spice2"],
          "alternatives": ["alt1", "alt2"]
        },
        "nutrition": {
          "calories": "number per serving",
          "protein": "grams per serving",
          "carbs": "grams per serving",
          "fats": "grams per serving",
          "vitamins": ["vitamin1", "vitamin2"],
          "minerals": ["mineral1", "mineral2"]
        },
        "dietaryInfo": {
          "isVegetarian": true or false,
          "isVegan": true or false,
          "isGlutenFree": true or false,
          "allergens": ["allergen1", "allergen2"]
        }
      }`,v="AIzaSyD3IRHNvEArziuMOFYQcO1NUO0fbWB1Jd0",T=await R(i,v);m(T)}catch(i){console.error("Error fetching dish information:",i),P.fire({icon:"error",title:"Error Fetching Information",text:"Unable to get dish information at this time. Please try again later.",footer:null})}finally{L(!1)}},M=()=>{m(null),H(null)},X=({info:l,onClose:i,dishName:v})=>l?e.jsx("div",{className:"dish-info-popup",children:e.jsxs("div",{className:"popup-content",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(et,{size:24})}),e.jsxs("div",{className:"text-center mb-6 popup-header",children:[e.jsx(qt,{className:"mx-auto text-4xl text-orange-500 mb-2"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:v}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Dish Information"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(qt,{className:"mx-auto text-4xl text-orange-500 mb-2"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Dish Information"})]}),e.jsxs("section",{className:"info-section section-origin",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ja,{className:"section-icon text-blue-500"}),e.jsx("h3",{children:"Origin & History"})]}),e.jsx("div",{className:"ml-7",children:e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Country:"})," ",l.origin.country,e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"Region:"})," ",l.origin.region,e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"History:"})," ",l.origin.history]})})]}),e.jsxs("section",{className:"info-section section-ingredients",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(va,{className:"section-icon text-green-500"}),e.jsx("h3",{children:"Ingredients"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 ml-7",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Main Ingredients:"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:l.ingredients.mainIngredients.map((T,V)=>e.jsx("li",{children:T},V))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Spices & Herbs:"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:l.ingredients.spicesAndHerbs.map((T,V)=>e.jsx("li",{children:T},V))})]})]})]}),e.jsxs("section",{className:"info-section section-nutrition",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ya,{className:"section-icon text-purple-500"}),e.jsx("h3",{children:"Nutrition Facts"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 ml-7",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Calories:"})," ",l.nutrition.calories]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Protein:"})," ",l.nutrition.protein]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Carbs:"})," ",l.nutrition.carbs]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Fats:"})," ",l.nutrition.fats]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Vitamins & Minerals:"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:l.nutrition.vitamins.map((T,V)=>e.jsx("li",{children:T},V))})]})]})]}),e.jsxs("section",{className:"info-section section-dietary",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ba,{className:"section-icon text-yellow-600"}),e.jsx("h3",{children:"Dietary Information"})]}),e.jsxs("div",{className:"ml-7",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-3",children:[l.dietaryInfo.isVegetarian&&e.jsxs("span",{className:"bg-green-100 text-green-800 px-4 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(it,{})," Vegetarian"]}),l.dietaryInfo.isVegan&&e.jsxs("span",{className:"bg-green-100 text-green-800 px-4 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(it,{})," Vegan"]}),l.dietaryInfo.isGlutenFree&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-4 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Wt,{})," Gluten Free"]})]}),l.dietaryInfo.allergens.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-2",children:[e.jsx(wa,{}),e.jsx("h4",{className:"font-medium",children:"Allergens:"})]}),e.jsx("p",{className:"text-gray-700",children:l.dietaryInfo.allergens.join(", ")})]})]})]})]})]})}):null,U=async l=>{if(!l.image){P.fire({icon:"error",title:"Cannot Show in AR",text:"This item does not have an image available.",showConfirmButton:!0,position:"center"});return}xe(!0);try{de({...l,modelPath:"/models/pizza.glb"}),z(!0)}catch(i){console.error("Error preparing AR view:",i),P.fire({icon:"error",title:"AR View Failed",text:"Could not initialize AR view. Please try again.",showConfirmButton:!0,position:"center"})}finally{xe(!1)}},S=async l=>{const i=l.target.files[0];if(i){fe(!0),ne(null),u("");try{const v=new FormData;v.append("image",i);const T=await te.post("http://localhost:3001/api/image-recognition/recognize-food",v,{headers:{"Content-Type":"multipart/form-data"}});if(T.data.success){const V=T.data.category.split(",")[0].trim(),ee=a.filter(ue=>ue.name.toLowerCase().includes(V.toLowerCase())||ue.description.toLowerCase().includes(V.toLowerCase()));console.log("Recognized food:",V),console.log("Matching items found:",ee.length),ee.length===0?ne("No matching menu items found"):(u(V),P.fire({icon:"success",title:"Food Recognized!",text:`Looks like ${V}. Showing matching items...`,timer:2e3,showConfirmButton:!1}))}else throw new Error("Recognition failed")}catch(v){console.error("Food recognition error:",v),ne("Failed to recognize food. Please try again."),P.fire({icon:"error",title:"Recognition Failed",text:"Unable to recognize the food in the image. Please try again.",showConfirmButton:!0})}finally{fe(!1),ie.current&&(ie.current.value="")}}};return x?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading menu..."})]}):f?e.jsxs("div",{className:"error-container",children:[e.jsx("p",{className:"error-message",children:f}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),!n&&e.jsx("div",{className:"login-prompt-banner",children:e.jsxs("div",{className:"banner-content",children:[e.jsx(wt,{className:"banner-icon"}),e.jsxs("p",{children:["Please ",e.jsx("a",{href:"/signup",children:"login"})," to add items to your cart"]})]})}),e.jsxs("div",{className:"menu-display",children:[e.jsx("div",{className:"menu-banner",children:e.jsxs("div",{className:"banner-overlay",children:[e.jsx("h1",{children:"Our Menu"}),e.jsx("p",{children:"Discover our delicious offerings"})]})}),e.jsxs("div",{className:"menu-container",children:[e.jsxs("div",{className:"search-filter-section",children:[e.jsxs("div",{className:"search-bar-container",children:[e.jsxs("div",{className:"search-bar",children:[e.jsx(pa,{}),e.jsx("input",{type:"text",placeholder:"Search menu...",value:N,onChange:l=>u(l.target.value)})]}),e.jsxs("div",{className:"image-recognition",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",ref:ie,id:"imageRecognitionInput"}),e.jsx("button",{onClick:()=>{var l;return(l=ie.current)==null?void 0:l.click()},className:"image-recognition-btn",disabled:le,title:"Recognize food from image",children:le?e.jsx(pt,{className:"animate-spin"}):e.jsx(ga,{})})]})]}),O&&e.jsx("div",{className:"text-red-500 text-sm mt-2",children:O}),e.jsxs("div",{className:"category-filter",children:[e.jsx("button",{className:g==="all"?"active":"",onClick:()=>o("all"),children:"All"}),p.map(l=>e.jsx("button",{className:g===l?"active":"",onClick:()=>o(l),children:l},l))]})]}),e.jsx("div",{className:"menu-items-grid",children:A.length>0?A.map(l=>e.jsxs("div",{className:"menu-item",children:[e.jsxs("div",{className:"item-image-wrapper",children:[e.jsx("img",{src:l.image,alt:l.name,className:"menu-image",onError:i=>{i.target.src="/default-food-image.jpg"}}),e.jsx("div",{className:"food-type-indicator",children:l.foodtype==="Veg"?e.jsx("div",{className:"veg-icon",children:e.jsx(it,{style:{color:"green"}})}):e.jsx("div",{className:"non-veg-icon",children:e.jsx(Wt,{style:{color:"red"}})})})]}),e.jsxs("div",{className:"item-content",children:[e.jsxs("div",{className:"item-header",children:[e.jsx("h3",{children:l.name}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{onClick:()=>I(l.name),className:"info-btn",disabled:k,children:k?e.jsx(pt,{className:"animate-spin"}):e.jsx(xs,{})}),e.jsx("button",{onClick:()=>U(l),className:"ar-btn",disabled:re,children:re?e.jsx(pt,{className:"animate-spin"}):e.jsx(fa,{})})]})]}),e.jsx("p",{className:"item-description",children:l.description}),e.jsxs("div",{className:"item-footer",children:[e.jsxs("span",{className:"price",children:["â‚¹",l.price.toFixed(2)]}),n&&e.jsxs("button",{onClick:()=>K(l),className:"add-to-cart-btn",id:"add",children:[e.jsx(wt,{})," Add"]})]})]})]},l._id)):e.jsx("div",{className:"no-items-message",children:e.jsx("p",{children:"No menu items found. Please try a different search or category."})})})]})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})}),_&&e.jsx(X,{info:_,onClose:M,dishName:C}),b&&ce&&e.jsx(vs,{item:ce,onClose:()=>{z(!1),de(null)}})]})},$n=()=>{Me();const t=Se(),[a,h]=s.useState([]),[p,c]=s.useState(!0),[g,o]=s.useState({}),[N,u]=s.useState({}),[x,d]=s.useState(""),[f,j]=s.useState({preferredTime:"",tableLocation:"",numberOfGuests:1}),[n,_]=s.useState([]),[m,k]=s.useState(null),[L,C]=s.useState(!1),[H,b]=s.useState([]),[z,ce]=s.useState(""),[de,re]=s.useState(""),[xe,le]=s.useState(""),[fe,O]=s.useState(!1),ne=()=>{try{const i=localStorage.getItem("token");return i?Qe(i)._id:null}catch(i){return console.error("Error decoding token:",i),null}},ie=async()=>{try{c(!0);const i=ne();if(!i)throw new Error("User not authenticated");const v=await te.get(`http://localhost:3001/user/restaurant/cart/${i}`);console.log("API Response:",v.data),h(v.data.data.items)}catch(i){console.error("Error fetching cart:",i),P.fire({icon:"error",title:"Error",text:"Failed to load cart items"})}finally{c(!1)}};s.useEffect(()=>{ie()},[]),s.useEffect(()=>{console.log("Cart Items:",a)},[a]);const A=async(i,v)=>{try{const T=a.find(V=>V._id===i);if(!T)return;if(v<1||v>T.menuItemId.availableQuantity){P.fire({icon:"warning",title:"Invalid Quantity",text:v>T.menuItemId.availableQuantity?`Only ${T.menuItemId.availableQuantity} items available`:"Minimum quantity is 1"});return}await te.put(`http://localhost:3001/user/restaurant/cart/update/${i}`,{quantity:v}),ie()}catch(T){console.error("Error updating quantity:",T),P.fire({icon:"error",title:"Error",text:"Failed to update quantity"})}},F=async i=>{console.log("Removing item:",i);try{(await P.fire({title:"Remove Item?",text:"Are you sure you want to remove this item from your cart?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, remove it!"})).isConfirmed&&(await te.delete(`http://localhost:3001/user/restaurant/cart/remove/${i}`),P.fire("Removed!","Item has been removed from cart.","success"),ie())}catch(v){console.error("Error removing item:",v),P.fire({icon:"error",title:"Error",text:"Failed to remove item from cart"})}},K=()=>a.reduce((i,v)=>i+(v.subTotal||0),0),R=()=>K()*.1,I=()=>K()+R(),M=()=>new Promise(i=>{const v=document.createElement("script");v.src="https://checkout.razorpay.com/v1/checkout.js",v.onload=()=>{i(!0)},v.onerror=()=>{i(!1)},document.body.appendChild(v)});s.useEffect(()=>{(async()=>{if(x==="delivery")try{O(!0);const v=ne(),T=await te.get(`http://localhost:3001/user/booked-rooms/${v}`);b(T.data.data),console.log("Booked rooms:",T.data.data)}catch(v){console.error("Error fetching booked rooms:",v),P.fire({icon:"error",title:"Error",text:"Failed to load booked rooms"})}finally{O(!1)}})()},[x]);const X=i=>{const v=i.target.value,T=H.find(V=>V.room_id.roomno===v);T?(ce(v),re(T.room_id._id),console.log("selectedRoomId",T.room_id._id),le(T._id),console.log("selectedRoomReservationId",T._id)):(ce(""),re(""),le(""))},U=async()=>{if(a.length===0){P.fire({icon:"warning",title:"Empty Cart",text:"Please add items to your cart before checking out"});return}if(!x){P.fire({icon:"warning",title:"Select Order Type",text:"Please select whether you want Dine-in, Takeaway, or Delivery"});return}if(x==="dine-in"&&!m&&(!f.preferredTime||!f.tableLocation||!f.numberOfGuests)){P.fire({icon:"warning",title:"Incomplete Dining Preferences",text:"Please select a reservation or fill in your dining preferences"});return}if(x==="delivery"&&!z){P.fire({icon:"warning",title:"Room Selection Required",text:"Please select your room number for delivery"});return}try{if(!await M())throw new Error("Razorpay SDK failed to load");const v=ne(),T={amount:I()*100,cartItems:a,orderType:x,userId:v,...x==="dine-in"&&{dineInDetails:m?{reservationId:m._id,date:m.date,time:m.time,tableNumber:m.tableNumber,numberOfGuests:m.numberOfGuests}:f},...x==="delivery"&&{deliveryDetails:{roomNumber:z,room_id:de,reservationId:xe}}},V=await te.post("http://localhost:3001/user/restaurant/create-order",T),ee={key:"rzp_test_kcqNw37pFm1tK2",amount:V.data.amount,currency:"INR",name:"Restaurant Name",description:`Food Order Payment - ${x.toUpperCase()}`,order_id:V.data.id,handler:async function(Q){try{const{data:B}=await te.post("http://localhost:3001/user/restaurant/verify-payment",{razorpay_payment_id:Q.razorpay_payment_id,razorpay_order_id:Q.razorpay_order_id,razorpay_signature:Q.razorpay_signature,userId:v});B.success&&(console.log("data",f),await te.post("http://localhost:3001/user/restaurant/orders",{userid:v,cartItems:a,paymentDetails:Q,totalAmount:I(),specialInstructions:g,orderType:x,...x==="dine-in"&&{dineInDetails:m?{reservationId:m._id,date:m.date,time:m.time,tableNumber:m.tableNumber,numberOfGuests:m.numberOfGuests}:f},...x==="delivery"&&{deliveryDetails:{roomNumber:z,room_id:de,reservationId:xe}}}),h([]),P.fire({icon:"success",title:"Order Placed Successfully!",text:x==="dine-in"?`Your table is reserved for ${m?m.time:f.preferredTime}`:"Thank you for your order"}),t("/restaurant/orders"))}catch(B){console.error("Payment verification failed:",B),P.fire({icon:"error",title:"Payment Failed",text:"There was an error processing your payment"})}},prefill:{name:"Customer Name",email:"customer@example.com",contact:"9999999999"},theme:{color:"#3399cc"},notes:{orderType:x,...x==="dine-in"&&{dineInDetails:m?`Table: ${m.tableNumber}, Time: ${m.time}, Guests: ${m.numberOfGuests}`:`Table: ${f.tableLocation}, Time: ${f.preferredTime}, Guests: ${f.numberOfGuests}`},...x==="delivery"&&{deliveryDetails:`Room: ${z}`}}};new window.Razorpay(ee).open()}catch(i){console.error("Checkout failed:",i),P.fire({icon:"error",title:"Checkout Failed",text:i.message||"There was an error processing your checkout"})}},S=i=>{u(v=>({...v,[i]:!v[i]}))},l=()=>{const i=[];for(let V=11;V<=23;V++)i.push(`${V}:00`),i.push(`${V}:30`);return i};return s.useEffect(()=>{(async()=>{if(x==="dine-in")try{C(!0);const v=ne(),T=await te.get(`http://localhost:3001/user/restaurant/reservations/${v}`),V=new Date,ee=T.data.data.reservations.filter(ue=>new Date(ue.reservationDate)>=V);_(ee)}catch(v){console.error("Error fetching reservations:",v),P.fire({icon:"error",title:"Error",text:"Failed to load table reservations"})}finally{C(!1)}})()},[x]),p?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading cart..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Shopping Cart",subtitle:"Review your items"})}),e.jsxs("div",{className:"cart-container",children:[e.jsxs("h2",{children:[e.jsx(wt,{})," Your Cart"]}),a.length===0?e.jsxs("div",{className:"empty-cart",children:[e.jsx("p",{children:"Your cart is empty"}),e.jsx("button",{onClick:()=>t("/restaurant/menu"),className:"view-menu-btn",children:"View Menu"})]}):e.jsxs("div",{className:"cart-layout",children:[e.jsx("div",{className:"cart-items-section",children:a.map(i=>{var v,T,V,ee,ue,Q;return e.jsxs("div",{className:"cart-item",children:[e.jsx("div",{className:"item-image",children:e.jsx("img",{src:i.menuItemId.image,alt:i.itemTitle})}),e.jsxs("div",{className:"item-content",children:[e.jsx("div",{className:"item-header",children:e.jsxs("div",{className:"item-title-row",children:[e.jsx("h3",{children:(v=i.menuItemId)==null?void 0:v.name}),e.jsxs("div",{className:"item-badges",children:[e.jsx("span",{className:`food-type-badge ${(((T=i.menuItemId)==null?void 0:T.foodType)||"Veg").toLowerCase()}`,children:((V=i.menuItemId)==null?void 0:V.foodType)==="Non-Veg"?e.jsx(Na,{className:"food-icon non-veg-icon"}):e.jsx(it,{className:"food-icon veg-icon"})}),e.jsx("span",{className:"item-category",children:(ee=i.menuItemId)==null?void 0:ee.category})]})]})}),e.jsx("p",{className:"item-description",children:(ue=i.menuItemId)==null?void 0:ue.description}),e.jsxs("div",{className:"price-quantity-section",children:[e.jsxs("div",{className:"price-section",children:[e.jsxs("p",{className:"item-price",children:["â‚¹",(((Q=i.menuItemId)==null?void 0:Q.price)||0).toFixed(2)]}),e.jsxs("p",{className:"item-subtotal",children:["Subtotal: â‚¹",(i.subTotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"quantity-section",children:[e.jsx("label",{children:"Quantity:"}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{onClick:()=>A(i._id,i.quantity-1),className:"quantity-btn",disabled:i.quantity<=1,children:e.jsx(us,{})}),e.jsx("span",{className:"quantity",children:i.quantity||0}),e.jsx("button",{onClick:()=>A(i._id,i.quantity+1),className:"quantity-btn",disabled:i.quantity>=i.menuItemId.availableQuantity,children:e.jsx(nt,{})})]})]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{onClick:()=>S(i._id),className:"instructions-toggle-btn",children:N[i._id]?"Hide Instructions":"Add Instructions"}),N[i._id]&&e.jsx("textarea",{placeholder:"Special instructions...",value:g[i._id]||"",onChange:B=>o(q=>({...q,[i._id]:B.target.value})),className:"special-instructions"}),e.jsxs("button",{onClick:()=>F(i._id),className:"remove-btn",children:[e.jsx(Ca,{})," Remove"]})]})]})]},i._id)})}),e.jsx("div",{className:"checkout-section",children:e.jsxs("div",{className:"cart-summary",children:[e.jsx("h3",{children:"Order Summary"}),e.jsxs("div",{className:"order-type-selection",children:[e.jsx("h4",{children:"Select Order Type:"}),e.jsxs("div",{className:"order-type-buttons",children:[e.jsxs("button",{className:`order-type-btn ${x==="dine-in"?"active":""}`,onClick:()=>d("dine-in"),children:[e.jsx("i",{className:"fas fa-utensils"}),"Dine In"]}),e.jsxs("button",{className:`order-type-btn ${x==="takeaway"?"active":""}`,onClick:()=>d("takeaway"),children:[e.jsx("i",{className:"fas fa-shopping-bag"}),"Takeaway"]}),e.jsxs("button",{className:`order-type-btn ${x==="delivery"?"active":""}`,onClick:()=>d("delivery"),children:[e.jsx("i",{className:"fas fa-motorcycle"}),"Delivery"]})]})]}),x==="dine-in"&&e.jsxs("div",{className:"dine-in-section",children:[e.jsx("h5",{children:"Your Reservations"}),L?e.jsx("div",{className:"loading-spinner",children:"Loading reservations..."}):n.length>0?e.jsx("div",{className:"reservations-list",children:n.map(i=>e.jsxs("div",{className:`reservation-card ${(m==null?void 0:m._id)===i._id?"selected":""}`,onClick:()=>k(i),children:[e.jsxs("div",{className:"reservation-header",children:[e.jsx("span",{className:"reservation-date",children:new Date(i.reservationDate).toLocaleDateString()}),e.jsx("span",{className:"reservation-time",children:i.time})]}),e.jsxs("div",{className:"reservation-details",children:[e.jsxs("span",{children:["Table ",i.tableNumber]}),e.jsxs("span",{children:[i.numberOfGuests," Guests"]})]}),(m==null?void 0:m._id)===i._id&&e.jsxs("div",{className:"selected-indicator",children:[e.jsx("i",{className:"fas fa-check-circle"})," Selected"]})]},i._id))}):e.jsxs("div",{className:"no-reservations",children:[e.jsx("p",{children:"No upcoming reservations found"}),e.jsx("button",{onClick:()=>t("/restaurant/reservations"),className:"make-reservation-btn",children:"Make a Reservation"})]}),!m&&e.jsxs("div",{className:"manual-preferences",children:[e.jsx("h6",{children:"Or Enter Dining Preferences"}),e.jsxs("div",{className:"preference-inputs",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Preferred Time"}),e.jsxs("select",{value:f.preferredTime,onChange:i=>j(v=>({...v,preferredTime:i.target.value})),children:[e.jsx("option",{value:"",children:"Select Time"}),l().map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Number of Guests"}),e.jsx("input",{type:"number",min:"1",max:"10",value:f.numberOfGuests,onChange:i=>j(v=>({...v,numberOfGuests:Math.max(1,parseInt(i.target.value)||1)}))})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Table Location"}),e.jsxs("select",{value:f.tableLocation,onChange:i=>j(v=>({...v,tableLocation:i.target.value})),children:[e.jsx("option",{value:"",children:"Select Location"}),["Window Side","Garden View","Indoor","Outdoor","Private Area"].map(i=>e.jsx("option",{value:i,children:i},i))]})]})]})]})]}),x==="delivery"&&e.jsxs("div",{className:"delivery-section",children:[e.jsx("h5",{children:"Select Delivery Room"}),fe?e.jsx("div",{className:"loading-spinner",children:"Loading rooms..."}):H.length>0?e.jsxs("div",{className:"room-selection",children:[e.jsxs("select",{value:z,onChange:X,className:"room-select",children:[e.jsx("option",{value:"",children:"Select Room"}),H.map(i=>e.jsxs("option",{value:i.room_id.roomno,children:["Room ",i.room_id.roomno,"(Booking until ",new Date(i.check_out).toLocaleDateString(),")"]},i._id))]}),z&&e.jsxs("div",{className:"selected-room-info",children:[e.jsxs("p",{children:["Selected Room: ",z]}),e.jsxs("p",{children:["Booking ID: ",de]})]})]}):e.jsxs("div",{className:"no-rooms",children:[e.jsx("p",{children:"No active room bookings found"}),e.jsx("p",{children:"Please book a room first or choose another order type"})]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["â‚¹",K().toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Tax (10%):"}),e.jsxs("span",{children:["â‚¹",R().toFixed(2)]})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["â‚¹",I().toFixed(2)]})]}),e.jsx("button",{onClick:U,className:"checkout-btn",disabled:!x,children:"Proceed to Checkout"})]})})]})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},Gn=()=>e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})}),ft=t=>{const a=new Date(t),h=a.getDate().toString().padStart(2,"0"),p=(a.getMonth()+1).toString().padStart(2,"0"),c=a.getFullYear(),g=a.getHours().toString().padStart(2,"0"),o=a.getMinutes().toString().padStart(2,"0"),N=g>=12?"PM":"AM",u=g%12||12;return`${h}-${p}-${c} at ${u}:${o} ${N}`},Vn=()=>{const[t,a]=s.useState([]),[h,p]=s.useState(!0),[c,g]=s.useState("all"),o=()=>{try{const n=localStorage.getItem("token");return n?Qe(n)._id:null}catch(n){return console.error("Error decoding token:",n),null}};s.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const n=o(),_=await te.get(`http://localhost:3001/user/restaurant/my-orders/${n}`);console.log("response",_.data.data),a(Array.isArray(_.data.data)?_.data.data:[])}catch(n){console.error("Error fetching orders:",n),a([])}finally{p(!1)}},u=n=>({pending:"#ffd700",confirmed:"#1e90ff",preparing:"#ff8c00",ready:"#32cd32",delivered:"#008000",cancelled:"#ff0000"})[n]||"#808080",x=Array.isArray(t)?t.filter(n=>c==="all"?!0:n.status===c):[],d=n=>{switch(n==null?void 0:n.toLowerCase()){case"dine-in":return e.jsx(Da,{className:"order-type-icon dine-in"});case"takeaway":return e.jsx(Ra,{className:"order-type-icon takeaway"});case"delivery":return e.jsx(Yt,{className:"order-type-icon delivery"});default:return e.jsx(Ia,{className:"order-type-icon"})}},f=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"N/A",j=async n=>{var _,m;try{if((await P.fire({title:"Non-Refundable Cancellation",html:`
          <div class="cancellation-warning">
            <p>Please note:</p>
            <ul>
              <li>Order cancellation is non-refundable</li>
              <li>Payment amount will not be returned</li>
              <li>This action cannot be undone</li>
            </ul>
          </div>
        `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Proceed with Cancellation",cancelButtonText:"Keep Order",reverseButtons:!0})).isConfirmed&&(await P.fire({title:"Confirm Cancellation",text:"Are you sure you want to cancel this order?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Cancel Order",cancelButtonText:"No, Keep Order",reverseButtons:!0})).isConfirmed){P.fire({title:"Cancelling Order",text:"Please wait...",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1,didOpen:()=>{P.showLoading()}});const C=o(),H=await te.put(`http://localhost:3001/user/restaurant/orders/cancel/${n}`,{userId:C},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(H.data.success)await P.fire({title:"Order Cancelled",text:"Your order has been successfully cancelled",icon:"success",timer:2e3,showConfirmButton:!1}),N();else throw new Error(H.data.message||"Failed to cancel order")}}catch(k){console.error("Error cancelling order:",k),await P.fire({title:"Cancellation Failed",text:((m=(_=k.response)==null?void 0:_.data)==null?void 0:m.message)||"Failed to cancel order. Please try again.",icon:"error",confirmButtonColor:"#3085d6"})}};return h?e.jsx(Gn,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),e.jsxs("div",{className:"order-history-container",children:[e.jsxs("h2",{children:[e.jsx(Sa,{})," Order History"]}),e.jsx("div",{className:"filter-buttons",children:["all","pending","confirmed","preparing","ready","delivered","cancelled"].map(n=>e.jsx("button",{className:`filter-btn ${c===n?"active":""}`,onClick:()=>g(n),children:n.charAt(0).toUpperCase()+n.slice(1)},n))}),x.length===0?e.jsx("div",{className:"no-orders",children:"No orders found"}):e.jsx("div",{className:"orders-grid",children:x.map(n=>{var _;return e.jsxs("div",{className:"order-card",children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("span",{className:"order-id",children:["Order #",n._id.slice(-6)]}),e.jsx("span",{className:"order-status",style:{backgroundColor:u(n.status)},children:n.status})]}),e.jsxs("div",{className:"order-details",children:[e.jsxs("div",{className:"detail-item items-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ct,{}),e.jsx("span",{children:"Order Items:"})]}),e.jsx("div",{className:"items-grid",children:n.items.map(m=>e.jsxs("div",{className:"order-item",children:[e.jsx("div",{className:"item-image-container",children:e.jsx("img",{src:m.menuItem.image,alt:m.menuItem.name,className:"item-image",onError:k=>{k.target.src="/default-food-image.png",k.target.onerror=null},loading:"lazy"})}),e.jsxs("div",{className:"item-info",children:[e.jsx("span",{className:"item-name",children:m.menuItem.name}),e.jsxs("span",{className:"item-quantity",children:["Qty: ",m.quantity]})]})]},m._id))})]}),n.tablereservation_id&&e.jsxs("div",{className:"detail-item reservation-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ot,{}),e.jsx("span",{children:"Table Reservation Details:"})]}),e.jsxs("div",{className:"reservation-details",children:[e.jsxs("div",{className:"reservation-info",children:[e.jsx(ot,{className:"icon"}),e.jsxs("span",{children:["Table: ",n.tablereservation_id.tableNumber]})]}),e.jsxs("div",{className:"reservation-info",children:[e.jsx(Nt,{className:"icon"}),e.jsxs("span",{children:["Date: ",new Date(n.tablereservation_id.reservationDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"reservation-info",children:[e.jsx(lt,{className:"icon"}),e.jsxs("span",{children:["Time: ",n.tablereservation_id.time]})]}),e.jsxs("div",{className:"reservation-info",children:[e.jsx(Ct,{className:"icon"}),e.jsxs("span",{children:["Guests: ",n.tablereservation_id.numberOfGuests]})]})]})]}),n.orderType==="delivery"&&n.deliveryDetails&&e.jsxs("div",{className:"detail-item delivery-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Yt,{}),e.jsx("span",{children:"Delivery Details:"})]}),e.jsxs("div",{className:"delivery-details-list",children:[e.jsxs("div",{className:"delivery-info-item",children:[e.jsxs("div",{className:"info-label",children:[e.jsx(ot,{className:"icon"}),e.jsx("span",{children:"Room Number:"})]}),e.jsx("div",{className:"info-value",children:n.deliveryDetails.roomNumber})]}),e.jsxs("div",{className:"delivery-info-item",children:[e.jsxs("div",{className:"info-label",children:[e.jsx(Nt,{className:"icon"}),e.jsx("span",{children:"Booking ID:"})]}),e.jsx("div",{className:"info-value truncate-text",title:n.deliveryDetails.reservationId,children:n.deliveryDetails.reservationId})]}),n.deliveryDetails.estimatedDeliveryTime&&e.jsxs("div",{className:"delivery-info-item",children:[e.jsxs("div",{className:"info-label",children:[e.jsx(lt,{className:"icon"}),e.jsx("span",{children:"Estimated:"})]}),e.jsx("div",{className:"info-value delivery-time",title:ft(n.deliveryDetails.estimatedDeliveryTime),children:ft(n.deliveryDetails.estimatedDeliveryTime)})]}),n.deliveryDetails.deliveryInstructions&&e.jsxs("div",{className:"delivery-info-item",children:[e.jsxs("div",{className:"info-label",children:[e.jsx(xs,{className:"icon"}),e.jsx("span",{children:"Instructions:"})]}),e.jsx("div",{className:"info-value wrap-text",children:n.deliveryDetails.deliveryInstructions})]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx(lt,{}),e.jsx("span",{children:"Order Date:"}),ft(n.orderDate)]}),e.jsxs("div",{className:"detail-item order-type",children:[d(n.orderType),e.jsx("span",{children:"Order Type:"}),e.jsx("span",{className:`type-label ${(_=n.orderType)==null?void 0:_.toLowerCase()}`,children:f(n.orderType)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx(ka,{}),e.jsx("span",{children:"Total Amount:"}),"â‚¹",n.totalAmount]})]}),n.status==="pending"&&e.jsx("button",{className:"cancel-btn",onClick:()=>j(n._id),children:"Cancel Order"})]},n._id)})})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},zn=()=>{const[t,a]=s.useState([]),[h,p]=s.useState(!0),[c,g]=s.useState(null),[o,N]=s.useState(new Date),[u,x]=s.useState(""),[d,f]=s.useState(1),[j,n]=s.useState("all");s.useState("all");const[_,m]=s.useState(""),[k,L]=s.useState([]),C=()=>{const O=[],ne=new Date,ie=o.toDateString(),A=ne.toDateString()===ie,F=ne.getHours(),K=ne.getMinutes();for(let R=11;R<=22;R++)if(A){if(R<F)continue;R===F?K<30&&O.push(`${R}:30`):(O.push(`${R}:00`),O.push(`${R}:30`))}else O.push(`${R}:00`),O.push(`${R}:30`);return O},H=async()=>{try{p(!0),g(null);const O=await te.get("http://localhost:3001/user/restaurant/tables");if(O.data&&O.data.data)a(O.data.data);else throw new Error("Invalid data format received")}catch(O){console.error("Error fetching tables:",O),g(O.message||"Failed to load tables"),re("Failed to load tables"),a([])}finally{p(!1)}},b=async(O,ne)=>{try{const ie=await te.get("http://localhost:3001/user/restaurant/confirmed-reservations",{params:{date:O.toISOString(),time:ne}});ie.data.success&&L(ie.data.data)}catch(ie){console.error("Error fetching confirmed reservations:",ie),Pa.error("Error checking table availability")}};s.useEffect(()=>{o&&u&&b(o,u)},[o,u]),s.useEffect(()=>{H()},[]);const z=O=>{switch(O){case"Indoor":return e.jsx(_a,{className:"location-icon indoor"});case"Outdoor":return e.jsx(Ta,{className:"location-icon outdoor"});case"Balcony":return e.jsx(ot,{className:"location-icon balcony"});default:return e.jsx(rt,{className:"location-icon"})}},ce=async O=>{var ne,ie;try{const A=t.find(K=>K._id===O);if((await P.fire({title:"Confirm Reservation",html:`
          <div class="reservation-confirmation">
            <p><strong>Table:</strong> ${A.tableNumber}</p>
            <p><strong>Date:</strong> ${o.toLocaleDateString()}</p>
            <p><strong>Time:</strong> ${u}</p>
            <p><strong>Guests:</strong> ${d}</p>
            <p><strong>Location:</strong> ${A.location}</p>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:"#4CAF50",cancelButtonColor:"#d33",confirmButtonText:"Confirm Reservation",cancelButtonText:"Cancel",customClass:{popup:"reservation-popup"}})).isConfirmed){const K=localStorage.getItem("token"),R=Qe(K);console.log(d),(await te.post("http://localhost:3001/user/restaurant/table-reservations",{userId:R._id,table_id:A._id,tableNumber:A.tableNumber,reservationDate:o,numberOfGuests:d,specialRequests:_,time:u})).data.success&&de()}}catch(A){console.error("Reservation error:",A),re(((ie=(ne=A.response)==null?void 0:ne.data)==null?void 0:ie.message)||"Failed to make reservation")}},de=()=>{P.fire({title:"Reservation Confirmed!",html:`
        <div class="success-animation">
          <div class="checkmark">
            <div class="check-icon"></div>
          </div>
        </div>
        <p>Your table has been successfully reserved.</p>
      `,icon:"success",timer:3e3,showConfirmButton:!1})},re=O=>{P.fire({title:"Oops...",text:O,icon:"error",customClass:{popup:"error-popup"}})},xe=()=>{if(!Array.isArray(t))return[];const O=t.filter(A=>{if(!A)return!1;const F=k.some(R=>R.tableNumber===A.tableNumber),K=j==="all"||A.location===j;return!F&&K&&A.isAvailable}),ne=O.filter(A=>A.capacity===d);if(ne.length>0)return ne;const ie=O.filter(A=>A.capacity>d);if(ie.length>0){const A=Math.min(...ie.map(F=>F.capacity));return ie.filter(F=>F.capacity===A).sort((F,K)=>F.capacity-K.capacity)}return[]},le=O=>O>d?e.jsx("div",{className:"capacity-warning",children:e.jsxs("small",{style:{color:"#666",fontSize:"0.85em"},children:["No ",d,"-seat tables available. This ",O,"-seat table is the next best available option."]})}):null,fe=O=>{const ne=ie=>Array(ie).fill(0).map((A,F)=>e.jsx(La,{className:`chair-icon chair-${F+1}`},F));return e.jsx("div",{className:"table-layout",children:O<=4?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"small-table",children:e.jsx(Fa,{className:"table-icon"})}),e.jsx("div",{className:"chairs-container",children:ne(O)})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"large-table",children:e.jsx(Ea,{className:"table-icon"})}),e.jsx("div",{className:"chairs-container large",children:ne(O)})]})})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),e.jsxs("div",{className:"table-reservation-container",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(Aa,{})," Table Reservation"]}),c&&e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:c}),e.jsx("button",{onClick:H,children:"Try Again"})]}),e.jsxs("div",{className:"reservation-form",children:[e.jsxs("div",{className:"form-group date-group",children:[e.jsx(Nt,{className:"form-icon"}),e.jsx("label",{children:"Select Date"}),e.jsx(jt,{selected:o,onChange:O=>N(O),minDate:new Date,className:"date-picker",dateFormat:"dd/MM/yyyy",popperPlacement:"top-start",popperModifiers:[{name:"offset",options:{offset:[0,5]}},{name:"preventOverflow",options:{boundary:"viewport",altAxis:!0,padding:8}}],dayClassName:O=>O<new Date().setHours(0,0,0,0)?"react-datepicker__day--past":void 0,renderDayContents:(O,ne)=>e.jsx("span",{children:O}),showPopperArrow:!0,calendarStartDay:1})]}),e.jsxs("div",{className:"form-group time-group",children:[e.jsx(lt,{className:"form-icon"}),e.jsx("label",{children:"Select Time"}),e.jsxs("select",{value:u,onChange:O=>x(O.target.value),className:"time-select",children:[e.jsx("option",{value:"",children:"Choose time"}),C().map(O=>e.jsx("option",{value:O,children:O},O))]})]}),e.jsxs("div",{className:"form-group guests-group",children:[e.jsx(Ct,{className:"form-icon"}),e.jsx("label",{children:"Number of Guests"}),e.jsx("input",{type:"number",min:"1",max:"10",value:d,onChange:O=>f(parseInt(O.target.value)),className:"guests-input"})]}),e.jsxs("div",{className:"form-group location-group",children:[e.jsx(rt,{className:"form-icon"}),e.jsx("label",{children:"Preferred Location"}),e.jsxs("select",{value:j,onChange:O=>n(O.target.value),className:"location-select",children:[e.jsx("option",{value:"all",children:"All Locations"}),e.jsx("option",{value:"Indoor",children:"Indoor"}),e.jsx("option",{value:"Outdoor",children:"Outdoor"}),e.jsx("option",{value:"Balcony",children:"Balcony"})]})]})]}),e.jsx("div",{className:"tables-grid",children:xe().map(O=>e.jsxs("div",{className:"table-card",children:[e.jsxs("div",{className:"table-header",children:[e.jsxs("h3",{children:["Table ",O.tableNumber]}),z(O.location)]}),e.jsx("div",{className:"table-visualization",children:fe(O.capacity)}),e.jsxs("div",{className:"table-details",children:[e.jsxs("p",{children:[e.jsx(Ct,{}),"Capacity: ",O.capacity," persons",le(O.capacity)]}),e.jsxs("p",{children:[e.jsx(rt,{}),"Location: ",O.location]})]}),e.jsx("textarea",{placeholder:"Special requests or notes...",value:_,onChange:ne=>m(ne.target.value),className:"special-requests"}),e.jsx("button",{className:"reserve-btn",onClick:()=>ce(O._id),disabled:!o||!u,children:"Reserve Table"})]},O._id))}),h&&e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading available tables..."})]}),!h&&!c&&xe().length===0&&e.jsxs("div",{className:"no-tables",children:[e.jsxs("p",{children:["No tables available for ",d," guests"]}),e.jsx("small",{children:"Try adjusting the number of guests or selecting a different time/date"})]})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},Hn=()=>e.jsx("div",{className:"spinner-container",children:e.jsx("div",{className:"spinner",children:e.jsx("div",{className:"spinner-inner"})})}),Wn=()=>{Me();const[t,a]=s.useState([]),[h,p]=s.useState(!0),[c,g]=s.useState(null),[o,N]=s.useState("upcoming");s.useEffect(()=>{u()},[]);const u=async()=>{try{const n=localStorage.getItem("token"),_=Qe(n),m=await te.get(`http://localhost:3001/user/restaurant/user-reservations/${_._id}`);m.data.success&&a(m.data.data),p(!1)}catch(n){console.error("Error fetching reservations:",n),g("Failed to load reservations"),p(!1),gt.error("Failed to load reservations")}},x=async n=>{try{(await te.put(`http://localhost:3001/user/restaurant/table-reservations/${n}/cancel`)).data.success&&(gt.success("Reservation cancelled successfully"),u())}catch(_){console.error("Error cancelling reservation:",_),gt.error("Failed to cancel reservation")}},d=n=>({pending:"text-yellow-600",confirmed:"text-green-600",cancelled:"text-red-600",completed:"text-gray-600"})[n]||"text-gray-600",f=n=>{const _=new Date;return t.filter(m=>{const k=new Date(m.reservationDate);return n==="upcoming"?k>=_&&m.status!=="cancelled":k<_||m.status==="cancelled"})};if(h)return e.jsx(Hn,{});if(c)return e.jsx("div",{className:"error-message",children:c});const j=f(o);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),e.jsxs("div",{className:"my-reservations-container",children:[e.jsx("h2",{className:"page-title",children:"My Table Reservations"}),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${o==="upcoming"?"active":""}`,onClick:()=>N("upcoming"),children:"Upcoming Reservations"}),e.jsx("button",{className:`tab ${o==="past"?"active":""}`,onClick:()=>N("past"),children:"Past Reservations"})]}),j.length===0?e.jsxs("div",{className:"no-reservations",children:["No ",o," reservations found"]}):e.jsx("div",{className:"reservations-grid",children:j.map(n=>e.jsxs("div",{className:"reservation-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("span",{className:"reservation-id",children:["#",n._id.slice(-6)]}),e.jsx("span",{className:`status ${d(n.status)}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("i",{className:"fas fa-calendar"}),e.jsx("span",{children:vt(new Date(n.reservationDate),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:n.time})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("i",{className:"fas fa-users"}),e.jsxs("span",{children:[n.numberOfGuests," Guests"]})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("i",{className:"fas fa-chair"}),e.jsxs("span",{children:["Table ",n.tableNumber]})]}),n.specialRequests&&e.jsxs("div",{className:"special-requests",children:[e.jsx("p",{children:"Special Requests:"}),e.jsx("p",{children:n.specialRequests})]})]}),n.status==="pending"&&e.jsx("div",{className:"card-actions",children:e.jsx("button",{className:"cancel-btn",onClick:()=>x(n._id),children:"Cancel Reservation"})})]},n._id))})]}),e.jsx("div",{className:"footer",children:e.jsx(Pe,{})})]})},qn=()=>e.jsxs(ps,{children:[e.jsx(ve,{path:"menu",element:e.jsx(On,{})}),e.jsx(ve,{path:"ar-view",element:e.jsx(vs,{})}),e.jsxs(ve,{element:e.jsx(Mn,{}),children:[e.jsx(ve,{path:"reservations",element:e.jsx(zn,{})}),e.jsx(ve,{path:"table-reservations",element:e.jsx(Wn,{})}),e.jsx(ve,{path:"orders",element:e.jsx(Vn,{})}),e.jsx(ve,{path:"cart",element:e.jsx($n,{})})]})]}),Yn=()=>{const t=Se(),[a,h]=s.useState({email:"",password:""}),[p,c]=s.useState(""),g=async o=>{var N,u;o.preventDefault();try{const x=await te.post("http://localhost:3001/restaurant/admin/login",a);localStorage.setItem("token",x.data.token),localStorage.setItem("role",x.data.user.role),t("/restaurant/admin")}catch(x){c(((u=(N=x.response)==null?void 0:N.data)==null?void 0:u.message)||"Login failed")}};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsx("h2",{children:"Login"}),p&&e.jsx("div",{className:"error-message",children:p}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:o=>h({...a,email:o.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",value:a.password,onChange:o=>h({...a,password:o.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"login-button",children:"Login"})]})]})})},Jt=t=>{try{let a=t.replace(/```json\n?/g,"").replace(/```\n?/g,"");a=a.replace(/\*\*/g,"");const h=a.match(/\{[\s\S]*\}/);return h&&(a=h[0]),JSON.parse(a)}catch(a){return console.error("JSON parsing error:",a),{error:!0,message:"Failed to parse response",rawText:t}}},ht=async(t,a)=>{try{const h=new It(a);try{const o=(await(await h.getGenerativeModel({model:"gemini-1.5-pro-latest",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}}).generateContent({contents:[{parts:[{text:t+`
Please ensure the response is in valid JSON format.`}]}]})).response).text();return Jt(o)}catch{console.log("Falling back to gemini-pro");const N=(await(await h.getGenerativeModel({model:"gemini-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}}).generateContent({contents:[{parts:[{text:t+`
Please ensure the response is in valid JSON format.`}]}]})).response).text();return Jt(N)}}catch(h){throw console.error("Generation error:",h),h}},Oe=Be(Te)(({theme:t})=>({transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-5px)",boxShadow:t.shadows[8]},background:"linear-gradient(145deg, #ffffff 0%, #f5f5f5 100%)"})),Ve=Be(J)(({theme:t})=>({display:"flex",alignItems:"center",color:t.palette.primary.main,marginBottom:t.spacing(1)})),Un=Be(Le)(({theme:t})=>({background:t.palette.success.light,color:t.palette.success.contrastText})),Zn=Be(Le)(({theme:t})=>({background:t.palette.warning.light,color:t.palette.warning.contrastText})),Qn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Kn={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},Jn=()=>{const[t,a]=s.useState(!1),[h,p]=s.useState(null),[c,g]=s.useState(""),[o,N]=s.useState(null),u="AIzaSyD3IRHNvEArziuMOFYQcO1NUO0fbWB1Jd0",x=async d=>{if(!d){p("Please enter a location");return}a(!0),p(null);try{const f=`Given the location "${d}", return ONLY the correct location name as a JSON object with this structure: {"correctedLocation": "correct name"}. If it's already correct, return the same name. Example: for "New Yrok" return {"correctedLocation": "New York"}`,j=await ht(f,u);if(j.error)throw new Error(j.message);const n=j.correctedLocation;n.toLowerCase()!==d.toLowerCase()&&(P.fire({icon:"info",title:"Location Corrected",text:`Showing results for "${n}" instead of "${d}"`,showConfirmButton:!1,timer:2e3}),g(n));const _=`Act as a local tour guide and provide comprehensive information about ${n}. 
                     Return ONLY a JSON object with the following structure:
                     {
                       "nearbyAttractions": [{"name": "", "description": "", "type": "", "bestTime": "", "rating": "", "ticketPrice": "", "tips": ""}],
                       "localFood": [{"name": "", "description": "", "where": "", "price": "", "mustTry": boolean}],
                       "events": [{"name": "", "time": "", "description": "", "venue": ""}],
                       "practicalInfo": {"bestTimeToVisit": "", "weather": "", "localTransport": "", "safety": ""},
                       "culturalTips": [""],
                       "hiddenGems": [{"name": "", "description": "", "why": ""}]
                     }`,m=await ht(_,u);if(m.error)throw new Error(m.message);N(m)}catch(f){console.error("Error fetching places:",f),p("Failed to fetch location information. Please try again.")}finally{a(!1)}};return e.jsxs(J,{sx:{p:3},children:[e.jsx(St,{in:!0,timeout:1e3,children:e.jsxs(r,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",color:"primary.main",fontWeight:"bold",mb:4},children:[e.jsx(Ut,{sx:{mr:1,verticalAlign:"bottom"}}),"Travel Guide"]})}),e.jsx(Ba,{in:!0,timeout:500,children:e.jsx(Oe,{sx:{mb:3},children:e.jsx(Ie,{children:e.jsxs(D,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(D,{item:!0,xs:12,md:8,children:e.jsx(ge,{fullWidth:!0,label:"Enter Location",value:c,onChange:d=>g(d.target.value),placeholder:"e.g., Paris, France"})}),e.jsx(D,{item:!0,xs:12,md:4,children:e.jsx(pe,{fullWidth:!0,variant:"contained",onClick:()=>x(c),disabled:t,children:"Explore Location"})})]})})})}),h&&e.jsx(St,{in:!0,children:e.jsx($e,{severity:"error",sx:{mb:2},children:h})}),t?e.jsx(J,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(Ze,{size:60,thickness:4})}):o&&e.jsx(Xe.div,{variants:Qn,initial:"hidden",animate:"visible",children:e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,children:e.jsx(Xe.div,{variants:Kn,children:e.jsx(Oe,{children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx(Ut,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Nearby Attractions"})]}),e.jsx(D,{container:!0,spacing:2,children:o.nearbyAttractions.map((d,f)=>e.jsx(D,{item:!0,xs:12,md:4,children:e.jsx(Xe.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(Ce,{elevation:3,sx:{p:2,height:"100%"},children:[e.jsx(r,{variant:"h6",color:"primary",children:d.name}),e.jsx(r,{variant:"body2",sx:{mb:2},children:d.description}),e.jsxs(J,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[e.jsx(Un,{icon:e.jsx(Ma,{}),label:d.ticketPrice,size:"small"}),e.jsx(Zn,{icon:e.jsx(yt,{}),label:`${d.rating}/5`,size:"small"})]})]})})},f))})]})})})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(Oe,{children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx(Oa,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Local Cuisine"})]}),o.localFood.map((d,f)=>e.jsxs(J,{sx:{mb:3},children:[e.jsx(r,{variant:"h6",children:d.name}),e.jsx(r,{variant:"body2",paragraph:!0,children:d.description}),e.jsxs(r,{variant:"body2",children:["Where to try: ",d.where]}),e.jsxs(r,{variant:"body2",children:["Price: ",d.price]}),d.mustTry&&e.jsx(Le,{label:"Must Try!",color:"primary",size:"small",sx:{mt:1}})]},f))]})})}),e.jsxs(D,{item:!0,xs:12,md:6,children:[e.jsx(Oe,{sx:{mb:2},children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx($a,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Upcoming Events"})]}),o.events.map((d,f)=>e.jsxs(J,{sx:{mb:2},children:[e.jsx(r,{variant:"h6",children:d.name}),e.jsxs(r,{variant:"body2",color:"textSecondary",children:[d.time," at ",d.venue]}),e.jsx(r,{variant:"body2",children:d.description})]},f))]})}),e.jsx(Oe,{children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx(kt,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Practical Information"})]}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Best Time to Visit"}),e.jsx(r,{paragraph:!0,children:o.practicalInfo.bestTimeToVisit}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Weather"}),e.jsx(r,{paragraph:!0,children:o.practicalInfo.weather}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Local Transport"}),e.jsx(r,{paragraph:!0,children:o.practicalInfo.localTransport}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Safety Tips"}),e.jsx(r,{children:o.practicalInfo.safety})]})})]}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Oe,{children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx(Ga,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Hidden Gems"})]}),e.jsx(D,{container:!0,spacing:2,children:o.hiddenGems.map((d,f)=>e.jsx(D,{item:!0,xs:12,md:4,children:e.jsxs(Ce,{elevation:3,sx:{p:2,height:"100%"},children:[e.jsx(r,{variant:"h6",children:d.name}),e.jsx(r,{variant:"body2",paragraph:!0,children:d.description}),e.jsxs(r,{variant:"body2",color:"primary",children:["Why visit: ",d.why]})]})},f))})]})})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Oe,{children:e.jsxs(Ie,{children:[e.jsxs(Ve,{children:[e.jsx(Va,{sx:{mr:1}}),e.jsx(r,{variant:"h5",children:"Cultural Tips"})]}),e.jsx(D,{container:!0,spacing:2,children:o.culturalTips.map((d,f)=>e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(r,{children:["â€¢ ",d]})},f))})]})})})]})})]})},Xn=()=>{const[t,a]=s.useState(!1),[h,p]=s.useState(null),[c,g]=s.useState(""),[o,N]=s.useState(""),[u,x]=s.useState(null),d="AIzaSyD3IRHNvEArziuMOFYQcO1NUO0fbWB1Jd0",f=async()=>{if(!c||!o){p("Please enter both locations");return}a(!0),p(null);try{const j=`Given the locations "from: ${c}" and "to: ${o}", return ONLY a JSON object with correct location names in this structure: {"fromLocation": "correct from name", "toLocation": "correct to name"}. If names are already correct, return the same names. Example: for "New Yrok" to "Washingten" return {"fromLocation": "New York", "toLocation": "Washington"}`,n=await ht(j,d);if(n.error)throw new Error(n.message);const _=n.fromLocation,m=n.toLocation;(_.toLowerCase()!==c.toLowerCase()||m.toLowerCase()!==o.toLowerCase())&&(P.fire({icon:"info",title:"Locations Corrected",html:`Showing results for:<br>
                ${c!==_?`<b>From:</b> "${_}" (corrected from "${c}")<br>`:""}
                ${o!==m?`<b>To:</b> "${m}" (corrected from "${o}")`:""}`,showConfirmButton:!0,timer:3e3}),g(_),N(m));const k=`Act as a comprehensive transport guide and provide information about traveling from ${_} to ${m}. 
                     Return ONLY a JSON object with the following structure:
                     {
                       "flights": [{"duration": "", "priceRange": "", "airlines": "", "frequency": "", "bestTimeToBook": "", "terminalTips": ""}],
                       "trains": [{"duration": "", "priceRange": "", "trainTypes": "", "frequency": "", "stationInfo": "", "amenities": ""}],
                       "buses": [{"duration": "", "priceRange": "", "operators": "", "frequency": "", "comfort": "", "stops": ""}],
                       "driving": {"duration": "", "distance": "", "routeHighlights": [], "roadConditions": "", "restStops": "", "tollInfo": ""},
                       "generalTips": [""],
                       "seasonalInfo": {"peak": "", "offPeak": "", "weatherConsiderations": ""}
                     }`,L=await ht(k,d);if(L.error)throw new Error(L.message);x(L)}catch(j){console.error("Error fetching transport information:",j),p("Failed to fetch transport information. Please try again.")}finally{a(!1)}};return e.jsxs(J,{sx:{p:3},children:[e.jsx(r,{variant:"h4",gutterBottom:!0,children:"Transport Guide"}),e.jsx(Te,{sx:{mb:3},children:e.jsx(Ie,{children:e.jsxs(D,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(D,{item:!0,xs:12,md:5,children:e.jsx(ge,{fullWidth:!0,label:"From",value:c,onChange:j=>g(j.target.value),placeholder:"e.g., London"})}),e.jsx(D,{item:!0,xs:12,md:5,children:e.jsx(ge,{fullWidth:!0,label:"To",value:o,onChange:j=>N(j.target.value),placeholder:"e.g., Paris"})}),e.jsx(D,{item:!0,xs:12,md:2,children:e.jsx(pe,{fullWidth:!0,variant:"contained",onClick:f,disabled:t,sx:{height:"56px"},children:"Search Routes"})})]})})}),h&&e.jsx($e,{severity:"error",sx:{mb:2},children:h}),t?e.jsx(J,{display:"flex",justifyContent:"center",children:e.jsx(Ze,{})}):u&&e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(za,{sx:{mr:1}}),"Flights"]}),u.flights.map((j,n)=>e.jsxs(J,{sx:{mb:3},children:[e.jsxs(r,{variant:"h6",children:["Option ",n+1]}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Duration"}),e.jsx(r,{children:j.duration})]}),e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Price Range"}),e.jsx(r,{children:j.priceRange})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Airlines"}),e.jsx(r,{children:j.airlines})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Frequency"}),e.jsx(r,{children:j.frequency})]}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Le,{icon:e.jsx(kt,{}),label:`Best Time to Book: ${j.bestTimeToBook}`,sx:{mr:1,mb:1}})}),e.jsx(D,{item:!0,xs:12,children:e.jsxs(r,{variant:"body2",sx:{backgroundColor:"#f5f5f5",p:1,borderRadius:1},children:["ðŸ’¡ Terminal Tip: ",j.terminalTips]})})]}),n<u.flights.length-1&&e.jsx(qe,{sx:{my:2}})]},n))]})})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ha,{sx:{mr:1}}),"Trains"]}),u.trains.map((j,n)=>e.jsxs(J,{sx:{mb:3},children:[e.jsxs(r,{variant:"h6",children:["Option ",n+1]}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Duration"}),e.jsx(r,{children:j.duration})]}),e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Price Range"}),e.jsx(r,{children:j.priceRange})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Train Types"}),e.jsx(r,{children:j.trainTypes})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Frequency"}),e.jsx(r,{children:j.frequency})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Station Info"}),e.jsx(r,{children:j.stationInfo})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Amenities"}),j.amenities.split(",").map((_,m)=>e.jsx(Le,{label:_.trim(),size:"small",sx:{mr:1,mb:1}},m))]})]}),n<u.trains.length-1&&e.jsx(qe,{sx:{my:2}})]},n))]})})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(Wa,{sx:{mr:1}}),"Buses"]}),u.buses.map((j,n)=>e.jsxs(J,{sx:{mb:3},children:[e.jsxs(r,{variant:"h6",children:["Option ",n+1]}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Duration"}),e.jsx(r,{children:j.duration})]}),e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Price Range"}),e.jsx(r,{children:j.priceRange})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Operators"}),e.jsx(r,{children:j.operators})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Frequency"}),e.jsx(r,{children:j.frequency})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Comfort Level"}),e.jsx(r,{children:j.comfort})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Stops"}),e.jsx(r,{children:j.stops})]})]}),n<u.buses.length-1&&e.jsx(qe,{sx:{my:2}})]},n))]})})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(qa,{sx:{mr:1}}),"Driving"]}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Duration"}),e.jsx(r,{children:u.driving.duration})]}),e.jsxs(D,{item:!0,xs:6,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Distance"}),e.jsx(r,{children:u.driving.distance})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Route Highlights"}),u.driving.routeHighlights.map((j,n)=>e.jsx(Le,{icon:e.jsx(Ya,{}),label:j,sx:{mr:1,mb:1}},n))]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Road Conditions"}),e.jsx(r,{children:u.driving.roadConditions})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Rest Stops"}),e.jsx(r,{children:u.driving.restStops})]}),e.jsxs(D,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"textSecondary",children:"Toll Information"}),e.jsx(r,{children:u.driving.tollInfo})]})]})]})})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsx(r,{variant:"h5",gutterBottom:!0,children:"Travel Tips"}),e.jsx(D,{container:!0,spacing:2,children:u.generalTips.map((j,n)=>e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(kt,{sx:{mr:1,color:"primary.main"}}),j]})},n))})]})})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Te,{children:e.jsxs(Ie,{children:[e.jsx(r,{variant:"h5",gutterBottom:!0,children:"Seasonal Information"}),e.jsxs(D,{container:!0,spacing:3,children:[e.jsxs(D,{item:!0,xs:12,md:4,children:[e.jsx(r,{variant:"h6",children:"Peak Season"}),e.jsx(r,{children:u.seasonalInfo.peak})]}),e.jsxs(D,{item:!0,xs:12,md:4,children:[e.jsx(r,{variant:"h6",children:"Off-Peak Season"}),e.jsx(r,{children:u.seasonalInfo.offPeak})]}),e.jsxs(D,{item:!0,xs:12,md:4,children:[e.jsx(r,{variant:"h6",children:"Weather Considerations"}),e.jsx(r,{children:u.seasonalInfo.weatherConsiderations})]})]})]})})})]})]})},ei=Be(Ce)(({theme:t})=>({padding:t.spacing(4),marginBottom:t.spacing(4),background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:t.spacing(2),boxShadow:"0 8px 32px rgba(0,0,0,0.1)",transition:"transform 0.3s ease-in-out","&:hover":{transform:"translateY(-5px)"}})),ti=Be(Ua)(({theme:t})=>({"& .MuiTabs-indicator":{height:3,borderRadius:1.5},"& .MuiTab-root":{minHeight:64,fontSize:"1rem",textTransform:"none",fontWeight:500,transition:"all 0.3s","&:hover":{color:t.palette.primary.main,opacity:1},"&.Mui-selected":{color:t.palette.primary.main}}})),Xt=({children:t,value:a,index:h,...p})=>e.jsx("div",{role:"tabpanel",hidden:a!==h,id:`travel-tabpanel-${h}`,"aria-labelledby":`travel-tab-${h}`,...p,children:a===h&&e.jsx(St,{in:!0,timeout:500,children:e.jsx(J,{sx:{pt:3},children:t})})}),si=()=>{Me();const[t,a]=s.useState(0),h=(c,g)=>{a(g)},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menunav",children:e.jsx(ke,{title:"Guest Information",subtitle:"Fill in guest details"})}),e.jsxs(Dt,{maxWidth:"xl",children:[e.jsx(qe,{sx:{my:4}}),e.jsx(Xe.div,{initial:"hidden",animate:"visible",variants:p,children:e.jsxs(ei,{elevation:3,children:[e.jsxs(J,{sx:{textAlign:"center",mb:4},children:[e.jsx(Za,{sx:{fontSize:40,color:"primary.main",mb:2}}),e.jsx(r,{variant:"h4",component:"h2",sx:{fontWeight:600,background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Travel Information"})]}),e.jsxs(ti,{value:t,onChange:h,variant:"fullWidth",centered:!0,sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(Zt,{icon:e.jsx(Qa,{}),label:"Tourist Spots",sx:{display:"flex",flexDirection:"row",alignItems:"center","& .MuiSvgIcon-root":{mr:1}}}),e.jsx(Zt,{icon:e.jsx(Ka,{}),label:"Transport",sx:{display:"flex",flexDirection:"row",alignItems:"center","& .MuiSvgIcon-root":{mr:1}}})]}),e.jsx(Xt,{value:t,index:0,children:e.jsx(Jn,{})}),e.jsx(Xt,{value:t,index:1,children:e.jsx(Xn,{})})]})})]})]})},ai=Be(Ce)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(3),background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:t.spacing(2),boxShadow:"0 8px 32px rgba(0,0,0,0.1)"})),ri=()=>{const t=Se(),[a,h]=s.useState(!1),[p,c]=s.useState(null),[g,o]=s.useState(null),[N,u]=s.useState(null),x=s.useRef(null),d=s.useRef(null);s.useEffect(()=>(f(),()=>{N&&N.stop()}),[]);const f=async()=>{try{const k=new Qt(x.current,async L=>{await j(L.data)},{preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0});u(k),await k.start()}catch(k){c("Failed to start camera. Please ensure camera permissions are granted."),console.error("Scanner initialization error:",k)}},j=async k=>{var L,C;if(!a){h(!0),c(null);try{const H=await te.post("http://localhost:3001/user/qr/process",{qrData:k,timestamp:new Date().toISOString()},{headers:{"Content-Type":"application/json"}});if(H.data.success)o(H.data.message),_("success"),N&&N.stop(),setTimeout(()=>{t("/")},2e3);else throw new Error(H.data.message||"Failed to process QR code")}catch(H){console.error("QR Processing Error:",H),c(((C=(L=H.response)==null?void 0:L.data)==null?void 0:C.message)||H.message||"Failed to process QR code. Please try again."),_("error")}finally{h(!1)}}},n=async k=>{var C;const L=(C=k.target.files)==null?void 0:C[0];if(L){h(!0),c(null);try{const H=await Qt.scanImage(L);await j(H)}catch{c("Could not detect QR code in image. Please try another image."),_("error")}finally{h(!1),d.current&&(d.current.value="")}}},_=k=>{new Audio(`/sounds/${k}.mp3`).play().catch(console.error)},m=async()=>{c(null),o(null),N&&await N.start(),d.current&&(d.current.value="")};return e.jsx(Dt,{maxWidth:"sm",children:e.jsxs(ai,{children:[e.jsx(r,{variant:"h5",gutterBottom:!0,align:"center",children:"QR Code Scanner"}),e.jsxs(J,{sx:{mb:3},children:[e.jsx("video",{ref:x,style:{width:"100%",borderRadius:"8px",maxHeight:"350px",objectFit:"cover"}}),e.jsx(r,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:1},children:"Position the QR code within the frame"})]}),e.jsxs(J,{sx:{textAlign:"center",mb:3},children:[e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:n,style:{display:"none"},id:"qr-file-input"}),e.jsx("label",{htmlFor:"qr-file-input",children:e.jsx(pe,{variant:"outlined",component:"span",sx:{mx:1},children:"Upload Image"})})]}),a&&e.jsxs(Ja,{alignItems:"center",spacing:2,sx:{my:3},children:[e.jsx(Ze,{}),e.jsx(r,{children:"Processing QR Code..."})]}),p&&e.jsx($e,{severity:"error",sx:{mb:2},children:p}),g&&e.jsxs($e,{severity:"success",sx:{mb:2},children:[g,e.jsx(r,{variant:"body2",sx:{mt:1},children:"Redirecting to home page..."})]}),(p||g)&&e.jsx(J,{sx:{textAlign:"center",mt:2},children:e.jsx(pe,{variant:"contained",onClick:m,color:"primary",children:"Scan Again"})})]})})};function ni(){return e.jsx(Xa,{children:e.jsxs(ps,{children:[e.jsx(ve,{path:"/",element:e.jsx(Sr,{})}),e.jsx(ve,{path:"/signup",element:e.jsx(lr,{})}),e.jsx(ve,{path:"/managerPanel",element:e.jsx(un,{})}),e.jsx(ve,{path:"/public",element:e.jsx(kr,{})}),e.jsx(ve,{path:"/rooms",element:e.jsx(pn,{})}),e.jsx(ve,{path:"/roominfo",element:e.jsx(gn,{})}),e.jsx(ve,{path:"/list",element:e.jsx(jn,{})}),e.jsx(ve,{path:"/guestdetails",element:e.jsx(An,{})}),e.jsx(ve,{path:"/reserveroom",element:e.jsx(Pn,{})}),e.jsx(ve,{path:"/my-bookings",element:e.jsx(vn,{})}),e.jsx(ve,{path:"/myprofile",element:e.jsx(Tn,{})}),e.jsx(ve,{path:"/booking-details/:bookingId",element:e.jsx(En,{})}),e.jsx(ve,{path:"/roomdetails",element:e.jsx(Ln,{})}),e.jsx(ve,{path:"/saved-guests",element:e.jsx(Bn,{})}),e.jsx(ve,{path:"/restaurant/*",element:e.jsx(qn,{})}),e.jsx(ve,{path:"/restaurent_login",element:e.jsx(Yn,{})}),e.jsx(ve,{path:"/guide",element:e.jsx(si,{})}),e.jsx(ve,{path:"/qrscanner",element:e.jsx(ri,{})})]})})}er.createRoot(document.getElementById("root")).render(e.jsx(tr.StrictMode,{children:e.jsx(ni,{})}));
//# sourceMappingURL=index-D2bKuQ0I.js.map
